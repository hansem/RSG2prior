<?xml version="1.0" standalone="no"?>
<monkeyml version="1.0">
    <io_devices tag="IO Devices">
        <iodevice type="stimulus_display" tag="Stimulus Display" background_color="0.5, 0.5, 0.5" announce_stimuli_on_implicit_updates="NO"></iodevice>
        <iodevice tag="Eyelink 1000" type="eyelink" data_interval="1ms" tracker_ip="100.1.1.1" eye_rx="" eye_ry="" eye_lx="" eye_ly="" eye_x="" eye_y="" eye_z="" href_rx="" href_ry="" href_lx="" href_ly="" pupil_rx="" pupil_ry="" pupil_lx="eyeRX" pupil_ly="eyeRY" pupil_size_r="" pupil_size_l="pupil_size" eye_time="" tracking_dist="1024"></iodevice>
        <iodevice type="mouse_input" tag="Mouse Input Device" mouse_position_x="mouseX" mouse_position_y="mouseY" mouse_down="mouseDown" hide_cursor="YES"></iodevice>
        <calibrator type="linear_eye_calibrator" tag="Eye Cal" eyeh_raw="eyeRX" eyev_raw="eyeRY" eyeh_calibrated="eye_x" eyev_calibrated="eye_y"></calibrator>
        <iodevice type="nidaq" tag="NIDaq Device" name="Dev1" update_interval="2ms" analog_input_data_interval="1ms" analog_output_data_interval="1ms" assume_multiplexed_adc="YES">
            <iochannel type="nidaq_digital_output" tag="NIDAQ Digital Output Channel" port_number="0" num_lines_in_port="8" line0="" line1="" line2="" line3="" line4="" line5="" line6="trialSync" line7="rewardOut" line8="" line9="" line10="" line11="" line12="" line13="" line14="" line15="" line16="" line17="" line18="" line19="" line20="" line21="" line22="" line23="" line24="" line25="" line26="" line27="" line28="" line29="" line30="" line31=""></iochannel>
            <iochannel type="nidaq_analog_input_voltage" tag="NIDAQ Analog Input Voltage Channel" channel_number="0" range_min="-10.0" range_max="10.0" voltage="ai0"></iochannel>
            <iochannel type="nidaq_analog_output_voltage" tag="NIDAQ Analog output Voltage Channel 2" channel_number="1" range_min="-10.0" range_max="10.0" voltage="stateAnalogOut"></iochannel>
        </iodevice>
    </io_devices>
    <variables tag="Variables">
        <folder tag="Eye">
            <variable tag="eyeRX" groups="Eye" scope="global" logging="never" default_value="0" type="any" persistant="0"></variable>
            <variable tag="eyeRY" groups="Eye" scope="global" logging="never" default_value="0" type="any" persistant="0"></variable>
            <variable tag="eye_x" groups="Eye" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="eye_y" groups="Eye" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="pupil_size" groups="Eye" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
        </folder>
        <folder tag="eyeFix">
            <variable tag="fix_win" groups="eyeFix" scope="global" logging="when_changed" default_value="7" type="any" persistant="1"></variable>
            <variable tag="fix_sz" groups="eyeFix" scope="global" logging="when_changed" default_value="0.5" type="any" persistant="0"></variable>
            <variable tag="fixX" groups="eyeFix" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="fixY" groups="eyeFix" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="fix_red" groups="eyeFix" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="fix_green" groups="eyeFix" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="fix_blue" groups="eyeFix" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="fixOn" groups="eyeFix" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="dFixY" groups="eyeFix" scope="global" logging="when_changed" default_value="0.0001" type="any" persistant="0"></variable>
            <variable tag="fixWaitDur" groups="eyeFix" scope="global" logging="when_changed" default_value="300000" type="any" persistant="1"></variable>
            <variable tag="NoFixWaitDur" groups="eyeFix" scope="global" logging="when_changed" default_value="1000" type="any" persistant="1"></variable>
            <variable tag="GraceTimeDur" groups="eyeFix" scope="global" logging="when_changed" default_value="200" type="any" persistant="0"></variable>
        </folder>
        <folder tag="target">
            <variable tag="targetOn" groups="target" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="theta" groups="target" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="thetaFeedback" groups="target" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="theta_min" groups="target" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="theta_max" groups="target" scope="global" logging="when_changed" default_value="180" type="any" persistant="0"></variable>
            <variable tag="theta_N" groups="target" scope="global" logging="when_changed" default_value="2" type="any" persistant="0"></variable>
            <variable tag="StartTheta" groups="target" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="ballArcLength" groups="target" scope="global" logging="when_changed" default_value="180" type="any" persistant="1"></variable>
            <variable tag="override" groups="target" scope="global" logging="when_changed" default_value="0" type="integer" persistant="0"></variable>
            <variable tag="theta_override" groups="target" scope="global" logging="when_changed" default_value="0" type="float" persistant="0"></variable>
            <variable tag="amp" groups="target" scope="global" logging="when_changed" default_value="10" type="any" persistant="0"></variable>
            <variable tag="on_targ" groups="target" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="targ_red" groups="target" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="targ_green" groups="target" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="targ_blue" groups="target" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="targ_sz" groups="target" scope="global" logging="when_changed" default_value="0.5" type="any" persistant="0"></variable>
            <variable tag="target_x" groups="target" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="target_y" groups="target" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="target_alpha" groups="target" scope="global" logging="when_changed" default_value="1" type="any" persistant="1"></variable>
        </folder>
        <folder tag="IO_potentiometer">
            <variable tag="ao0" groups="IO_potentiometer" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="ai0" groups="IO_potentiometer" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="doWord" groups="IO_potentiometer" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="doStrobe" groups="IO_potentiometer" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="leftV" groups="IO_potentiometer" scope="global" logging="when_changed" default_value="-0.001" type="any" persistant="0"></variable>
            <variable tag="rightV" groups="IO_potentiometer" scope="global" logging="when_changed" default_value="-5.02" type="any" persistant="0"></variable>
            <variable tag="centerV" groups="IO_potentiometer" scope="global" logging="when_changed" default_value="-2.51" type="any" persistant="0"></variable>
            <variable tag="gainV" groups="IO_potentiometer" scope="global" logging="when_changed" default_value="1.8" type="any" persistant="0"></variable>
        </folder>
        <folder tag="handFixation">
            <variable tag="leverFixWin" groups="handFixation" scope="global" logging="when_changed" default_value="2" type="any" persistant="0"></variable>
            <variable tag="leverFixWinBackCenter" groups="handFixation" scope="global" logging="when_changed" default_value="2" type="any" persistant="0"></variable>
            <variable tag="leverFixWinInit" groups="handFixation" scope="global" logging="when_changed" default_value="2" type="any" persistant="0"></variable>
            <variable tag="leverTarWin" groups="handFixation" scope="global" logging="when_changed" default_value="18" type="any" persistant="0"></variable>
            <variable tag="leverTarWinBackCenter" groups="handFixation" scope="global" logging="when_changed" default_value="18" type="any" persistant="0"></variable>
            <variable tag="leverTarWinInit" groups="handFixation" scope="global" logging="when_changed" default_value="18" type="any" persistant="0"></variable>
            <variable tag="handFixWin" groups="handFixation" scope="global" logging="when_changed" default_value="5" type="any" persistant="0"></variable>
            <variable tag="handFixOn" groups="handFixation" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="handFixSz" groups="handFixation" scope="global" logging="when_changed" default_value="0.5" type="any" persistant="0"></variable>
            <variable tag="handFixAlpha" groups="handFixation" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="handFixAlpha2" groups="handFixation" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="pHandFix2" groups="handFixation" scope="global" logging="when_changed" default_value="0.8" type="any" persistant="0"></variable>
            <variable tag="handFixX" groups="handFixation" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="handFixX2" groups="handFixation" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="handFixY" groups="handFixation" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="handFixB" groups="handFixation" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="handFixG" groups="handFixation" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="handFixR" groups="handFixation" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="cursorX" groups="handFixation" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="cursor2x" groups="handFixation" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="cursor2x0" groups="handFixation" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="cursorAlpha" groups="handFixation" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="cursorAlpha2" groups="handFixation" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
        </folder>
        <folder tag="handTarget">
            <variable tag="mouseX" groups="handTarget" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="mouseY" groups="handTarget" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="mouseDown" groups="handTarget" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="handTargetWin" groups="handTarget" scope="global" logging="when_changed" default_value="4" type="any" persistant="0"></variable>
            <variable tag="handTargetOn" groups="handTarget" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="handTarg_sz" groups="handTarget" scope="global" logging="when_changed" default_value="0.5" type="any" persistant="0"></variable>
            <variable tag="cursor2Alpha" groups="handTarget" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="durCursorMove" groups="handTarget" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="dtHandTargetHandFix" groups="handTarget" scope="global" logging="when_changed" default_value="300" type="any" persistant="0"></variable>
            <variable tag="dtSetHandTarget" groups="handTarget" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="dtReadyHandTarget" groups="handTarget" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
        </folder>
        <folder tag="Reward">
            <variable tag="rewardOut" groups="Reward" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="rewardDur" groups="Reward" scope="global" logging="when_changed" default_value="70" type="any" persistant="0"></variable>
            <variable tag="bonusRewDur" groups="Reward" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="totalRewDur" groups="Reward" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="dbonus" groups="Reward" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="consecutiveCorrect" groups="Reward" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="consecutiveIncorrect" groups="Reward" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="win_fraction" groups="Reward" scope="global" logging="when_changed" default_value="0.15" type="any" persistant="1"></variable>
            <variable tag="dwin" scope="global" groups="Reward" logging="when_changed" default_value="0" type="any" persistant="1"></variable>
        </folder>
        <folder tag="RSGtiming">
            <variable tag="tStart" groups="RSGtiming" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="fix_time_dur" groups="RSGtiming" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="fix_dur_min" groups="RSGtiming" scope="global" logging="when_changed" default_value="500" type="any" persistant="1"></variable>
            <variable tag="fix_dur_mean" groups="RSGtiming" scope="global" logging="when_changed" default_value="250" type="any" persistant="1"></variable>
            <variable tag="targetTimeDur" groups="RSGtiming" scope="global" logging="when_changed" default_value="1000" type="any" persistant="0"></variable>
            <variable tag="target_dur_min" groups="RSGtiming" scope="global" logging="when_changed" default_value="250" type="any" persistant="1"></variable>
            <variable tag="target_dur_mean" groups="RSGtiming" scope="global" logging="when_changed" default_value="250" type="any" persistant="1"></variable>
            <variable tag="saccade_wait_dur" groups="RSGtiming" scope="global" logging="when_changed" default_value="1000" type="any" persistant="0"></variable>
            <variable tag="saccadeTimeDur" groups="RSGtiming" scope="global" logging="when_changed" default_value="200" type="any" persistant="0"></variable>
            <variable tag="handTimeDur" groups="RSGtiming" scope="global" logging="when_changed" default_value="200" type="any" persistant="0"></variable>
            <variable tag="dtProdRew" groups="RSGtiming" scope="global" logging="when_changed" default_value="0" type="any"></variable>
            <variable tag="FeedbackTimeDur" groups="RSGtiming" scope="global" logging="when_changed" default_value="500" type="any" persistant="1"></variable>
            <variable tag="iti" groups="RSGtiming" scope="global" logging="when_changed" default_value="500" type="any" persistant="1"></variable>
            <variable tag="itiShort" groups="RSGtiming" scope="global" logging="when_changed" default_value="1220" type="any" persistant="1"></variable>
            <variable tag="itiLong" groups="RSGtiming" scope="global" logging="when_changed" default_value="500" type="any" persistant="1"></variable>
            <variable tag="timeout" groups="RSGtiming" scope="global" logging="when_changed" default_value="1000" type="any" persistant="1"></variable>
        </folder>
        <folder tag="trialBlock">
            <variable tag="localTrials" groups="trialBlock" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="localCompleteTrials" groups="trialBlock" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="MovingBall_trials" groups="trialBlock" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="N_complete" groups="trialBlock" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="MovingBall_correct" groups="trialBlock" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="MovingBall_correctLeft" groups="trialBlock" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="MovingBall_correctRight" groups="trialBlock" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="N_correctShortHandLeft" groups="trialBlock" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="N_correctShortHandRight" groups="trialBlock" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="N_correctShortEyeLeft" groups="trialBlock" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="N_correctShortEyeRight" groups="trialBlock" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="N_correctLongHandLeft" groups="trialBlock" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="N_correctLongHandRight" groups="trialBlock" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="N_correctLongEyeLeft" groups="trialBlock" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="N_correctLongEyeRight" groups="trialBlock" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="minTrialNumBlock" groups="trialBlock" scope="global" logging="when_changed" default_value="10" type="any" persistant="0"></variable>
            <variable tag="meanTrialNumBlock" groups="trialBlock" scope="global" logging="when_changed" default_value="3" type="any" persistant="0"></variable>
            <variable tag="maxTrialNumBlock" groups="trialBlock" scope="global" logging="when_changed" default_value="25" type="any" persistant="0"></variable>
            <variable tag="trialNumBlockLong" groups="trialBlock" scope="global" logging="when_changed" default_value="10" type="any" persistant="0"></variable>
            <variable tag="trialNumBlockShort" groups="trialBlock" scope="global" logging="when_changed" default_value="10" type="any" persistant="0"></variable>
            <variable tag="trialNum" groups="trialBlock" scope="global" logging="when_changed" default_value="5000" type="any" persistant="0"></variable>
        </folder>
        <folder tag="noSet">
            <variable tag="pNoSet" scope="global" logging="when_changed" default_value="0.05" type="any"></variable>
            <variable tag="idNoSet" scope="global" logging="when_changed" default_value="0" type="any"></variable>
            <variable tag="nNoSet" scope="global" logging="when_changed" default_value="0" type="any"></variable>
            <variable tag="nCorrectNoSet" scope="global" logging="when_changed" default_value="0" type="any"></variable>
            <variable tag="waitDur" scope="global" logging="when_changed" default_value="400" type="any"></variable>
        </folder>
        <folder tag="RSG">
            <variable tag="interval" groups="RSG" scope="global" logging="when_changed" default_value="800" type="any" persistant="0"></variable>
            <variable tag="productionInterval" groups="RSG" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="idShortLong" groups="RSG" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="idHandEye" groups="RSG" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="randTmp" groups="RSG" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="interval_min" groups="RSG" scope="global" logging="when_changed" default_value="500" type="any" persistant="1"></variable>
            <variable tag="interval_minShort" groups="RSG" scope="global" logging="when_changed" default_value="480" type="any" persistant="1"></variable>
            <variable tag="interval_minLong" groups="RSG" scope="global" logging="when_changed" default_value="800" type="any" persistant="1"></variable>
            <variable tag="interval_max" groups="RSG" scope="global" logging="when_changed" default_value="1200" type="any" persistant="1"></variable>
            <variable tag="interval_maxShort" groups="RSG" scope="global" logging="when_changed" default_value="800" type="any" persistant="1"></variable>
            <variable tag="interval_maxLong" groups="RSG" scope="global" logging="when_changed" default_value="1200" type="any" persistant="1"></variable>
            <variable tag="interval_N" groups="RSG" scope="global" logging="when_changed" default_value="5" type="any" persistant="1"></variable>
            <variable tag="radius" groups="RSG" scope="global" logging="when_changed" default_value="0" type="any" persistant="1"></variable>
            <variable tag="ballFeedback_red" groups="RSG" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="ballFeedback_green" groups="RSG" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="ballFeedback_blue" groups="RSG" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="Interval1_ending" groups="RSG" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="Interval2_ending" groups="RSG" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="ready_ended" groups="RSG" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="set_ended" groups="RSG" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="occluder_ended" groups="RSG" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="set2_ended" groups="RSG" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="acquisitionTime" groups="RSG" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="ready_cue_onset_time_us" groups="RSG" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="set1_cue_onset_time_us" groups="RSG" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="set2_cue_onset_time_us" groups="RSG" scope="global" logging="when_changed" default_value="1e1000" type="any" persistant="0"></variable>
            <variable tag="intervalFrames" groups="RSG" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="cue_duration_frames" groups="RSG" scope="global" logging="when_changed" default_value="6" type="any" persistant="1"></variable>
            <variable tag="cue_size_deg" groups="RSG" scope="global" logging="when_changed" default_value="2.2" type="any" persistant="1"></variable>
            <variable tag="afterReady" groups="RSG" scope="global" logging="when_changed" default_value="0" type="boolean" persistant="0"></variable>
            <variable tag="afterSet1" groups="RSG" scope="global" logging="when_changed" default_value="0" type="boolean" persistant="0"></variable>
            <variable tag="afterSet2" groups="RSG" scope="global" logging="when_changed" default_value="0" type="boolean" persistant="0"></variable>
            <variable tag="set2Off" groups="RSG" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
        </folder>
        <folder tag="OverlapSaccade">
            <variable tag="idHandEyeOverlap" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="OverlapSaccade_correct" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="OverlapSaccade_correctLeft" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="OverlapSaccade_correctLeftHand" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="OverlapSaccade_correctLeftEye" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="OverlapSaccade_correctRight" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="OverlapSaccade_correctRightHand" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="OverlapSaccade_correctRightEye" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="OverlapSaccade_NoEyeFixDuringFix" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="OverlapSaccade_NoHandFixDuringFix" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="OverlapSaccade_NoEyeFixDuringOverlap" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="OverlapSaccade_NoHandFixDuringOverlap" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="OverlapSaccade_Hand2OtherTarget" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="OverlapSaccade_NoEyeFixDuringRT" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="OverlapSaccade_NoHandFixDuringRT" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="OverlapSaccade_LateRT" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="OverlapSaccade_NoFix" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="OverlapSaccade_trials" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="trialNum_OverlapSaccade" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="5000" type="any" persistant="0"></variable>
            <variable tag="RTfromTargetOn" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="minEyeRT" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="100" type="any" persistant="0"></variable>
            <variable tag="minHandRT" groups="OverlapSaccade" scope="global" logging="when_changed" default_value="100" type="any" persistant="0"></variable>
        </folder>
        <folder tag="Global">
            <variable tag="pstop" groups="Global" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="startTrial" groups="Global" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="endTrial" groups="Global" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
        </folder>
        <folder tag="sync">
            <variable tag="syncX" groups="Matlab" scope="global" logging="when_changed" default_value="-21" type="any" persistant="0"></variable>
            <variable tag="syncY" groups="Matlab" scope="global" logging="when_changed" default_value="12" type="any" persistant="0"></variable>
            <variable tag="syncSize" groups="Matlab" scope="global" logging="when_changed" default_value="3" type="any" persistant="0"></variable>
            <variable tag="stateAnalogOut" groups="STATE" scope="global" logging="when_changed" default_value="0" type="float" persistant="0"></variable>
            <variable tag="trialSync" groups="Reward" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
        </folder>
        <folder tag="Fixation+Pursuit">
            <variable tag="pursuitTheta" groups="Fixation" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="on_fix_dyn" groups="Fixation" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="fixHz" groups="Fixation" scope="global" logging="when_changed" default_value="0.25" type="any" persistant="0"></variable>
            <variable tag="fixDynMag" groups="Fixation" scope="global" logging="when_changed" default_value="5" type="any" persistant="0"></variable>
            <variable tag="fix_pur_trials" groups="Fixation" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="fix_pur_correct" groups="Fixation" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="fix_pur_HoldDur" groups="Fixation" scope="global" logging="when_changed" default_value="3000" type="any" persistant="1"></variable>
            <variable tag="fix_pur_ITI_Dur" groups="Fixation" scope="global" logging="when_changed" default_value="750" type="any" persistant="1"></variable>
            <variable tag="fix_pur_timeoutDur" groups="Fixation" scope="global" logging="when_changed" default_value="1500" type="any" persistant="1"></variable>
        </folder>
        <folder tag="Fixation+Distractor">
            <variable tag="idDistOverlap" groups="Distractor" scope="global" logging="when_changed" default_value="0" type="any"></variable>
            <variable tag="trialDuration" groups="Distractor" scope="global" logging="when_changed" default_value="2500" type="any" persistant="0"></variable>
            <variable tag="timeRemaining" groups="Distractor" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="fix_dis_trials" groups="Distractor" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="fix_dis_correct" groups="Distractor" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="distractorOnset_min" groups="Distractor" scope="global" logging="when_changed" default_value="500" type="any" persistant="1"></variable>
            <variable tag="distractorOnset_mu" groups="Distractor" scope="global" logging="when_changed" default_value="500" type="any" persistant="1"></variable>
            <variable tag="distractorOnset_time" groups="Distractor" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="distractorTime_min" groups="Distractor" scope="global" logging="when_changed" default_value="500" type="any" persistant="1"></variable>
            <variable tag="distractorTime_mu" groups="Distractor" scope="global" logging="when_changed" default_value="500" type="any" persistant="1"></variable>
            <variable tag="distractorTime" groups="Distractor" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="distractorSize" groups="Distractor" scope="global" logging="when_changed" default_value="0.5" type="any" persistant="0"></variable>
            <variable tag="distractor_alpha" groups="Distractor" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="distractor_x" groups="Distractor" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="distractor_y" groups="Distractor" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="distractorOn" groups="Distractor" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="DistractorSimultaneous" groups="Distractor" scope="global" logging="when_changed" default_value="0" type="boolean" persistant="0"></variable>
            <variable tag="fix_dis_ITI_Dur" groups="Distractor" scope="global" logging="when_changed" default_value="750" type="any" persistant="1"></variable>
        </folder>
        <folder tag="MemorySaccade">
            <variable tag="MemorySaccade_correct" groups="Memory" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="MemorySaccade_trials" groups="Memory" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="memoryTimeDur" groups="Memory" scope="global" logging="when_changed" default_value="1000" type="any" persistant="0"></variable>
            <variable tag="memory_dur_min" groups="Memory" scope="global" logging="when_changed" default_value="100" type="any" persistant="1"></variable>
            <variable tag="memory_dur_mean" groups="Memory" scope="global" logging="when_changed" default_value="0" type="any" persistant="1"></variable>
        </folder>
        <folder tag="RSGlegacy">
            <variable tag="ballAlpha" groups="RSGlegacy" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="maxBallAlpha" groups="RSGlegacy" scope="global" logging="when_changed" default_value="0.07" type="any" persistant="0"></variable>
            <variable tag="ballAlphaProd" groups="RSGlegacy" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="maxBallAlphaProd" groups="RSGlegacy" scope="global" logging="when_changed" default_value="0.07" type="any" persistant="0"></variable>
            <variable tag="dAlpha" scope="global" groups="RSGlegacy" logging="when_changed" default_value="0" type="any" persistant="1"></variable>
            <variable tag="dballAlphaProd" scope="global" groups="RSGlegacy" logging="when_changed" default_value="0" type="any" persistant="1"></variable>
            <variable tag="dballAlphaIncorrect" scope="global" groups="RSGlegacy" logging="when_changed" default_value="0" type="any" persistant="1"></variable>
            <variable tag="stimEnding" groups="RSGlegacy" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="Nsets" groups="RSGlegacy" scope="global" logging="when_changed" default_value="1" type="any" persistant="1"></variable>
            <variable tag="ball_sz" groups="RSGlegacy" scope="global" logging="when_changed" default_value="0.25" type="any" persistant="1"></variable>
            <variable tag="radiusBall" groups="RSGlegacy" scope="global" logging="when_changed" default_value="10" type="any" persistant="1"></variable>
            <variable tag="radiusStep" groups="RSGlegacy" scope="global" logging="when_changed" default_value="0" type="any" persistant="1"></variable>
            <variable tag="numRadiusStepBoost" groups="RSGlegacy" scope="global" logging="when_changed" default_value="10" type="any"></variable>
            <variable tag="flashRate" groups="RSGlegacy" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="flashAlpha" groups="RSGlegacy" scope="global" logging="when_changed" default_value="1" type="any" persistant="1"></variable>
            <variable tag="setFlashAlpha" groups="RSGlegacy" scope="global" logging="when_changed" default_value="1" type="any" persistant="1"></variable>
            <variable tag="thSetFlashAlpha" groups="RSGlegacy" scope="global" logging="when_changed" default_value="1" type="any" persistant="1"></variable>
            <variable tag="idFlashAlpha" groups="RSGlegacy" scope="global" logging="when_changed" default_value="0" type="any" persistant="1"></variable>
            <variable tag="dflashRate" groups="RSGlegacy" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="ballRed" groups="RSGlegacy" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="ballGreen" groups="RSGlegacy" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="ballBlue" groups="RSGlegacy" scope="global" logging="when_changed" default_value="1" type="any" persistant="0"></variable>
            <variable tag="prodBallOn" groups="RSGlegacy" scope="global" logging="when_changed" default_value="1" type="any" persistant="1"></variable>
            <variable tag="Interval2BallOn" groups="RSGlegacy" scope="global" logging="when_changed" default_value="1" type="any" persistant="1"></variable>
            <variable tag="Interval1BallOn" groups="RSGlegacy" scope="global" logging="when_changed" default_value="1" type="any" persistant="1"></variable>
            <variable tag="fixOffMovingBall" groups="RSGlegacy" scope="global" logging="when_changed" default_value="0" type="boolean" persistant="1"></variable>
            <variable tag="relativeFixOffTime" groups="RSGlegacy" scope="global" logging="when_changed" default_value="0" type="any" persistant="1"></variable>
            <variable tag="idRandSet" groups="RSGlegacy" scope="global" logging="when_changed" default_value="0" type="any"></variable>
        </folder>
        <folder tag="Matlab">
            <variable tag="sync" groups="Matlab" scope="global" logging="when_changed" default_value="0" type="any" persistant="0"></variable>
            <variable tag="Nback" groups="Matlab" scope="global" logging="when_changed" default_value="0" type="any" persistant="1"></variable>
        </folder>
    </variables>
    <sounds tag="Sounds"></sounds>
    <stimuli tag="Stimuli">
        <folder tag="Gobal">
            <stimulus type="blank_screen" tag="New Blank Screen" color="0, 0, 0"></stimulus>
            <stimulus type="circular_fixation_point" tag="Fix" color="fix_red,fix_green,fix_blue" trigger_width="fix_win" trigger_watch_x="eye_x" trigger_watch_y="eye_y" trigger_flag="fixOn" x_size="fix_sz" y_size="fix_sz" x_position="fixX" y_position="fixY" rotation="0" alpha_multiplier="1*(!((fixOffMovingBall)*((now()-set2_cue_onset_time_us)/1000 >= interval - relativeFixOffTime)*set2Off))"></stimulus>
            <stimulus type="circular_fixation_point" tag="Fix2" color="0,0,0" trigger_width="fix_win" trigger_watch_x="eye_x" trigger_watch_y="eye_y" trigger_flag="fixOn" x_size="(fix_sz+handFixSz)*2" y_size="(fix_sz+handFixSz)*2" x_position="(fixX+handFixX)/2" y_position="(fixY+handFixY)/2" rotation="0" alpha_multiplier="1*(!((fixOffMovingBall)*((now()-set2_cue_onset_time_us)/1000 >= interval - relativeFixOffTime)*set2Off))"></stimulus>
            <stimulus type="fixation_point" tag="handFix" color="handFixR,handFixG,handFixB" trigger_width="handFixWin" trigger_watch_x="mouseX" trigger_watch_y="mouseY" trigger_flag="handFixOn" x_size="handFixSz" y_size="handFixSz" x_position="handFixX" y_position="handFixY" rotation="0" alpha_multiplier="handFixAlpha"></stimulus>
            <stimulus type="rectangle" tag="handFix2" color="0,0,0" x_size="handFixSz*pHandFix2" y_size="handFixSz*pHandFix2" x_position="handFixX" y_position="handFixY" rotation="0" alpha_multiplier="1"></stimulus>
            <stimulus type="circular_fixation_point" tag="target" color="targ_red,targ_green,targ_blue" trigger_width="fix_win" trigger_watch_x="eye_x" trigger_watch_y="eye_y" trigger_flag="on_targ" x_size="targ_sz" y_size="targ_sz" x_position="target_x" y_position="target_y" rotation="0" alpha_multiplier="target_alpha"></stimulus>
            <stimulus type="circular_fixation_point" tag="handTarget" color="targ_red,targ_green,targ_blue" trigger_width="handTargetWin" trigger_watch_x="mouseX" trigger_watch_y="mouseY" trigger_flag="handTargetOn" x_size="handTarg_sz" y_size="handTarg_sz" x_position="target_x" y_position="target_y" rotation="0" alpha_multiplier="target_alpha"></stimulus>
            <stimulus type="frame_list" tag="cursor" stimulus_group="cursorFrames" ending="" ended="" loop="YES" repeats="0" autoplay="YES"></stimulus>
            <stimulus_group tag="cursorFrames">
                <stimulus type="rectangle" tag="cursorDynamic" color="1,1,1" x_size="ball_sz" y_size="ball_sz" x_position="(ai0-centerV)/(rightV-centerV)*amp*gainV" y_position="handFixY" rotation="1" alpha_multiplier="cursorAlpha"></stimulus>
            </stimulus_group>
            <stimulus type="frame_list" tag="cursor 2" stimulus_group="cursorFrames 2" ending="" ended="" loop="YES" repeats="0" autoplay="YES"></stimulus>
            <stimulus_group tag="cursorFrames 2">
                <stimulus type="rectangle" tag="cursorDynamic 2" color="1,1,1" x_size="ball_sz" y_size="ball_sz" x_position="cursor2x0+(target_x-cursor2x0)/(1e3*durCursorMove)*(nextFrameTime() - acquisitionTime)" y_position="handFixY" rotation="1" alpha_multiplier="cursor2Alpha"></stimulus>
            </stimulus_group>
            <stimulus type="frame_list" tag="syncFlash" stimulus_group="syncFlashFrames" ending="" ended="" loop="NO" repeats="0" autoplay="YES"></stimulus>
            <stimulus_group tag="syncFlashFrames">
                <range_replicator tag="Repeat 2 times" from="1" to="2" step="1" variable="rr_index">
                    <stimulus type="circle" tag="syncFlashFrames_frame_${rr_index}" color="1,1,1" x_size="syncSize" y_size="syncSize" x_position="syncX" y_position="syncY" rotation="0" alpha_multiplier="1"></stimulus>
                </range_replicator>
            </stimulus_group>
        </folder>
        <folder tag="Fixation+Pursuit">
            <stimulus type="frame_list" tag="dynamicFix" stimulus_group="dynamicFixFrames" ending="" ended="" loop="YES" repeats="0" autoplay="YES"></stimulus>
            <stimulus_group tag="dynamicFixFrames">
                <stimulus type="circular_fixation_point" tag="fixCircleDyn" color="fix_red,fix_green,fix_blue" trigger_width="fix_win" trigger_watch_x="eye_x" trigger_watch_y="eye_y" trigger_flag="on_fix_dyn" x_size="fix_sz" y_size="fix_sz" x_position="fixX+cos(pursuitTheta*pi()/180)*fixDynMag*sin(2*pi()*fixHz*(nextFrameTime() - tStart)/1e6)" y_position="fixY+sin(pursuitTheta*pi()/180)*fixDynMag*sin(2*pi()*fixHz*(nextFrameTime() - tStart)/1e6)" rotation="0" alpha_multiplier="1"></stimulus>
            </stimulus_group>
        </folder>
        <folder tag="Fixation+Distractor">
            <stimulus type="circle" tag="Distractor" color="1,1,1" x_size="distractorSize" y_size="distractorSize" x_position="distractor_x" y_position="distractor_y" rotation="0" alpha_multiplier="distractor_alpha"></stimulus>
        </folder>
        <folder tag="MovingBall">
            <stimulus type="circle" tag="ballFeedback" color="ballFeedback_red,ballFeedback_green,ballFeedback_blue" x_size="ball_sz" y_size="ball_sz" x_position="amp*cos((pi()/180)*(StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)))" y_position="amp*sin((pi()/180)*(StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)))" rotation="1" alpha_multiplier="1"></stimulus>
            <stimulus type="frame_list" tag="ready_cue" stimulus_group="ready_frames" ending="" ended="ready_ended" loop="NO" repeats="cue_duration_frames" autoplay="YES"></stimulus>
            <stimulus_group tag="ready_frames">
                <stimulus type="circle" tag="ready_frame" color="1,1,1" x_size="cue_size_deg" y_size="cue_size_deg" x_position="radius*cos(pi()/180*(StartTheta))" y_position="radius*sin(pi()/180*(StartTheta))+(fixY+handFixY)/2" rotation="0" alpha_multiplier="flashAlpha"></stimulus>
            </stimulus_group>
            <stimulus type="frame_list" tag="occluder_cue" stimulus_group="occluder_frames" ending="" ended="occluder_ended" loop="NO" repeats="cue_duration_frames" autoplay="YES"></stimulus>
            <stimulus_group tag="occluder_frames">
                <stimulus type="circle" tag="occluder_frame" color="0,0,0" x_size="cue_size_deg*4/5" y_size="cue_size_deg*4/5" x_position="radius*cos(pi()/180*(StartTheta))" y_position="radius*sin(pi()/180*(StartTheta))+fixY" rotation="0" alpha_multiplier="flashAlpha"></stimulus>
            </stimulus_group>
            <stimulus type="frame_list" tag="set_cue" stimulus_group="set_frames" ending="" ended="set_ended" loop="NO" repeats="cue_duration_frames" autoplay="YES"></stimulus>
            <stimulus_group tag="set_frames">
                <stimulus type="circle" tag="set_frame" color="1,1,1" x_size="cue_size_deg" y_size="cue_size_deg" x_position="radius*cos(pi()/180*(StartTheta+ballArcLength/3))" y_position="radius*sin(pi()/180*(StartTheta+ballArcLength/3))+fixY" rotation="0" alpha_multiplier="flashAlpha"></stimulus>
            </stimulus_group>
            <stimulus type="frame_list" tag="set2_cue" stimulus_group="set2_frames" ending="" ended="set2_ended" loop="NO" repeats="cue_duration_frames" autoplay="YES"></stimulus>
            <stimulus_group tag="set2_frames">
                <stimulus type="circle" tag="set2_frame" color="1,1,1" x_size="cue_size_deg" y_size="cue_size_deg" x_position="radius*cos(pi()/180*(StartTheta+ballArcLength*Nsets/(Nsets+1)))" y_position="radius*sin(pi()/180*(StartTheta+ballArcLength*Nsets/(Nsets+1)))+(fixY+handFixY)/2" rotation="0" alpha_multiplier="setFlashAlpha"></stimulus>
            </stimulus_group>
            <stimulus type="frame_list" tag="Interval1" stimulus_group="Interval1_frames" ending="Interval1_ending" ended="" loop="NO" repeats="intervalFrames" autoplay="YES"></stimulus>
            <stimulus_group tag="Interval1_frames">
                <stimulus type="circle" tag="Interval1Stim" color="0,0,0" x_size="0" y_size="0" x_position="100" y_position="100" rotation="0" alpha_multiplier="0"></stimulus>
            </stimulus_group>
            <stimulus type="frame_list" tag="Interval2" stimulus_group="Interval2_frames" ending="Interval2_ending" ended="" loop="NO" repeats="intervalFrames" autoplay="YES"></stimulus>
            <stimulus_group tag="Interval2_frames">
                <stimulus type="circle" tag="Interval2Stim" color="0,0,0" x_size="0" y_size="0" x_position="100" y_position="100" rotation="0" alpha_multiplier="1"></stimulus>
            </stimulus_group>
            <stimulus type="frame_list" tag="ball" stimulus_group="ballFrames" ended="" ending="stimEnding" repeats="(Nsets+1)*intervalFrames" loop="NO" autoplay="YES"></stimulus>
            <stimulus_group tag="ballFrames">
                <stimulus type="circle" tag="ballDynamic" color="ballRed,ballGreen,ballBlue" x_size="ball_sz" y_size="ball_sz" x_position="radiusBall*cos((pi()/180)*(StartTheta+ballArcLength*(nextFrameTime() - tStart)/(1e3*(Nsets+1)*interval)))" y_position="radiusBall*sin((pi()/180)*(StartTheta+ballArcLength*(nextFrameTime() - tStart)/(1e3*(Nsets+1)*interval)))+fixY" rotation="1" alpha_multiplier="(ballAlpha*(!(Nsets == 1))*(rand(0,1) &lt;= flashRate)*(!(!prodBallOn*Interval2_ending))*(!(!Interval2BallOn*Interval1_ending*!Interval2_ending))*(!(!Interval1BallOn*!Interval1_ending)) + ballAlpha*(!(Nsets == 2))*(rand(0,1) &lt;= flashRate)*(!(!prodBallOn*Interval1_ending))*(!(!Interval1BallOn*!Interval1_ending)))*(!Interval1_ending) +(Interval1_ending*ballAlphaProd)"></stimulus>
            </stimulus_group>
        </folder>
    </stimuli>
    <filters tag="Filters"></filters>
    <optimizers tag="Optimizers"></optimizers>
    <experiment tag="New Experiment" full_name="" description="">
        <protocol tag="Fixation+Pursuit_H" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start NIDaq Device" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
            <action tag="Queue Stimulus 2" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 3" type="update_stimulus_display"></action>
            <task_system tag="Trials" interruptible="YES">
                <task_system_state tag="Initial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                    <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Go to Exit" type="direct" target="Trial Start"></transition>
                </task_system_state>
                <task_system_state tag="Fix On" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
                    <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
                    <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                    <action tag="Live Queue dynamicFix" type="live_queue_stimulus" stimulus="dynamicFix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If on_fix_dyn, Transition to Trial Start" condition="on_fix_dyn" target="Trial Start"></transition>
                    <transition type="timer_expired" tag="If fixWait Expired, Transition to Failure to fixate" target="Failure to fixate" timer="fixWait"></transition>
                </task_system_state>
                <task_system_state tag="Trial Start" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report fixation acquired" message="Fixation acquired."></action>
                    <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                    <action type="assignment" tag="Assign pursuitTheta" variable="pursuitTheta" value="0"></action>
                    <action type="start_timer" tag="Start HoldFix" timer="HoldFix" timebase="" duration="fix_pur_HoldDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !on_fix_dyn, Transition to Bad" condition="!on_fix_dyn" target="Bad"></transition>
                    <transition type="timer_expired" tag="If HoldFix Expired, Transition to Reward" target="Reward" timer="HoldFix"></transition>
                </task_system_state>
                <task_system_state tag="Reward" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report success" message="Success!"></action>
                    <action type="assignment" tag="Assign fix_red" variable="fix_red" value="0"></action>
                    <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="0"></action>
                    <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                    <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (consecutiveCorrect-1)*dbonus)"></action>
                    <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="(rewardDur+bonusRewDur)*1000"></action>
                    <action type="assignment" tag="Increment fix_pur_correct" variable="fix_pur_correct" value="fix_pur_correct+1"></action>
                    <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="rewardDur+bonusRewDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                </task_system_state>
                <task_system_state tag="End Trial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report Ending Trial" message="Ending Trial."></action>
                    <action tag="Dequeue dynamicFix" type="dequeue_stimulus" stimulus="dynamicFix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment fix_pur_trials" variable="fix_pur_trials" value="fix_pur_trials+1"></action>
                    <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                    <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If localTrials >= trialNum, Transition to Exit Fixation Pursuit System" condition="localTrials >= trialNum" target="Exit Fixation Pursuit System"></transition>
                    <transition type="conditional" tag="If pstop, Transition to Exit Fixation Pursuit System" condition="pstop" target="Exit Fixation Pursuit System"></transition>
                    <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                </task_system_state>
                <task_system_state tag="ITI" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report ITI" message="ITI."></action>
                    <action type="start_timer" tag="Start fix_pur_ITI" timer="fix_pur_ITI" timebase="" duration="fix_pur_ITI_Dur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If fix_pur_ITI Expired, Transition to Fix On" target="Fix On" timer="fix_pur_ITI"></transition>
                </task_system_state>
                <task_system_state tag="Bad" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report failure" message="Trial Failed."></action>
                    <action tag="Dequeue dynamicFix" type="dequeue_stimulus" stimulus="dynamicFix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                    <action type="start_timer" tag="Start fix_pur_timeout" timer="fix_pur_timeout" timebase="" duration="fix_pur_timeoutDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If fix_pur_timeout Expired, Transition to End Trial" target="End Trial" timer="fix_pur_timeout"></transition>
                </task_system_state>
                <task_system_state tag="Failure to fixate" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report Failure to fixate" message="Failure to fixate."></action>
                    <action tag="Dequeue dynamicFix" type="dequeue_stimulus" stimulus="dynamicFix"></action>
                    <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                </task_system_state>
                <task_system_state tag="Exit Fixation Pursuit System" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Return to parent task system" type="yield"></transition>
                </task_system_state>
            </task_system>
        </protocol>
        <protocol tag="Fixation+Pursuit_V" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start NIDaq Device" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
            <action tag="Queue Stimulus 2" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 3" type="update_stimulus_display"></action>
            <task_system tag="Trials" interruptible="YES">
                <task_system_state tag="Initial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                    <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Go to Exit" type="direct" target="Trial Start"></transition>
                </task_system_state>
                <task_system_state tag="Fix On" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
                    <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
                    <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                    <action tag="Live Queue dynamicFix" type="live_queue_stimulus" stimulus="dynamicFix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If on_fix_dyn, Transition to Trial Start" condition="on_fix_dyn" target="Trial Start"></transition>
                    <transition type="timer_expired" tag="If fixWait Expired, Transition to Failure to fixate" target="Failure to fixate" timer="fixWait"></transition>
                </task_system_state>
                <task_system_state tag="Trial Start" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report fixation acquired" message="Fixation acquired."></action>
                    <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                    <action type="assignment" tag="Assign pursuitTheta" variable="pursuitTheta" value="90"></action>
                    <action type="start_timer" tag="Start HoldFix" timer="HoldFix" timebase="" duration="fix_pur_HoldDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !on_fix_dyn, Transition to Bad" condition="!on_fix_dyn" target="Bad"></transition>
                    <transition type="timer_expired" tag="If HoldFix Expired, Transition to Reward" target="Reward" timer="HoldFix"></transition>
                </task_system_state>
                <task_system_state tag="Reward" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report success" message="Success!"></action>
                    <action type="assignment" tag="Assign fix_red" variable="fix_red" value="0"></action>
                    <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="0"></action>
                    <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                    <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (consecutiveCorrect-1)*dbonus)"></action>
                    <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="(rewardDur+bonusRewDur)*1000"></action>
                    <action type="assignment" tag="Increment fix_pur_correct" variable="fix_pur_correct" value="fix_pur_correct+1"></action>
                    <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="rewardDur+bonusRewDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                </task_system_state>
                <task_system_state tag="End Trial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report Ending Trial" message="Ending Trial."></action>
                    <action tag="Dequeue dynamicFix" type="dequeue_stimulus" stimulus="dynamicFix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment fix_pur_trials" variable="fix_pur_trials" value="fix_pur_trials+1"></action>
                    <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                    <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If localTrials >= trialNum, Transition to Exit Fixation Pursuit System" condition="localTrials >= trialNum" target="Exit Fixation Pursuit System"></transition>
                    <transition type="conditional" tag="If pstop, Transition to Exit Fixation Pursuit System" condition="pstop" target="Exit Fixation Pursuit System"></transition>
                    <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                </task_system_state>
                <task_system_state tag="ITI" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report ITI" message="ITI."></action>
                    <action type="start_timer" tag="Start fix_pur_ITI" timer="fix_pur_ITI" timebase="" duration="fix_pur_ITI_Dur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If fix_pur_ITI Expired, Transition to Fix On" target="Fix On" timer="fix_pur_ITI"></transition>
                </task_system_state>
                <task_system_state tag="Bad" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report failure" message="Trial Failed."></action>
                    <action tag="Dequeue dynamicFix" type="dequeue_stimulus" stimulus="dynamicFix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                    <action type="start_timer" tag="Start fix_pur_timeout" timer="fix_pur_timeout" timebase="" duration="fix_pur_timeoutDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If fix_pur_timeout Expired, Transition to End Trial" target="End Trial" timer="fix_pur_timeout"></transition>
                </task_system_state>
                <task_system_state tag="Failure to fixate" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report Failure to fixate" message="Failure to fixate."></action>
                    <action tag="Dequeue dynamicFix" type="dequeue_stimulus" stimulus="dynamicFix"></action>
                    <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                </task_system_state>
                <task_system_state tag="Exit Fixation Pursuit System" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Return to parent task system" type="yield"></transition>
                </task_system_state>
            </task_system>
        </protocol>
        <protocol tag="OverlapSaccadeHand" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start NIDaq Device" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="-1"></action>
            <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
            <action tag="Queue Stimulus 3" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 4" type="update_stimulus_display"></action>
            <task_system tag="Trials" interruptible="YES">
                <task_system_state tag="Initial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut" variable="stateAnalogOut" value="5*0/50"></action>
                    <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                    <action type="assignment" tag="Assign ao0" variable="ao0" value="10"></action>
                    <action type="assignment" tag="Assign centerV" variable="centerV" value="(leftV+rightV)/2"></action>
                    <action tag="Live Queue Stimulus" type="live_queue_stimulus" stimulus="cursor"></action>
                    <action tag="Update Stimulus Display 7" type="update_stimulus_display"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                </task_system_state>
                <task_system_state tag="Fix On" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut 2" variable="stateAnalogOut" value="5*1/50*5"></action>
                    <action type="assignment" tag="Assign sync 2" variable="sync" value="1"></action>
                    <action type="assignment" tag="Set idHandEyeOverlap:disc_rand(0,1)" variable="idHandEyeOverlap" value="disc_rand(0,1)"></action>
                    <action type="assignment" tag="Assign cursorAlpha 3" variable="cursorAlpha" value="1"></action>
                    <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                    <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                    <action type="assignment" tag="Assign leverFixWin" variable="leverFixWin" value="leverFixWinInit"></action>
                    <action type="assignment" tag="Assign leverTarWin" variable="leverTarWin" value="leverTarWinInit"></action>
                    <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                    <action tag="Live Queue Fix 12" type="live_queue_stimulus" stimulus="handFix"></action>
                    <action type="assignment" tag="Assign handFixY: fixY-(fix_sz+handFixSz)*3" variable="handFixY" value="handFixY"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign tStart 2" variable="tStart" value="now()"></action>
                    <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                    <action type="report" tag="Report fix on" message="Fixation on."></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Fix Time" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWin/2" target="Fix Time"></transition>
                    <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                </task_system_state>
                <task_system_state tag="Fix Time" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut 3" variable="stateAnalogOut" value="5*2/50*5"></action>
                    <action type="pulse" tag="Pulse trialSync 3" variable="trialSync" duration="10*1000"></action>
                    <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                    <action type="assignment" tag="Assign cursorAlpha 2" variable="cursorAlpha" value="cursorAlpha2"></action>
                    <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                    <action type="assignment" tag="Store ready cue onset time 2" variable="ready_cue_onset_time_us" value="now()"></action>
                    <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                    <action tag="Queue syncFlash 1111117" type="queue_stimulus" stimulus="syncFlash"></action>
                    <action tag="Update Stimulus Display 1111" type="update_stimulus_display"></action>
                    <action type="report" tag="Report fixating" message="Fixating."></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !handFixOn, Transition to NoHandFixDuringFix 2" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="NoHandFixDuringFix"></transition>
                    <transition type="conditional" tag="If !!fixOn, Transition to NoEyeFixDuringFix 2" condition="!fixOn" target="NoEyeFixDuringFix"></transition>
                    <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                </task_system_state>
                <task_system_state tag="Target On" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut 4" variable="stateAnalogOut" value="20/50*5"></action>
                    <action type="assignment" tag="Set fix_red to 1" variable="fix_red" value="1"></action>
                    <action type="if" tag="If override, use theta_override 2" condition="override">
                        <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                    </action>
                    <action type="assignment" tag="Select theta -(theta-180) (mouseX>0)*181" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                    <action type="assignment" tag="Set handFixR to 2" variable="handFixR" value="1"></action>
                    <action type="assignment" tag="Set target_y 2" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                    <action type="assignment" tag="Set target_x 2" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                    <action type="report" tag="Annonce target direction 2" message="target direction = $theta"></action>
                    <action type="assignment" tag="Set fix_blue to 2" variable="fix_blue" value="1"></action>
                    <action type="assignment" tag="Set handFixB to 1" variable="handFixB" value="1"></action>
                    <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                    <action tag="reset syncFlash 1111114" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                    <action tag="Queue syncFlash 1111118" type="queue_stimulus" stimulus="syncFlash"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Store set cue onset time 2" variable="set1_cue_onset_time_us" value="now()"></action>
                    <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                    <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !handFixOn, Transition to NoHandFixDuringOverlap" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="NoHandFixDuringOverlap"></transition>
                    <transition type="conditional" tag="If !!fixOn, Transition to NoEyeFixDuringOverlap" condition="!fixOn" target="NoEyeFixDuringOverlap"></transition>
                    <transition type="timer_expired" tag="If saccadeTime Expired, Transition to Bad 2" target="Fix Off" timer="saccadeTime"></transition>
                </task_system_state>
                <task_system_state tag="Fix Off" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut 5" variable="stateAnalogOut" value="30/50*5"></action>
                    <action type="if" tag="If idHandEyeOverlap==0, hand" condition="!idHandEyeOverlap">
                        <action tag="Dequeue handFix" type="dequeue_stimulus" stimulus="handFix"></action>
                    </action>
                    <action type="if" tag="If idHandEyeOverlap==1, eye" condition="idHandEyeOverlap">
                        <action tag="Dequeue eyeFix" type="dequeue_stimulus" stimulus="Fix"></action>
                    </action>
                    <action type="assignment" tag="Store set2 cue onset time 2" variable="set2_cue_onset_time_us" value="now()"></action>
                    <action tag="reset syncFlash 1111113" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                    <action tag="Queue syncFlash 1111119" type="queue_stimulus" stimulus="syncFlash"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start saccadeTime 2" timer="saccadeTime" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !idHandEyeOverlap &amp;&amp; on_targ, Transition to reward delay" condition="!idHandEyeOverlap &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-target_x)&lt;leverTarWin/2" target="reward delay"></transition>
                    <transition type="conditional" tag="If !idHandEyeOverlap &amp;&amp; !fixOn, Transition to NoEyeFixDuringRT" condition="!idHandEyeOverlap &amp;&amp; !fixOn" target="NoEyeFixDuringRT"></transition>
                    <transition type="conditional" tag="If !idHandEyeOverlap &amp;&amp; go to the other target, Transition to Hand2OtherTarget" condition="!idHandEyeOverlap &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x))&lt;leverTarWin/2" target="Hand2OtherTarget"></transition>
                    <transition type="conditional" tag="If idHandEyeOverlap &amp;&amp; eye on_targ, Transition to reward delay" condition="idHandEyeOverlap &amp;&amp; on_targ" target="reward delay"></transition>
                    <transition type="conditional" tag="If idHandEyeOverlap &amp;&amp; !handFixOn, Transition to NoHandFixDuringRT" condition="idHandEyeOverlap &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="NoHandFixDuringRT"></transition>
                    <transition type="timer_expired" tag="If saccadeTime Expired, Transition to LateRT" target="LateRT" timer="saccadeTime"></transition>
                </task_system_state>
                <task_system_state tag="reward delay" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut 6" variable="stateAnalogOut" value="35/50*5"></action>
                    <action type="assignment" tag="Assign acquisitionTime 2" variable="acquisitionTime" value="now()"></action>
                    <action type="assignment" tag="Assign productionInterval 2" variable="productionInterval" value="(acquisitionTime-set2_cue_onset_time_us)/1000"></action>
                    <action type="assignment" tag="Assign RTfromTargetOn" variable="RTfromTargetOn" value="(acquisitionTime-set1_cue_onset_time_us)/1000"></action>
                    <action type="start_timer" tag="Start cursorMove" timer="cursorMove" timebase="" duration="dtProdRew" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If cursorMove Expired, Transition to Rewarde" target="Reward" timer="cursorMove"></transition>
                </task_system_state>
                <task_system_state tag="Reward" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut 7" variable="stateAnalogOut" value="40/50*5"></action>
                    <action type="report" tag="Report success" message="Success!"></action>
                    <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                    <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                    <action tag="reset syncFlash 1111115" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                    <action tag="Queue syncFlash 11111110" type="queue_stimulus" stimulus="syncFlash"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="if" tag="If hand &amp;&amp; RT>minHandRT, reward" condition="!idHandEyeOverlap &amp;&amp; productionInterval>minHandRT">
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="dbonus*(saccade_wait_dur-productionInterval)/saccade_wait_dur"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="(rewardDur+bonusRewDur)*1000"></action>
                    </action>
                    <action type="if" tag="If eye &amp;&amp; RT>minEyeRT, reward" condition="idHandEyeOverlap &amp;&amp; productionInterval>minEyeRT">
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="dbonus*(saccade_wait_dur-productionInterval)/saccade_wait_dur"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="(rewardDur+bonusRewDur)*1000"></action>
                    </action>
                    <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                    <action type="if" tag="If 0==1/consecutiveCorrect>0, use new theta 2" condition="0==1">
                        <action type="assignment" tag="Select theta -(theta-180) (mouseX>0)*180" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                    </action>
                    <action type="assignment" tag="Assign cursorX" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                    <action type="assignment" tag="Assign handTargetOn" variable="handTargetOn" value="0"></action>
                    <action type="assignment" tag="Assign totalRewDur 4" variable="totalRewDur" value="(rewardDur+bonusRewDur)"></action>
                    <action type="assignment" tag="increment OverlapSaccade_correctLeftHand" variable="OverlapSaccade_correctLeftHand" value="OverlapSaccade_correctLeftHand +(idHandEyeOverlap==0)*(theta>90)"></action>
                    <action type="assignment" tag="increment OverlapSaccade_correctLeftEye" variable="OverlapSaccade_correctLeftEye" value="OverlapSaccade_correctLeftEye +(idHandEyeOverlap==1)*(theta>90)"></action>
                    <action type="assignment" tag="increment OverlapSaccade_correctRightHand" variable="OverlapSaccade_correctRightHand" value="OverlapSaccade_correctRightHand +(idHandEyeOverlap==0)*(theta&lt;90)"></action>
                    <action type="assignment" tag="increment OverlapSaccade_correctRightEye" variable="OverlapSaccade_correctRightEye" value="OverlapSaccade_correctRightEye +(idHandEyeOverlap==1)*(theta&lt;90)"></action>
                    <action type="if" tag="If theta>90, increment OverlapSaccade_correctLeft 2" condition="theta>90">
                        <action type="assignment" tag="increment OverlapSaccade_correctLeft" variable="OverlapSaccade_correctLeft" value="OverlapSaccade_correctLeft+1"></action>
                    </action>
                    <action type="if" tag="If theta&lt;=90, increment OverlapSaccade_correctRight 2" condition="theta&lt;=90">
                        <action type="assignment" tag="increment OverlapSaccade_correctLeft" variable="OverlapSaccade_correctRight" value="OverlapSaccade_correctRight+1"></action>
                    </action>
                    <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="totalRewDur" duration_units="ms"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_correct" variable="OverlapSaccade_correct" value="OverlapSaccade_correct+1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                </task_system_state>
                <task_system_state tag="End Trial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut 8" variable="stateAnalogOut" value="45/50*5"></action>
                    <action type="assignment" tag="Set handFixR to 1" variable="handFixR" value="1"></action>
                    <action type="assignment" tag="Set handFixR to 6" variable="handFixG" value="1"></action>
                    <action type="assignment" tag="Set handFixB to 4" variable="handFixB" value="1"></action>
                    <action type="assignment" tag="Set fix_red to 5" variable="fix_green" value="1"></action>
                    <action type="assignment" tag="Set fix_red to 6" variable="fix_blue" value="1"></action>
                    <action type="assignment" tag="Set fix_red to 7" variable="fix_red" value="1"></action>
                    <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                    <action type="assignment" tag="Set targ_green to 2" variable="targ_green" value="1"></action>
                    <action type="assignment" tag="Set targ_blue to 3" variable="targ_blue" value="1"></action>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                    <action tag="Dequeue Fix 16" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue Fix 15" type="dequeue_stimulus" stimulus="handFix"></action>
                    <action tag="Update Stimulus Display 10" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_trials" variable="OverlapSaccade_trials" value="OverlapSaccade_trials+1"></action>
                    <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                    <action type="assignment" tag="Assign sync 3" variable="sync" value="0"></action>
                    <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If localTrials == trialNum_OverlapSaccade, Transition to Exit State System" condition="localTrials >= trialNum_OverlapSaccade || pstop" target="Exit State System"></transition>
                    <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                </task_system_state>
                <task_system_state tag="ITI" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut 9" variable="stateAnalogOut" value="0"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                </task_system_state>
                <task_system_state tag="Bad" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut 10" variable="stateAnalogOut" value="0"></action>
                    <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                    <action type="assignment" tag="Assign handFixX 2" variable="handFixX" value="0"></action>
                    <action tag="Dequeue Fix 113" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue target 5" type="dequeue_stimulus" stimulus="target"></action>
                    <action tag="Dequeue Fix 114" type="dequeue_stimulus" stimulus="handFix"></action>
                    <action tag="Update Stimulus Display 16" type="update_stimulus_display"></action>
                    <action type="report" tag="Report failure" message="Failure."></action>
                    <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                </task_system_state>
                <task_system_state tag="NoEyeFixDuringFix" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut 11" variable="stateAnalogOut" value="13/50*5"></action>
                    <action type="assignment" tag="Set fix_red to 9" variable="fix_green" value="0"></action>
                    <action type="assignment" tag="Set fix_red to 8" variable="fix_blue" value="0"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_NoEyeFixDuringFix" variable="OverlapSaccade_NoEyeFixDuringFix" value="OverlapSaccade_NoEyeFixDuringFix+1"></action>
                    <action type="start_timer" tag="Start Feedback 8" timer="Feedback" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If Feedback Expired, Transition to Bad 8" target="Bad" timer="Feedback"></transition>
                </task_system_state>
                <task_system_state tag="NoHandFixDuringFix" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut 12" variable="stateAnalogOut" value="7/50*5"></action>
                    <action type="assignment" tag="Set handFixR to 7" variable="handFixB" value="0"></action>
                    <action type="assignment" tag="Set handFixB to 9" variable="handFixG" value="0"></action>
                    <action tag="Update Stimulus Display 13" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_NoHandFixDuringFix" variable="OverlapSaccade_NoHandFixDuringFix" value="OverlapSaccade_NoHandFixDuringFix+1"></action>
                    <action type="start_timer" tag="Start Feedback 7" timer="Feedback" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If Feedback Expired, Transition to Bad 7" target="Bad" timer="Feedback"></transition>
                </task_system_state>
                <task_system_state tag="NoEyeFixDuringOverlap" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut 13" variable="stateAnalogOut" value="23/50*5"></action>
                    <action type="assignment" tag="Set fix_red to 11" variable="fix_green" value="0"></action>
                    <action type="assignment" tag="Set fix_red to 10" variable="fix_blue" value="0"></action>
                    <action tag="Update Stimulus Display 11" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_NoEyeFixDuringOverlap" variable="OverlapSaccade_NoEyeFixDuringOverlap" value="OverlapSaccade_NoEyeFixDuringOverlap+1"></action>
                    <action type="start_timer" tag="Start Feedback 6" timer="Feedback" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If Feedback Expired, Transition to Bad 6" target="Bad" timer="Feedback"></transition>
                </task_system_state>
                <task_system_state tag="NoHandFixDuringOverlap" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut 14" variable="stateAnalogOut" value="17/50*5"></action>
                    <action type="assignment" tag="Set handFixR to 8" variable="handFixB" value="0"></action>
                    <action type="assignment" tag="Set handFixB to 10" variable="handFixG" value="0"></action>
                    <action tag="Update Stimulus Display 14" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_NoHandFixDuringOverlap" variable="OverlapSaccade_NoHandFixDuringOverlap" value="OverlapSaccade_NoHandFixDuringOverlap+1"></action>
                    <action type="start_timer" tag="Start Feedback 5" timer="Feedback" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If Feedback Expired, Transition to Bad 5" target="Bad" timer="Feedback"></transition>
                </task_system_state>
                <task_system_state tag="Hand2OtherTarget" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut 15" variable="stateAnalogOut" value="32/50*5"></action>
                    <action type="assignment" tag="Set targ_green to 4" variable="targ_green" value="0"></action>
                    <action type="assignment" tag="Set targ_blue to 5" variable="targ_blue" value="0"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_Hand2OtherTarget" variable="OverlapSaccade_Hand2OtherTarget" value="OverlapSaccade_Hand2OtherTarget+1"></action>
                    <action type="start_timer" tag="Start Feedback 4" timer="Feedback" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If Feedback Expired, Transition to Bad 4" target="Bad" timer="Feedback"></transition>
                </task_system_state>
                <task_system_state tag="NoEyeFixDuringRT" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut 16" variable="stateAnalogOut" value="27/50*5"></action>
                    <action type="assignment" tag="Set fix_red to 13" variable="fix_green" value="0"></action>
                    <action type="assignment" tag="Set fix_red to 12" variable="fix_blue" value="0"></action>
                    <action tag="Update Stimulus Display 12" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_NoEyeFixDuringRT" variable="OverlapSaccade_NoEyeFixDuringRT" value="OverlapSaccade_NoEyeFixDuringRT+1"></action>
                    <action type="start_timer" tag="Start Feedback 3" timer="Feedback" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If Feedback Expired, Transition to Bad 3" target="Bad" timer="Feedback"></transition>
                </task_system_state>
                <task_system_state tag="NoHandFixDuringRT" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut 17" variable="stateAnalogOut" value="28/50*5"></action>
                    <action type="assignment" tag="Set fix_red to 13" variable="handFixG" value="0"></action>
                    <action type="assignment" tag="Set fix_red to 12" variable="handFixB" value="0"></action>
                    <action tag="Update Stimulus Display 12" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_NoHandFixDuringRT" variable="OverlapSaccade_NoHandFixDuringRT" value="OverlapSaccade_NoHandFixDuringRT +1"></action>
                    <action type="start_timer" tag="Start Feedback 2" timer="Feedback" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If Feedback Expired, Transition to Bad 2" target="Bad" timer="Feedback"></transition>
                </task_system_state>
                <task_system_state tag="LateRT" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign stateAnalogOut 18" variable="stateAnalogOut" value="33/50*5"></action>
                    <action type="assignment" tag="Set targ_green to 5" variable="targ_green" value="0"></action>
                    <action type="assignment" tag="Set targ_blue to 6" variable="targ_blue" value="0"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_LateRT" variable="OverlapSaccade_LateRT" value="OverlapSaccade_LateRT+1"></action>
                    <action type="start_timer" tag="Start Feedback" timer="Feedback" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If Feedback Expired, Transition to Bad" target="Bad" timer="Feedback"></transition>
                </task_system_state>
                <task_system_state tag="No Fix" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Increment OverlapSaccade_NoFix" variable="OverlapSaccade_NoFix" value="OverlapSaccade_NoFix+1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to Bad 8" target="Bad"></transition>
                </task_system_state>
                <task_system_state tag="Exit State System" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Return to parent task system" type="yield"></transition>
                </task_system_state>
            </task_system>
        </protocol>
        <protocol tag="RSG_twoPrior_handEye_rand1switch" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink 2" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start NIDaq Device 2" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur 2" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect 2" variable="consecutiveCorrect" value="-1"></action>
            <action type="assignment" tag="Assign pstop 3" variable="pstop" value="0"></action>
            <action type="assignment" tag="Assign fix_red 5" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green 4" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue 5" variable="fix_blue" value="1"></action>
            <action tag="Queue Stimulus 4" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 5" type="update_stimulus_display"></action>
            <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
            <action type="assignment" tag="Assign idShortLong: initially longHand" variable="idShortLong" value="1"></action>
            <action type="assignment" tag="Assign idHandEye 7" variable="idHandEye" value="0"></action>
            <action type="assignment" tag="Assign fixY" variable="fixY" value="-dFixY"></action>
            <action type="assignment" tag="Assign handFixY 13" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
            <action type="assignment" tag="Assign iti 3" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
            <action type="assignment" tag="Select interval_min 3" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
            <action type="assignment" tag="Select interval_max 3" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
            <action type="assignment" tag="Assign localTrials 2" variable="localTrials" value="0"></action>
            <block tag="block_RSG_twoPrior_handEye_1" nsamples="10000" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="Trials 333321" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign randTmp" variable="randTmp" value="disc_rand(0,1)"></action>
                        <action type="if" tag="If randTmp==0 &amp;&amp; localTrials>0, change idShortLong" condition="randTmp==0 &amp;&amp; localTrials>0">
                            <action type="assignment" tag="Set idShortLong" variable="idShortLong" value="1-idShortLong"></action>
                            <action type="assignment" tag="Assign fixY 9" variable="fixY" value="-fixY"></action>
                            <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                            <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                            <action type="assignment" tag="Select interval_min" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                            <action type="assignment" tag="Select interval_max" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                        </action>
                        <action type="if" tag="If randTmp==1 &amp;&amp; localTrials>0, change idHandEye" condition="randTmp==1 &amp;&amp; localTrials>0">
                            <action type="assignment" tag="Assign idHandEye 3" variable="idHandEye" value="1-idHandEye"></action>
                        </action>
                        <action type="report" tag="Announce shortLong/handEye" message="idShortLong: $idShortLong, idHandEye: $idHandEye"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign localCompleteTrials" variable="localCompleteTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNum" variable="trialNum" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="(idShortLong!=1)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="idHandEye==0"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="(idShortLong!=0)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Set handFixR to 9" variable="handFixR" value="(idShortLong!=1)||(idHandEye!=0)"></action>
                        <action type="assignment" tag="Set handFixG to 8" variable="handFixG" value="idHandEye==1"></action>
                        <action type="assignment" tag="Set handFixB to 7" variable="handFixB" value="(idShortLong!=0)||(idHandEye!=0)"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign targ_green" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_green" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign cursorAlpha 5" variable="cursorAlpha" value="1"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 7" variable="fixY" value="fixY"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="if" tag="(disabled) If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="0==1">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="(always true) If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="0==0">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action tag="Queue syncFlash 8" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display 111" type="update_stimulus_display"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="reset syncFlash 7" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 9" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 8" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 10" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If wrong modality, Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*(!handFixOn), Transition to After Ready 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending, go to Set" condition="Interval1_ending" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 9" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 11" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*(!handFixOn), Transition to After Set2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set2"></transition>
                        <transition type="conditional" tag="If wrong modality, Transition to Abort 2" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*!handFixOn, Transition to Production" condition="(idHandEye==1)*(!fixOn)+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Production"></transition>
                        <transition type="conditional" tag="If (idHandEye==0)*(!fixOn)+(idHandEye==1)*(!handFixOn), Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to No Saccade" target="No Saccade" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="(idHandEye==0)*handTimeDur+(idHandEye==1)*saccadeTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="(idHandEye==1)*on_targ+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2)" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="(idHandEye==0)*!fixOn+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="(not used but keep) If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Increment N_complete" variable="N_complete" value="N_complete +1"></action>
                        <action type="assignment" tag="Increment localCompleteTrials" variable="localCompleteTrials" value="localCompleteTrials +1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward 2" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="reward delay"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="reward delay" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start cursorMove" timer="cursorMove" timebase="" duration="dtProdRew" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to Reward" target="Reward" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 10" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 12" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="assignment" tag="Increment N_correctShortHandLeft" variable="N_correctShortHandLeft" value="N_correctShortHandLeft +(idShortLong==0)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortHandRight 2" variable="N_correctShortHandRight" value="N_correctShortHandRight +(idShortLong==0)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeLeft 3" variable="N_correctShortEyeLeft" value="N_correctShortEyeLeft +(idShortLong==0)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeRight 4" variable="N_correctShortEyeRight" value="N_correctShortEyeRight +(idShortLong==0)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandLeft 5" variable="N_correctLongHandLeft" value="N_correctLongHandLeft +(idShortLong==1)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandRight 6" variable="N_correctLongHandRight" value="N_correctLongHandRight +(idShortLong==1)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeLeft 7" variable="N_correctLongEyeLeft" value="N_correctLongEyeLeft +(idShortLong==1)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeRight 8" variable="N_correctLongEyeRight" value="N_correctLongEyeRight +(idShortLong==1)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue syncFlash 2" type="dequeue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localCompleteTrials == trialNum, Transition to Exit State System" condition="localCompleteTrials >= trialNum || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 11" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 13" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to End Trial" target="End Trial" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue 2" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue set2 cue 4" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 17" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(ready_cue_onset_time_us-now())/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(ready_cue_onset_time_us-now())/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 115" type="dequeue_stimulus" stimulus="cursor"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
        </protocol>
        <protocol tag="RSG_twoPrior_handEye_seqSwitch" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink 2" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start NIDaq Device 2" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur 2" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect 2" variable="consecutiveCorrect" value="-1"></action>
            <action type="assignment" tag="Assign pstop 3" variable="pstop" value="0"></action>
            <action type="assignment" tag="Assign fix_red 5" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green 4" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue 5" variable="fix_blue" value="1"></action>
            <action tag="Queue Stimulus 4" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 5" type="update_stimulus_display"></action>
            <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
            <action type="assignment" tag="Assign idShortLong: initially longHand" variable="idShortLong" value="1"></action>
            <action type="assignment" tag="Assign idHandEye 7" variable="idHandEye" value="0"></action>
            <action type="assignment" tag="Assign fixY" variable="fixY" value="-dFixY"></action>
            <action type="assignment" tag="Assign handFixY 13" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
            <action type="assignment" tag="Assign iti 3" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
            <action type="assignment" tag="Select interval_min 3" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
            <action type="assignment" tag="Select interval_max 3" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
            <action type="assignment" tag="Assign localTrials 2" variable="localTrials" value="0"></action>
            <block tag="block_RSG_twoPrior_handEye_seq" nsamples="10000" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="Trials 333324" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign randTmp" variable="randTmp" value="1-randTmp"></action>
                        <action type="if" tag="If randTmp==0 &amp;&amp; localTrials>0, change idShortLong" condition="randTmp==0 &amp;&amp; localTrials>0">
                            <action type="assignment" tag="Set idShortLong" variable="idShortLong" value="1-idShortLong"></action>
                            <action type="assignment" tag="Assign fixY 9" variable="fixY" value="-fixY"></action>
                            <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                            <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                            <action type="assignment" tag="Select interval_min" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                            <action type="assignment" tag="Select interval_max" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                        </action>
                        <action type="if" tag="If randTmp==1 &amp;&amp; localTrials>0, change idHandEye" condition="randTmp==1 &amp;&amp; localTrials>0">
                            <action type="assignment" tag="Assign idHandEye 3" variable="idHandEye" value="1-idHandEye"></action>
                        </action>
                        <action type="report" tag="Announce shortLong/handEye" message="idShortLong: $idShortLong, idHandEye: $idHandEye"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign localCompleteTrials" variable="localCompleteTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNum" variable="trialNum" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="(idShortLong!=1)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="idHandEye==0"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="(idShortLong!=0)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Set handFixR to 9" variable="handFixR" value="(idShortLong!=1)||(idHandEye!=0)"></action>
                        <action type="assignment" tag="Set handFixG to 8" variable="handFixG" value="idHandEye==1"></action>
                        <action type="assignment" tag="Set handFixB to 7" variable="handFixB" value="(idShortLong!=0)||(idHandEye!=0)"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign targ_green" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_green" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign cursorAlpha 5" variable="cursorAlpha" value="1"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 7" variable="fixY" value="fixY"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="if" tag="(disabled) If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="0==1">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="(always true) If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="0==0">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action tag="Queue syncFlash 19" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display 112" type="update_stimulus_display"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="reset syncFlash 16" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 18" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 15" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 17" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If wrong modality, Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*(!handFixOn), Transition to After Ready 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending, go to Set" condition="Interval1_ending" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 14" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 16" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*(!handFixOn), Transition to After Set2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set2"></transition>
                        <transition type="conditional" tag="If wrong modality, Transition to Abort 2" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*!handFixOn, Transition to Production" condition="(idHandEye==1)*(!fixOn)+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Production"></transition>
                        <transition type="conditional" tag="If (idHandEye==0)*(!fixOn)+(idHandEye==1)*(!handFixOn), Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to No Saccade" target="No Saccade" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="(idHandEye==0)*handTimeDur+(idHandEye==1)*saccadeTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="(idHandEye==1)*on_targ+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2)" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="(idHandEye==0)*!fixOn+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="(not used but keep) If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Increment N_complete" variable="N_complete" value="N_complete +1"></action>
                        <action type="assignment" tag="Increment localCompleteTrials" variable="localCompleteTrials" value="localCompleteTrials +1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward 2" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="reward delay"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="reward delay" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start cursorMove" timer="cursorMove" timebase="" duration="dtProdRew" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to Reward" target="Reward" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 13" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 15" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="assignment" tag="Increment N_correctShortHandLeft" variable="N_correctShortHandLeft" value="N_correctShortHandLeft +(idShortLong==0)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortHandRight 2" variable="N_correctShortHandRight" value="N_correctShortHandRight +(idShortLong==0)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeLeft 3" variable="N_correctShortEyeLeft" value="N_correctShortEyeLeft +(idShortLong==0)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeRight 4" variable="N_correctShortEyeRight" value="N_correctShortEyeRight +(idShortLong==0)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandLeft 5" variable="N_correctLongHandLeft" value="N_correctLongHandLeft +(idShortLong==1)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandRight 6" variable="N_correctLongHandRight" value="N_correctLongHandRight +(idShortLong==1)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeLeft 7" variable="N_correctLongEyeLeft" value="N_correctLongEyeLeft +(idShortLong==1)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeRight 8" variable="N_correctLongEyeRight" value="N_correctLongEyeRight +(idShortLong==1)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue syncFlash 3" type="dequeue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localCompleteTrials == trialNum, Transition to Exit State System" condition="localCompleteTrials >= trialNum || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 12" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 14" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to End Trial" target="End Trial" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue 3" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue set2 cue 5" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 18" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(ready_cue_onset_time_us-now())/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(ready_cue_onset_time_us-now())/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 115" type="dequeue_stimulus" stimulus="cursor"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
        </protocol>
        <protocol tag="RSG_twoPrior_handEye_randomSwitch" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink 2" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start NIDaq Device 2" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur 2" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect 2" variable="consecutiveCorrect" value="-1"></action>
            <action type="assignment" tag="Assign pstop 3" variable="pstop" value="0"></action>
            <action type="assignment" tag="Assign fix_red 5" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green 4" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue 5" variable="fix_blue" value="1"></action>
            <action tag="Queue Stimulus 4" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 5" type="update_stimulus_display"></action>
            <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
            <action type="assignment" tag="Assign stateAnalogOut 19" variable="stateAnalogOut" value="0"></action>
            <action type="assignment" tag="Assign idShortLong: initially longHand" variable="idShortLong" value="1"></action>
            <action type="assignment" tag="Assign idHandEye 7" variable="idHandEye" value="1"></action>
            <action type="assignment" tag="Assign fixY" variable="fixY" value="-dFixY"></action>
            <action type="assignment" tag="Assign handFixY 13" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
            <action type="assignment" tag="Assign iti 3" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
            <action type="assignment" tag="Select interval_min 3" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
            <action type="assignment" tag="Select interval_max 3" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
            <action type="assignment" tag="Assign localTrials 2" variable="localTrials" value="0"></action>
            <block tag="block_RSG_twoPrior_handEye_rand" nsamples="10000" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="Trials 333329" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign stateAnalogOut 110" variable="stateAnalogOut" value="0"></action>
                        <action type="assignment" tag="Assign randTmp" variable="randTmp" value="disc_rand(0,2)"></action>
                        <action type="if" tag="If randTmp==0 &amp;&amp; localTrials>0, change idShortLong" condition="randTmp==0 &amp;&amp; localTrials>0">
                            <action type="assignment" tag="Set idShortLong" variable="idShortLong" value="1-idShortLong"></action>
                            <action type="assignment" tag="Assign fixY 9" variable="fixY" value="-fixY"></action>
                            <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                            <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                            <action type="assignment" tag="Select interval_min" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                            <action type="assignment" tag="Select interval_max" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                        </action>
                        <action type="if" tag="If randTmp==1 &amp;&amp; localTrials>0, change idHandEye" condition="randTmp==1 &amp;&amp; localTrials>0">
                            <action type="assignment" tag="Assign idHandEye 3" variable="idHandEye" value="1-idHandEye"></action>
                        </action>
                        <action type="if" tag="If randTmp==2 &amp;&amp; localTrials>0, change idShortLong &amp; idHandEye" condition="randTmp==2 &amp;&amp; localTrials>0">
                            <action type="assignment" tag="Set idShortLong" variable="idShortLong" value="1-idShortLong"></action>
                            <action type="assignment" tag="Assign fixY 9" variable="fixY" value="-fixY"></action>
                            <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                            <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                            <action type="assignment" tag="Select interval_min" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                            <action type="assignment" tag="Select interval_max" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                            <action type="assignment" tag="Assign idHandEye 8" variable="idHandEye" value="1-idHandEye"></action>
                        </action>
                        <action type="report" tag="Announce shortLong/handEye" message="idShortLong: $idShortLong, idHandEye: $idHandEye"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign localCompleteTrials" variable="localCompleteTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNum" variable="trialNum" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="((idShortLong!=1)||(idHandEye!=1))"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="idHandEye==0"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="((idShortLong!=0)||(idHandEye!=1))"></action>
                        <action type="assignment" tag="Set handFixR to 9" variable="handFixR" value="(idShortLong!=1)||(idHandEye!=0)"></action>
                        <action type="assignment" tag="Set handFixG to 8" variable="handFixG" value="idHandEye==1"></action>
                        <action type="assignment" tag="Set handFixB to 7" variable="handFixB" value="(idShortLong!=0)||(idHandEye!=0)"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign targ_green" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_green" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign cursorAlpha 5" variable="cursorAlpha" value="1"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 111" variable="stateAnalogOut" value="5/50*5"></action>
                        <action type="pulse" tag="Pulse trialSync 2" variable="trialSync" duration="10*1000"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign stateAnalogOut 113" variable="stateAnalogOut" value="10/50*5"></action>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 7" variable="fixY" value="fixY"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="if" tag="(disabled) If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="0==1">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="(always true) If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="0==0">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action tag="Queue syncFlash 2" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display 110" type="update_stimulus_display"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="reset syncFlash 2" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 3" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 114" variable="stateAnalogOut" value="15/50*5"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 3" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 4" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 115" variable="stateAnalogOut" value="20/50*5"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If wrong modality, Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*(!handFixOn), Transition to After Ready 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending, go to Set" condition="Interval1_ending" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 4" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 5" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 116" variable="stateAnalogOut" value="25/50*5"></action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*(!handFixOn), Transition to After Set2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set2"></transition>
                        <transition type="conditional" tag="If wrong modality, Transition to Abort 2" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*!handFixOn, Transition to Production" condition="(idHandEye==1)*(!fixOn)+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Production"></transition>
                        <transition type="conditional" tag="If (idHandEye==0)*(!fixOn)+(idHandEye==1)*(!handFixOn), Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to No Saccade" target="No Saccade" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="(idHandEye==0)*handTimeDur+(idHandEye==1)*saccadeTimeDur" duration_units="ms"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 117" variable="stateAnalogOut" value="30/50*5"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="(idHandEye==1)*on_targ+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2)" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="(idHandEye==0)*!fixOn+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="(not used but keep) If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 118" variable="stateAnalogOut" value="35/50*5"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Increment N_complete" variable="N_complete" value="N_complete +1"></action>
                        <action type="assignment" tag="Increment localCompleteTrials" variable="localCompleteTrials" value="localCompleteTrials +1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward 2" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="reward delay"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="reward delay" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start cursorMove" timer="cursorMove" timebase="" duration="dtProdRew" duration_units="ms"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 119" variable="stateAnalogOut" value="40/50*5"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to Reward" target="Reward" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 5" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 6" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1110" variable="stateAnalogOut" value="45/50*5"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="assignment" tag="Increment N_correctShortHandLeft" variable="N_correctShortHandLeft" value="N_correctShortHandLeft +(idShortLong==0)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortHandRight 2" variable="N_correctShortHandRight" value="N_correctShortHandRight +(idShortLong==0)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeLeft 3" variable="N_correctShortEyeLeft" value="N_correctShortEyeLeft +(idShortLong==0)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeRight 4" variable="N_correctShortEyeRight" value="N_correctShortEyeRight +(idShortLong==0)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandLeft 5" variable="N_correctLongHandLeft" value="N_correctLongHandLeft +(idShortLong==1)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandRight 6" variable="N_correctLongHandRight" value="N_correctLongHandRight +(idShortLong==1)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeLeft 7" variable="N_correctLongEyeLeft" value="N_correctLongEyeLeft +(idShortLong==1)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeRight 8" variable="N_correctLongEyeRight" value="N_correctLongEyeRight +(idShortLong==1)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue syncFlash" type="dequeue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1111" variable="stateAnalogOut" value="50/50*5"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1112" variable="stateAnalogOut" value="0"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to ITI2" target="ITI2" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localCompleteTrials == trialNum, Transition to Exit State System 2" condition="localCompleteTrials >= trialNum || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to Fix On" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 6" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 7" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1113" variable="stateAnalogOut" value="40/50*5"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to End Trial" target="End Trial" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue 4" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue set2 cue 6" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 19" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(ready_cue_onset_time_us-now())/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(ready_cue_onset_time_us-now())/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1114" variable="stateAnalogOut" value="0"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 115" type="dequeue_stimulus" stimulus="cursor"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
        </protocol>
        <protocol tag="RSG_twoPrior_handEye_seqSwitch photosync" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink 2" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start NIDaq Device 2" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur 2" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect 2" variable="consecutiveCorrect" value="-1"></action>
            <action type="assignment" tag="Assign pstop 3" variable="pstop" value="0"></action>
            <action type="assignment" tag="Assign fix_red 5" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green 4" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue 5" variable="fix_blue" value="1"></action>
            <action tag="Queue Stimulus 4" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 5" type="update_stimulus_display"></action>
            <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
            <action type="assignment" tag="Assign stateAnalogOut 19" variable="stateAnalogOut" value="0"></action>
            <action type="assignment" tag="Assign idShortLong: initially longHand" variable="idShortLong" value="1"></action>
            <action type="assignment" tag="Assign idHandEye 7" variable="idHandEye" value="0"></action>
            <action type="assignment" tag="Assign fixY" variable="fixY" value="-dFixY"></action>
            <action type="assignment" tag="Assign handFixY 13" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
            <action type="assignment" tag="Assign iti 3" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
            <action type="assignment" tag="Select interval_min 3" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
            <action type="assignment" tag="Select interval_max 3" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
            <action type="assignment" tag="Assign localTrials 2" variable="localTrials" value="0"></action>
            <block tag="block_RSG_twoPrior_handEye_rand" nsamples="10000" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="Trials 333329" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign stateAnalogOut 110" variable="stateAnalogOut" value="0"></action>
                        <action type="assignment" tag="Assign randTmp" variable="randTmp" value="1-randTmp"></action>
                        <action type="if" tag="If randTmp==0 &amp;&amp; localTrials>0, change idShortLong" condition="randTmp==0 &amp;&amp; localTrials>0">
                            <action type="assignment" tag="Set idShortLong" variable="idShortLong" value="1-idShortLong"></action>
                            <action type="assignment" tag="Assign fixY 9" variable="fixY" value="-fixY"></action>
                            <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                            <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                            <action type="assignment" tag="Select interval_min" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                            <action type="assignment" tag="Select interval_max" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                        </action>
                        <action type="if" tag="If randTmp==1 &amp;&amp; localTrials>0, change idHandEye" condition="randTmp==1 &amp;&amp; localTrials>0">
                            <action type="assignment" tag="Assign idHandEye 3" variable="idHandEye" value="1-idHandEye"></action>
                        </action>
                        <action type="if" tag="If randTmp==2 &amp;&amp; localTrials>0, change idShortLong &amp; idHandEye" condition="randTmp==2 &amp;&amp; localTrials>0">
                            <action type="assignment" tag="Set idShortLong" variable="idShortLong" value="1-idShortLong"></action>
                            <action type="assignment" tag="Assign fixY 9" variable="fixY" value="-fixY"></action>
                            <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                            <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                            <action type="assignment" tag="Select interval_min" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                            <action type="assignment" tag="Select interval_max" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                            <action type="assignment" tag="Assign idHandEye 8" variable="idHandEye" value="1-idHandEye"></action>
                        </action>
                        <action type="report" tag="Announce shortLong/handEye" message="idShortLong: $idShortLong, idHandEye: $idHandEye"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign localCompleteTrials" variable="localCompleteTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNum" variable="trialNum" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="(idShortLong!=1)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="idHandEye==0"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="(idShortLong!=0)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Set handFixR to 9" variable="handFixR" value="(idShortLong!=1)||(idHandEye!=0)"></action>
                        <action type="assignment" tag="Set handFixG to 8" variable="handFixG" value="idHandEye==1"></action>
                        <action type="assignment" tag="Set handFixB to 7" variable="handFixB" value="(idShortLong!=0)||(idHandEye!=0)"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign targ_green" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_green" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign cursorAlpha 5" variable="cursorAlpha" value="1"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 111" variable="stateAnalogOut" value="5/50*5"></action>
                        <action type="pulse" tag="Pulse trialSync 2" variable="trialSync" duration="10*1000"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign stateAnalogOut 113" variable="stateAnalogOut" value="10/50*5"></action>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 7" variable="fixY" value="fixY"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="if" tag="(disabled) If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="0==1">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="(always true) If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="0==0">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action tag="Queue syncFlash 2" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display 110" type="update_stimulus_display"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="reset syncFlash 2" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 3" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 114" variable="stateAnalogOut" value="15/50*5"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 3" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 4" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 115" variable="stateAnalogOut" value="20/50*5"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If wrong modality, Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*(!handFixOn), Transition to After Ready 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending, go to Set" condition="Interval1_ending" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 4" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 5" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 116" variable="stateAnalogOut" value="25/50*5"></action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*(!handFixOn), Transition to After Set2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set2"></transition>
                        <transition type="conditional" tag="If wrong modality, Transition to Abort 2" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*!handFixOn, Transition to Production" condition="(idHandEye==1)*(!fixOn)+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Production"></transition>
                        <transition type="conditional" tag="If (idHandEye==0)*(!fixOn)+(idHandEye==1)*(!handFixOn), Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to No Saccade" target="No Saccade" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="(idHandEye==0)*handTimeDur+(idHandEye==1)*saccadeTimeDur" duration_units="ms"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 117" variable="stateAnalogOut" value="30/50*5"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="(idHandEye==1)*on_targ+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2)" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="(idHandEye==0)*!fixOn+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="(not used but keep) If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 118" variable="stateAnalogOut" value="35/50*5"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Increment N_complete" variable="N_complete" value="N_complete +1"></action>
                        <action type="assignment" tag="Increment localCompleteTrials" variable="localCompleteTrials" value="localCompleteTrials +1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward 2" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="reward delay"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="reward delay" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start cursorMove" timer="cursorMove" timebase="" duration="dtProdRew" duration_units="ms"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 119" variable="stateAnalogOut" value="40/50*5"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to Reward" target="Reward" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 5" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 6" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1110" variable="stateAnalogOut" value="45/50*5"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="assignment" tag="Increment N_correctShortHandLeft" variable="N_correctShortHandLeft" value="N_correctShortHandLeft +(idShortLong==0)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortHandRight 2" variable="N_correctShortHandRight" value="N_correctShortHandRight +(idShortLong==0)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeLeft 3" variable="N_correctShortEyeLeft" value="N_correctShortEyeLeft +(idShortLong==0)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeRight 4" variable="N_correctShortEyeRight" value="N_correctShortEyeRight +(idShortLong==0)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandLeft 5" variable="N_correctLongHandLeft" value="N_correctLongHandLeft +(idShortLong==1)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandRight 6" variable="N_correctLongHandRight" value="N_correctLongHandRight +(idShortLong==1)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeLeft 7" variable="N_correctLongEyeLeft" value="N_correctLongEyeLeft +(idShortLong==1)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeRight 8" variable="N_correctLongEyeRight" value="N_correctLongEyeRight +(idShortLong==1)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue syncFlash" type="dequeue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1111" variable="stateAnalogOut" value="50/50*5"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1112" variable="stateAnalogOut" value="0"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to ITI2" target="ITI2" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localCompleteTrials == trialNum, Transition to Exit State System 2" condition="localCompleteTrials >= trialNum || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to Fix On" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 6" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 7" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1113" variable="stateAnalogOut" value="40/50*5"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to End Trial" target="End Trial" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue 4" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue set2 cue 6" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 19" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(ready_cue_onset_time_us-now())/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(ready_cue_onset_time_us-now())/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1114" variable="stateAnalogOut" value="0"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 115" type="dequeue_stimulus" stimulus="cursor"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
        </protocol>
        <protocol tag="RSG_twoPrior_handEye_seqSwitch photosync noSet" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink 2" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start NIDaq Device 2" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur 2" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect 2" variable="consecutiveCorrect" value="-1"></action>
            <action type="assignment" tag="Assign pstop 3" variable="pstop" value="0"></action>
            <action type="assignment" tag="Assign fix_red 5" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green 4" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue 5" variable="fix_blue" value="1"></action>
            <action tag="Queue Stimulus 4" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 5" type="update_stimulus_display"></action>
            <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
            <action type="assignment" tag="Assign stateAnalogOut 19" variable="stateAnalogOut" value="0"></action>
            <action type="assignment" tag="Assign idShortLong: initially longHand" variable="idShortLong" value="1"></action>
            <action type="assignment" tag="Assign idHandEye 7" variable="idHandEye" value="0"></action>
            <action type="assignment" tag="Assign fixY" variable="fixY" value="-dFixY"></action>
            <action type="assignment" tag="Assign handFixY 13" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
            <action type="assignment" tag="Assign iti 3" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
            <action type="assignment" tag="Select interval_min 3" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
            <action type="assignment" tag="Select interval_max 3" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
            <action type="assignment" tag="Assign localTrials 2" variable="localTrials" value="0"></action>
            <block tag="block_RSG_twoPrior_handEye_rand" nsamples="10000" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="Trials 333329" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign stateAnalogOut 110" variable="stateAnalogOut" value="0"></action>
                        <action type="assignment" tag="Assign randTmp" variable="randTmp" value="1-randTmp"></action>
                        <action type="if" tag="If randTmp==0 &amp;&amp; localTrials>0, change idShortLong" condition="randTmp==0 &amp;&amp; localTrials>0">
                            <action type="assignment" tag="Set idShortLong" variable="idShortLong" value="1-idShortLong"></action>
                            <action type="assignment" tag="Assign fixY 9" variable="fixY" value="-fixY"></action>
                            <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                            <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                            <action type="assignment" tag="Select interval_min" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                            <action type="assignment" tag="Select interval_max" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                        </action>
                        <action type="if" tag="If randTmp==1 &amp;&amp; localTrials>0, change idHandEye" condition="randTmp==1 &amp;&amp; localTrials>0">
                            <action type="assignment" tag="Assign idHandEye 3" variable="idHandEye" value="1-idHandEye"></action>
                        </action>
                        <action type="if" tag="If randTmp==2 &amp;&amp; localTrials>0, change idShortLong &amp; idHandEye" condition="randTmp==2 &amp;&amp; localTrials>0">
                            <action type="assignment" tag="Set idShortLong" variable="idShortLong" value="1-idShortLong"></action>
                            <action type="assignment" tag="Assign fixY 9" variable="fixY" value="-fixY"></action>
                            <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                            <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                            <action type="assignment" tag="Select interval_min" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                            <action type="assignment" tag="Select interval_max" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                            <action type="assignment" tag="Assign idHandEye 8" variable="idHandEye" value="1-idHandEye"></action>
                        </action>
                        <action type="report" tag="Announce shortLong/handEye" message="idShortLong: $idShortLong, idHandEye: $idHandEye"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign localCompleteTrials" variable="localCompleteTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNum" variable="trialNum" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="(idShortLong!=1)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="idHandEye==0"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="(idShortLong!=0)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Set handFixR to 9" variable="handFixR" value="(idShortLong!=1)||(idHandEye!=0)"></action>
                        <action type="assignment" tag="Set handFixG to 8" variable="handFixG" value="idHandEye==1"></action>
                        <action type="assignment" tag="Set handFixB to 7" variable="handFixB" value="(idShortLong!=0)||(idHandEye!=0)"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign targ_green" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_green" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign cursorAlpha 5" variable="cursorAlpha" value="1"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 111" variable="stateAnalogOut" value="5/50*5"></action>
                        <action type="pulse" tag="Pulse trialSync 2" variable="trialSync" duration="10*1000"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign stateAnalogOut 113" variable="stateAnalogOut" value="10/50*5"></action>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 7" variable="fixY" value="fixY"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Assign idNoSet" variable="idNoSet" value="rand(0,1)&lt;pNoSet"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="if" tag="(disabled) If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="0==1">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="(always true) If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="0==0">
                            <action type="if" tag="If !idNoSet, queue set 2" condition="!idNoSet">
                                <action type="assignment" tag="Select theta 2" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                <action type="assignment" tag="Select interval 2" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                            </action>
                            <action type="if" tag="If idNoSet, set2_ended=2" condition="idNoSet">
                                <action type="assignment" tag="Select theta 3" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                <action type="assignment" tag="Select interval 3" variable="interval" value="interval_max"></action>
                                <action type="assignment" tag="Assign saccade_wait_dur 2" variable="saccade_wait_dur" value="waitDur"></action>
                                <action type="assignment" tag="Assign nNoSet" variable="nNoSet" value="nNoSet+1"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action tag="Queue syncFlash 2" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display 110" type="update_stimulus_display"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="reset syncFlash 2" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 3" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 114" variable="stateAnalogOut" value="15/50*5"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 3" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 4" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 115" variable="stateAnalogOut" value="20/50*5"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If wrong modality, Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*(!handFixOn), Transition to After Ready 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending, go to Set" condition="Interval1_ending" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action type="if" tag="If idNoSet, set2_ended=1" condition="idNoSet">
                            <action type="assignment" tag="Reset set2_ended 2" variable="set2_ended" value="1"></action>
                        </action>
                        <action type="if" tag="If !idNoSet, queue set" condition="!idNoSet">
                            <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        </action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 4" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 5" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 116" variable="stateAnalogOut" value="25/50*5"></action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*(!handFixOn), Transition to After Set2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set2"></transition>
                        <transition type="conditional" tag="If wrong modality, Transition to Abort 2" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*!handFixOn, Transition to Production" condition="(idHandEye==1)*(!fixOn)+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Production"></transition>
                        <transition type="conditional" tag="If (idHandEye==0)*(!fixOn)+(idHandEye==1)*(!handFixOn), Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to No Saccade" target="No Saccade" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="(idHandEye==0)*handTimeDur+(idHandEye==1)*saccadeTimeDur" duration_units="ms"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 117" variable="stateAnalogOut" value="30/50*5"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="(idHandEye==1)*on_targ+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2)" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="(idHandEye==0)*!fixOn+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="(not used but keep) If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 118" variable="stateAnalogOut" value="35/50*5"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Increment N_complete" variable="N_complete" value="N_complete +1"></action>
                        <action type="assignment" tag="Increment localCompleteTrials" variable="localCompleteTrials" value="localCompleteTrials +1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If idNoSet, Transition to Bad" condition="idNoSet" target="Bad"></transition>
                        <transition type="conditional" tag="If correct, Transition to Reward 3" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="reward delay"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="reward delay" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start cursorMove" timer="cursorMove" timebase="" duration="dtProdRew" duration_units="ms"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 119" variable="stateAnalogOut" value="40/50*5"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to Reward" target="Reward" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 5" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 6" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1110" variable="stateAnalogOut" value="45/50*5"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="assignment" tag="Increment N_correctShortHandLeft" variable="N_correctShortHandLeft" value="N_correctShortHandLeft +(idShortLong==0)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortHandRight 2" variable="N_correctShortHandRight" value="N_correctShortHandRight +(idShortLong==0)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeLeft 3" variable="N_correctShortEyeLeft" value="N_correctShortEyeLeft +(idShortLong==0)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeRight 4" variable="N_correctShortEyeRight" value="N_correctShortEyeRight +(idShortLong==0)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandLeft 5" variable="N_correctLongHandLeft" value="N_correctLongHandLeft +(idShortLong==1)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandRight 6" variable="N_correctLongHandRight" value="N_correctLongHandRight +(idShortLong==1)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeLeft 7" variable="N_correctLongEyeLeft" value="N_correctLongEyeLeft +(idShortLong==1)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeRight 8" variable="N_correctLongEyeRight" value="N_correctLongEyeRight +(idShortLong==1)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue syncFlash" type="dequeue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1111" variable="stateAnalogOut" value="50/50*5"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1112" variable="stateAnalogOut" value="0"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to ITI2" target="ITI2" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localCompleteTrials == trialNum, Transition to Exit State System 2" condition="localCompleteTrials >= trialNum || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to Fix On" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 6" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 7" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1113" variable="stateAnalogOut" value="40/50*5"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to End Trial" target="End Trial" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue 4" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue set2 cue 6" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 19" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(ready_cue_onset_time_us-now())/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(ready_cue_onset_time_us-now())/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="if" tag="If idNoSet, increment nCorrectNoSet" condition="idNoSet">
                            <action type="assignment" tag="increment nCorrectNoSet" variable="nCorrectNoSet" value="nCorrectNoSet+1"></action>
                        </action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1114" variable="stateAnalogOut" value="0"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 115" type="dequeue_stimulus" stimulus="cursor"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
        </protocol>
        <protocol tag="RSG_twoPrior_handEye_seqSwitch photosync noSet 2" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink 2" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start NIDaq Device 2" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur 2" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect 2" variable="consecutiveCorrect" value="-1"></action>
            <action type="assignment" tag="Assign pstop 3" variable="pstop" value="0"></action>
            <action type="assignment" tag="Assign fix_red 5" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green 4" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue 5" variable="fix_blue" value="1"></action>
            <action tag="Queue Stimulus 4" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 5" type="update_stimulus_display"></action>
            <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
            <action type="assignment" tag="Assign stateAnalogOut 19" variable="stateAnalogOut" value="0"></action>
            <action type="assignment" tag="Assign idShortLong: initially longHand" variable="idShortLong" value="1"></action>
            <action type="assignment" tag="Assign idHandEye 7" variable="idHandEye" value="0"></action>
            <action type="assignment" tag="Assign fixY" variable="fixY" value="-dFixY"></action>
            <action type="assignment" tag="Assign handFixY 13" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
            <action type="assignment" tag="Assign iti 3" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
            <action type="assignment" tag="Select interval_min 3" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
            <action type="assignment" tag="Select interval_max 3" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
            <action type="assignment" tag="Assign localTrials 2" variable="localTrials" value="0"></action>
            <block tag="block_RSG_twoPrior_handEye_rand" nsamples="10000" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="Trials 333329" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Start NIDaq Device 3" type="start_device_IO" device="NIDaq Device"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 110" variable="stateAnalogOut" value="0"></action>
                        <action type="assignment" tag="Assign randTmp" variable="randTmp" value="1-randTmp"></action>
                        <action type="if" tag="If randTmp==0 &amp;&amp; localTrials>0, change idShortLong" condition="randTmp==0 &amp;&amp; localTrials>0">
                            <action type="assignment" tag="Set idShortLong" variable="idShortLong" value="1-idShortLong"></action>
                            <action type="assignment" tag="Assign fixY 9" variable="fixY" value="-fixY"></action>
                            <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                            <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                            <action type="assignment" tag="Select interval_min" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                            <action type="assignment" tag="Select interval_max" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                        </action>
                        <action type="if" tag="If randTmp==1 &amp;&amp; localTrials>0, change idHandEye" condition="randTmp==1 &amp;&amp; localTrials>0">
                            <action type="assignment" tag="Assign idHandEye 3" variable="idHandEye" value="1-idHandEye"></action>
                        </action>
                        <action type="if" tag="If randTmp==2 &amp;&amp; localTrials>0, change idShortLong &amp; idHandEye" condition="randTmp==2 &amp;&amp; localTrials>0">
                            <action type="assignment" tag="Set idShortLong" variable="idShortLong" value="1-idShortLong"></action>
                            <action type="assignment" tag="Assign fixY 9" variable="fixY" value="-fixY"></action>
                            <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                            <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                            <action type="assignment" tag="Select interval_min" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                            <action type="assignment" tag="Select interval_max" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                            <action type="assignment" tag="Assign idHandEye 8" variable="idHandEye" value="1-idHandEye"></action>
                        </action>
                        <action type="report" tag="Announce shortLong/handEye" message="idShortLong: $idShortLong, idHandEye: $idHandEye"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign localCompleteTrials" variable="localCompleteTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNum" variable="trialNum" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="(idShortLong!=1)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="idHandEye==0"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="(idShortLong!=0)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Set handFixR to 9" variable="handFixR" value="(idShortLong!=1)||(idHandEye!=0)"></action>
                        <action type="assignment" tag="Set handFixG to 8" variable="handFixG" value="idHandEye==1"></action>
                        <action type="assignment" tag="Set handFixB to 7" variable="handFixB" value="(idShortLong!=0)||(idHandEye!=0)"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign targ_green" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_green" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign cursorAlpha 5" variable="cursorAlpha" value="1"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 111" variable="stateAnalogOut" value="5/50*5"></action>
                        <action type="pulse" tag="Pulse trialSync 2" variable="trialSync" duration="10*1000"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign stateAnalogOut 113" variable="stateAnalogOut" value="10/50*5"></action>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 7" variable="fixY" value="fixY"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Assign idNoSet" variable="idNoSet" value="rand(0,1)&lt;pNoSet"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="if" tag="(disabled) If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="0==1">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="(always true) If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="0==0">
                            <action type="if" tag="If !idNoSet, queue set 2" condition="!idNoSet">
                                <action type="assignment" tag="Select theta 2" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                <action type="assignment" tag="Select interval 2" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                            </action>
                            <action type="if" tag="If idNoSet, set2_ended=2" condition="idNoSet">
                                <action type="assignment" tag="Select theta 3" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                <action type="assignment" tag="Select interval 3" variable="interval" value="interval_max"></action>
                                <action type="assignment" tag="Assign saccade_wait_dur 2" variable="saccade_wait_dur" value="waitDur"></action>
                                <action type="assignment" tag="Assign nNoSet" variable="nNoSet" value="nNoSet+1"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action tag="Queue syncFlash 2" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display 110" type="update_stimulus_display"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="reset syncFlash 2" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 3" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 114" variable="stateAnalogOut" value="15/50*5"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 3" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 4" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 115" variable="stateAnalogOut" value="20/50*5"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If wrong modality, Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*(!handFixOn), Transition to After Ready 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending, go to Set" condition="Interval1_ending" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action type="if" tag="If idNoSet, set2_ended=1" condition="idNoSet">
                            <action type="assignment" tag="Reset set2_ended 2" variable="set2_ended" value="1"></action>
                        </action>
                        <action type="if" tag="If !idNoSet, queue set" condition="!idNoSet">
                            <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        </action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 4" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 5" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 116" variable="stateAnalogOut" value="25/50*5"></action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*(!handFixOn), Transition to After Set2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set2"></transition>
                        <transition type="conditional" tag="If wrong modality, Transition to Abort 2" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*!handFixOn, Transition to Production" condition="(idHandEye==1)*(!fixOn)+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Production"></transition>
                        <transition type="conditional" tag="If (idHandEye==0)*(!fixOn)+(idHandEye==1)*(!handFixOn), Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to No Saccade" target="No Saccade" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="(idHandEye==0)*handTimeDur+(idHandEye==1)*saccadeTimeDur" duration_units="ms"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 117" variable="stateAnalogOut" value="30/50*5"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="(idHandEye==1)*on_targ+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2)" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="(idHandEye==0)*!fixOn+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="(not used but keep) If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 118" variable="stateAnalogOut" value="35/50*5"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Increment N_complete" variable="N_complete" value="N_complete +1"></action>
                        <action type="assignment" tag="Increment localCompleteTrials" variable="localCompleteTrials" value="localCompleteTrials +1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If idNoSet, Transition to Bad" condition="idNoSet" target="Bad"></transition>
                        <transition type="conditional" tag="If correct, Transition to Reward 3" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="reward delay"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="reward delay" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start cursorMove" timer="cursorMove" timebase="" duration="dtProdRew" duration_units="ms"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 119" variable="stateAnalogOut" value="40/50*5"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to Reward" target="Reward" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 5" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 6" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1110" variable="stateAnalogOut" value="45/50*5"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="assignment" tag="Increment N_correctShortHandLeft" variable="N_correctShortHandLeft" value="N_correctShortHandLeft +(idShortLong==0)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortHandRight 2" variable="N_correctShortHandRight" value="N_correctShortHandRight +(idShortLong==0)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeLeft 3" variable="N_correctShortEyeLeft" value="N_correctShortEyeLeft +(idShortLong==0)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeRight 4" variable="N_correctShortEyeRight" value="N_correctShortEyeRight +(idShortLong==0)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandLeft 5" variable="N_correctLongHandLeft" value="N_correctLongHandLeft +(idShortLong==1)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandRight 6" variable="N_correctLongHandRight" value="N_correctLongHandRight +(idShortLong==1)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeLeft 7" variable="N_correctLongEyeLeft" value="N_correctLongEyeLeft +(idShortLong==1)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeRight 8" variable="N_correctLongEyeRight" value="N_correctLongEyeRight +(idShortLong==1)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue syncFlash" type="dequeue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1111" variable="stateAnalogOut" value="50/50*5"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1112" variable="stateAnalogOut" value="0"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to ITI2" target="ITI2" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localCompleteTrials == trialNum, Transition to Exit State System 2" condition="localCompleteTrials >= trialNum || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to Fix On" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 6" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 7" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1113" variable="stateAnalogOut" value="40/50*5"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to End Trial" target="End Trial" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue 4" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue set2 cue 6" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 19" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(ready_cue_onset_time_us-now())/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(ready_cue_onset_time_us-now())/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="if" tag="If idNoSet, increment nCorrectNoSet" condition="idNoSet">
                            <action type="assignment" tag="increment nCorrectNoSet" variable="nCorrectNoSet" value="nCorrectNoSet+1"></action>
                        </action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign stateAnalogOut 1114" variable="stateAnalogOut" value="0"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 115" type="dequeue_stimulus" stimulus="cursor"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Stop IO Device" type="stop_device_IO" device="NIDaq Device"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
        </protocol>
        <protocol tag="RSG_twoPrior_handEye_Seq_blockCoded" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink 2" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start NIDaq Device 2" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur 2" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect 2" variable="consecutiveCorrect" value="-1"></action>
            <action type="assignment" tag="Assign pstop 3" variable="pstop" value="0"></action>
            <action type="assignment" tag="Assign fix_red 5" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green 4" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue 5" variable="fix_blue" value="1"></action>
            <action type="assignment" tag="Assign trialNum" variable="trialNum" value="trialNumBlockLong"></action>
            <action tag="Queue Stimulus 4" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 5" type="update_stimulus_display"></action>
            <action type="assignment" tag="Assign amp 2" variable="amp" value="10"></action>
            <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
            <block tag="seqBlock" nsamples="10000" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="Trials longHand" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="Long/Hand"></action>
                        <action type="assignment" tag="Assign idHandEye 3" variable="idHandEye" value="0"></action>
                        <action type="assignment" tag="Assign idShortLong" variable="idShortLong" value="1"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="-dFixY"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign localCompleteTrials 2" variable="localCompleteTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlockLong" variable="trialNumBlockLong" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red 7" variable="fix_red" value="(idShortLong!=1)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Assign fix_green 6" variable="fix_green" value="idHandEye==0"></action>
                        <action type="assignment" tag="Assign fix_blue 7" variable="fix_blue" value="(idShortLong!=0)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Set handFixR to 12" variable="handFixR" value="(idShortLong!=1)||(idHandEye!=0)"></action>
                        <action type="assignment" tag="Set handFixG to 11" variable="handFixG" value="idHandEye==1"></action>
                        <action type="assignment" tag="Set handFixB to 12" variable="handFixB" value="(idShortLong!=0)||(idHandEye!=0)"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min 4" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                        <action type="assignment" tag="Select interval_max 4" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign cursorAlpha 9" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="if" tag="(disabled) If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="0==1">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="(always true) If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="1==1">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action tag="Queue syncFlash 110" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display 113" type="update_stimulus_display"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="reset syncFlash 18" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 111" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 19" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 112" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 110" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 113" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*!handFixOn, Transition to Production" condition="(idHandEye==1)*(!fixOn)+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Production"></transition>
                        <transition type="conditional" tag="If (idHandEye==0)*(!fixOn)+(idHandEye==1)*(!handFixOn), Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="(idHandEye==0)*handTimeDur+(idHandEye==1)*saccadeTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="(idHandEye==1)*on_targ+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2)" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="(idHandEye==0)*!fixOn+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="(not used but keep) If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Increment N_complete 2" variable="N_complete" value="N_complete +1"></action>
                        <action type="assignment" tag="Increment localCompleteTrials 2" variable="localCompleteTrials" value="localCompleteTrials +1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward delay" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="reward delay"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="reward delay" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start cursorMove" timer="cursorMove" timebase="" duration="dtProdRew" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to Reward" target="Reward" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 111" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 114" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="assignment" tag="Increment N_correctShortHandLeft 2" variable="N_correctShortHandLeft" value="N_correctShortHandLeft +(idShortLong==0)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortHandRight 3" variable="N_correctShortHandRight" value="N_correctShortHandRight +(idShortLong==0)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeLeft 4" variable="N_correctShortEyeLeft" value="N_correctShortEyeLeft +(idShortLong==0)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeRight 5" variable="N_correctShortEyeRight" value="N_correctShortEyeRight +(idShortLong==0)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandLeft 6" variable="N_correctLongHandLeft" value="N_correctLongHandLeft +(idShortLong==1)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandRight 7" variable="N_correctLongHandRight" value="N_correctLongHandRight +(idShortLong==1)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeLeft 8" variable="N_correctLongEyeLeft" value="N_correctLongEyeLeft +(idShortLong==1)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeRight 9" variable="N_correctLongEyeRight" value="N_correctLongEyeRight +(idShortLong==1)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue syncFlash 4" type="dequeue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localCompleteTrials == trialNumBlock, Transition to Exit State System" condition="localCompleteTrials >= trialNumBlockLong || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 112" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 115" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
                <task_system tag="Trials shortHand" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="short/Hand"></action>
                        <action type="assignment" tag="Assign idHandEye 3" variable="idHandEye" value="0"></action>
                        <action type="assignment" tag="Assign idShortLong" variable="idShortLong" value="0"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="dFixY"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign localCompleteTrials 2" variable="localCompleteTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlockLong" variable="trialNumBlockLong" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red 7" variable="fix_red" value="(idShortLong!=1)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Assign fix_green 6" variable="fix_green" value="idHandEye==0"></action>
                        <action type="assignment" tag="Assign fix_blue 7" variable="fix_blue" value="(idShortLong!=0)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Set handFixR to 12" variable="handFixR" value="(idShortLong!=1)||(idHandEye!=0)"></action>
                        <action type="assignment" tag="Set handFixG to 11" variable="handFixG" value="idHandEye==1"></action>
                        <action type="assignment" tag="Set handFixB to 12" variable="handFixB" value="(idShortLong!=0)||(idHandEye!=0)"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min 4" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                        <action type="assignment" tag="Select interval_max 4" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign cursorAlpha 9" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="if" tag="(disabled) If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="0==1">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="(always true) If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="1==1">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action tag="Queue syncFlash 116" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display 114" type="update_stimulus_display"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="reset syncFlash 114" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 117" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 115" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 118" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 116" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 119" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*!handFixOn, Transition to Production" condition="(idHandEye==1)*(!fixOn)+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Production"></transition>
                        <transition type="conditional" tag="If (idHandEye==0)*(!fixOn)+(idHandEye==1)*(!handFixOn), Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="(idHandEye==0)*handTimeDur+(idHandEye==1)*saccadeTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="(idHandEye==1)*on_targ+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2)" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="(idHandEye==0)*!fixOn+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="(not used but keep) If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Increment N_complete 2" variable="N_complete" value="N_complete +1"></action>
                        <action type="assignment" tag="Increment localCompleteTrials 2" variable="localCompleteTrials" value="localCompleteTrials +1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward delay" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="reward delay"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="reward delay" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start cursorMove" timer="cursorMove" timebase="" duration="dtProdRew" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to Reward" target="Reward" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 117" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 1110" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="assignment" tag="Increment N_correctShortHandLeft 2" variable="N_correctShortHandLeft" value="N_correctShortHandLeft +(idShortLong==0)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortHandRight 3" variable="N_correctShortHandRight" value="N_correctShortHandRight +(idShortLong==0)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeLeft 4" variable="N_correctShortEyeLeft" value="N_correctShortEyeLeft +(idShortLong==0)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeRight 5" variable="N_correctShortEyeRight" value="N_correctShortEyeRight +(idShortLong==0)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandLeft 6" variable="N_correctLongHandLeft" value="N_correctLongHandLeft +(idShortLong==1)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandRight 7" variable="N_correctLongHandRight" value="N_correctLongHandRight +(idShortLong==1)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeLeft 8" variable="N_correctLongEyeLeft" value="N_correctLongEyeLeft +(idShortLong==1)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeRight 9" variable="N_correctLongEyeRight" value="N_correctLongEyeRight +(idShortLong==1)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue syncFlash 5" type="dequeue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localCompleteTrials == trialNumBlock, Transition to Exit State System" condition="localCompleteTrials >= trialNumBlockLong || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="reset syncFlash 118" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 1111" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
                <task_system tag="Trials shortEye" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="short/eye"></action>
                        <action type="assignment" tag="Assign idHandEye 3" variable="idHandEye" value="1"></action>
                        <action type="assignment" tag="Assign idShortLong" variable="idShortLong" value="0"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="dFixY"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign localCompleteTrials 2" variable="localCompleteTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlockLong" variable="trialNumBlockLong" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red 7" variable="fix_red" value="(idShortLong!=1)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Assign fix_green 6" variable="fix_green" value="idHandEye==0"></action>
                        <action type="assignment" tag="Assign fix_blue 7" variable="fix_blue" value="(idShortLong!=0)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Set handFixR to 12" variable="handFixR" value="(idShortLong!=1)||(idHandEye!=0)"></action>
                        <action type="assignment" tag="Set handFixG to 11" variable="handFixG" value="idHandEye==1"></action>
                        <action type="assignment" tag="Set handFixB to 12" variable="handFixB" value="(idShortLong!=0)||(idHandEye!=0)"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min 4" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                        <action type="assignment" tag="Select interval_max 4" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign cursorAlpha 9" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="if" tag="(disabled) If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="0==1">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="(always true) If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="1==1">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action tag="Queue syncFlash 1112" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display 115" type="update_stimulus_display"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="reset syncFlash 1110" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 1113" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 1111" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 1114" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 1112" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 1115" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*!handFixOn, Transition to Production" condition="(idHandEye==1)*(!fixOn)+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Production"></transition>
                        <transition type="conditional" tag="If (idHandEye==0)*(!fixOn)+(idHandEye==1)*(!handFixOn), Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="(idHandEye==0)*handTimeDur+(idHandEye==1)*saccadeTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="(idHandEye==1)*on_targ+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2)" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="(idHandEye==0)*!fixOn+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="(not used but keep) If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Increment N_complete 2" variable="N_complete" value="N_complete +1"></action>
                        <action type="assignment" tag="Increment localCompleteTrials 2" variable="localCompleteTrials" value="localCompleteTrials +1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward delay" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="reward delay"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="reward delay" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start cursorMove" timer="cursorMove" timebase="" duration="dtProdRew" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to Reward" target="Reward" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 1113" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 1116" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="assignment" tag="Increment N_correctShortHandLeft 2" variable="N_correctShortHandLeft" value="N_correctShortHandLeft +(idShortLong==0)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortHandRight 3" variable="N_correctShortHandRight" value="N_correctShortHandRight +(idShortLong==0)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeLeft 4" variable="N_correctShortEyeLeft" value="N_correctShortEyeLeft +(idShortLong==0)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeRight 5" variable="N_correctShortEyeRight" value="N_correctShortEyeRight +(idShortLong==0)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandLeft 6" variable="N_correctLongHandLeft" value="N_correctLongHandLeft +(idShortLong==1)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandRight 7" variable="N_correctLongHandRight" value="N_correctLongHandRight +(idShortLong==1)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeLeft 8" variable="N_correctLongEyeLeft" value="N_correctLongEyeLeft +(idShortLong==1)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeRight 9" variable="N_correctLongEyeRight" value="N_correctLongEyeRight +(idShortLong==1)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue syncFlash 6" type="dequeue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localCompleteTrials == trialNumBlock, Transition to Exit State System" condition="localCompleteTrials >= trialNumBlockLong || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 1114" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 1117" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
                <task_system tag="Trials longEye" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="Long/Eye"></action>
                        <action type="assignment" tag="Assign idHandEye 3" variable="idHandEye" value="1"></action>
                        <action type="assignment" tag="Assign idShortLong" variable="idShortLong" value="1"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="-dFixY"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign localCompleteTrials 2" variable="localCompleteTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlockLong" variable="trialNumBlockLong" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red 7" variable="fix_red" value="(idShortLong!=1)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Assign fix_green 6" variable="fix_green" value="idHandEye==0"></action>
                        <action type="assignment" tag="Assign fix_blue 7" variable="fix_blue" value="(idShortLong!=0)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Set handFixR to 12" variable="handFixR" value="(idShortLong!=1)||(idHandEye!=0)"></action>
                        <action type="assignment" tag="Set handFixG to 11" variable="handFixG" value="idHandEye==1"></action>
                        <action type="assignment" tag="Set handFixB to 12" variable="handFixB" value="(idShortLong!=0)||(idHandEye!=0)"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min 4" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                        <action type="assignment" tag="Select interval_max 4" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign cursorAlpha 9" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="if" tag="(disabled) If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="0==1">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="(always true) If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="1==1">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action tag="Queue syncFlash 1118" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display 116" type="update_stimulus_display"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="reset syncFlash 1116" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 1119" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 1117" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 11110" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 1118" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 11111" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*!handFixOn, Transition to Production" condition="(idHandEye==1)*(!fixOn)+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Production"></transition>
                        <transition type="conditional" tag="If (idHandEye==0)*(!fixOn)+(idHandEye==1)*(!handFixOn), Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="(idHandEye==0)*handTimeDur+(idHandEye==1)*saccadeTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="(idHandEye==1)*on_targ+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2)" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="(idHandEye==0)*!fixOn+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="(not used but keep) If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Increment N_complete 2" variable="N_complete" value="N_complete +1"></action>
                        <action type="assignment" tag="Increment localCompleteTrials 2" variable="localCompleteTrials" value="localCompleteTrials +1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward delay" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="reward delay"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="reward delay" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start cursorMove" timer="cursorMove" timebase="" duration="dtProdRew" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to Reward" target="Reward" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 1119" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 11112" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="assignment" tag="Increment N_correctShortHandLeft 2" variable="N_correctShortHandLeft" value="N_correctShortHandLeft +(idShortLong==0)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortHandRight 3" variable="N_correctShortHandRight" value="N_correctShortHandRight +(idShortLong==0)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeLeft 4" variable="N_correctShortEyeLeft" value="N_correctShortEyeLeft +(idShortLong==0)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeRight 5" variable="N_correctShortEyeRight" value="N_correctShortEyeRight +(idShortLong==0)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandLeft 6" variable="N_correctLongHandLeft" value="N_correctLongHandLeft +(idShortLong==1)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandRight 7" variable="N_correctLongHandRight" value="N_correctLongHandRight +(idShortLong==1)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeLeft 8" variable="N_correctLongEyeLeft" value="N_correctLongEyeLeft +(idShortLong==1)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeRight 9" variable="N_correctLongEyeRight" value="N_correctLongEyeRight +(idShortLong==1)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue syncFlash 7" type="dequeue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localCompleteTrials == trialNumBlock, Transition to Exit State System" condition="localCompleteTrials >= trialNumBlockLong || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 11110" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 11113" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
        </protocol>
        <protocol tag="RSG_twoPrior_handEye_fullRandom_blockCoded" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink 2" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start NIDaq Device 2" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur 2" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect 2" variable="consecutiveCorrect" value="-1"></action>
            <action type="assignment" tag="Assign pstop 3" variable="pstop" value="0"></action>
            <action type="assignment" tag="Assign fix_red 5" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green 4" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue 5" variable="fix_blue" value="1"></action>
            <action type="assignment" tag="Assign trialNum" variable="trialNum" value="trialNumBlockLong"></action>
            <action tag="Queue Stimulus 4" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 5" type="update_stimulus_display"></action>
            <action type="assignment" tag="Assign amp 2" variable="amp" value="10"></action>
            <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
            <block tag="fullRandomBlock" nsamples="10000" sampling_method="cycles" selection="random_without_replacement" interruptible="YES">
                <task_system tag="Trials longHand2" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="Long/Hand"></action>
                        <action type="assignment" tag="Assign idHandEye 3" variable="idHandEye" value="0"></action>
                        <action type="assignment" tag="Assign idShortLong" variable="idShortLong" value="1"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="-dFixY"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign localCompleteTrials 2" variable="localCompleteTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlockLong" variable="trialNumBlockLong" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red 7" variable="fix_red" value="(idShortLong!=1)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Assign fix_green 6" variable="fix_green" value="idHandEye==0"></action>
                        <action type="assignment" tag="Assign fix_blue 7" variable="fix_blue" value="(idShortLong!=0)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Set handFixR to 12" variable="handFixR" value="(idShortLong!=1)||(idHandEye!=0)"></action>
                        <action type="assignment" tag="Set handFixG to 11" variable="handFixG" value="idHandEye==1"></action>
                        <action type="assignment" tag="Set handFixB to 12" variable="handFixB" value="(idShortLong!=0)||(idHandEye!=0)"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min 4" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                        <action type="assignment" tag="Select interval_max 4" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign cursorAlpha 9" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="if" tag="(disabled) If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="0==1">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="(always true) If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="1==1">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action tag="Queue syncFlash 11114" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display 117" type="update_stimulus_display"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="reset syncFlash 11112" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 11115" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 11113" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 11116" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 11114" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 11117" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*!handFixOn, Transition to Production" condition="(idHandEye==1)*(!fixOn)+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Production"></transition>
                        <transition type="conditional" tag="If (idHandEye==0)*(!fixOn)+(idHandEye==1)*(!handFixOn), Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="(idHandEye==0)*handTimeDur+(idHandEye==1)*saccadeTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="(idHandEye==1)*on_targ+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2)" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="(idHandEye==0)*!fixOn+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="(not used but keep) If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Increment N_complete 2" variable="N_complete" value="N_complete +1"></action>
                        <action type="assignment" tag="Increment localCompleteTrials 2" variable="localCompleteTrials" value="localCompleteTrials +1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward delay" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="reward delay"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="reward delay" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start cursorMove" timer="cursorMove" timebase="" duration="dtProdRew" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to Reward" target="Reward" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 11115" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 11118" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="assignment" tag="Increment N_correctShortHandLeft 2" variable="N_correctShortHandLeft" value="N_correctShortHandLeft +(idShortLong==0)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortHandRight 3" variable="N_correctShortHandRight" value="N_correctShortHandRight +(idShortLong==0)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeLeft 4" variable="N_correctShortEyeLeft" value="N_correctShortEyeLeft +(idShortLong==0)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeRight 5" variable="N_correctShortEyeRight" value="N_correctShortEyeRight +(idShortLong==0)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandLeft 6" variable="N_correctLongHandLeft" value="N_correctLongHandLeft +(idShortLong==1)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandRight 7" variable="N_correctLongHandRight" value="N_correctLongHandRight +(idShortLong==1)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeLeft 8" variable="N_correctLongEyeLeft" value="N_correctLongEyeLeft +(idShortLong==1)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeRight 9" variable="N_correctLongEyeRight" value="N_correctLongEyeRight +(idShortLong==1)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue syncFlash 8" type="dequeue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localCompleteTrials == trialNumBlock, Transition to Exit State System" condition="localCompleteTrials >= trialNumBlockLong || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 11116" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 11119" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
                <task_system tag="Trials shortHand2" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="short/Hand"></action>
                        <action type="assignment" tag="Assign idHandEye 3" variable="idHandEye" value="0"></action>
                        <action type="assignment" tag="Assign idShortLong" variable="idShortLong" value="0"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="dFixY"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign localCompleteTrials 2" variable="localCompleteTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlockLong" variable="trialNumBlockLong" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red 7" variable="fix_red" value="(idShortLong!=1)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Assign fix_green 6" variable="fix_green" value="idHandEye==0"></action>
                        <action type="assignment" tag="Assign fix_blue 7" variable="fix_blue" value="(idShortLong!=0)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Set handFixR to 12" variable="handFixR" value="(idShortLong!=1)||(idHandEye!=0)"></action>
                        <action type="assignment" tag="Set handFixG to 11" variable="handFixG" value="idHandEye==1"></action>
                        <action type="assignment" tag="Set handFixB to 12" variable="handFixB" value="(idShortLong!=0)||(idHandEye!=0)"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min 4" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                        <action type="assignment" tag="Select interval_max 4" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign cursorAlpha 9" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="if" tag="(disabled) If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="0==1">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="(always true) If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="1==1">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action tag="Queue syncFlash 111110" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display 118" type="update_stimulus_display"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 11118" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 111111" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 11119" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 111112" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*!handFixOn, Transition to Production" condition="(idHandEye==1)*(!fixOn)+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Production"></transition>
                        <transition type="conditional" tag="If (idHandEye==0)*(!fixOn)+(idHandEye==1)*(!handFixOn), Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="(idHandEye==0)*handTimeDur+(idHandEye==1)*saccadeTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="(idHandEye==1)*on_targ+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2)" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="(idHandEye==0)*!fixOn+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="(not used but keep) If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Increment N_complete 2" variable="N_complete" value="N_complete +1"></action>
                        <action type="assignment" tag="Increment localCompleteTrials 2" variable="localCompleteTrials" value="localCompleteTrials +1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward delay" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="reward delay"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="reward delay" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start cursorMove" timer="cursorMove" timebase="" duration="dtProdRew" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to Reward" target="Reward" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 111110" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 111113" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="assignment" tag="Increment N_correctShortHandLeft 2" variable="N_correctShortHandLeft" value="N_correctShortHandLeft +(idShortLong==0)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortHandRight 3" variable="N_correctShortHandRight" value="N_correctShortHandRight +(idShortLong==0)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeLeft 4" variable="N_correctShortEyeLeft" value="N_correctShortEyeLeft +(idShortLong==0)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeRight 5" variable="N_correctShortEyeRight" value="N_correctShortEyeRight +(idShortLong==0)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandLeft 6" variable="N_correctLongHandLeft" value="N_correctLongHandLeft +(idShortLong==1)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandRight 7" variable="N_correctLongHandRight" value="N_correctLongHandRight +(idShortLong==1)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeLeft 8" variable="N_correctLongEyeLeft" value="N_correctLongEyeLeft +(idShortLong==1)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeRight 9" variable="N_correctLongEyeRight" value="N_correctLongEyeRight +(idShortLong==1)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue syncFlash 9" type="dequeue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localCompleteTrials == trialNumBlock, Transition to Exit State System" condition="localCompleteTrials >= trialNumBlockLong || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="reset syncFlash 111111" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 111114" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
                <task_system tag="Trials shortEye2" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="short/eye"></action>
                        <action type="assignment" tag="Assign idHandEye 3" variable="idHandEye" value="1"></action>
                        <action type="assignment" tag="Assign idShortLong" variable="idShortLong" value="0"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="dFixY"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign localCompleteTrials 2" variable="localCompleteTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlockLong" variable="trialNumBlockLong" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red 7" variable="fix_red" value="(idShortLong!=1)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Assign fix_green 6" variable="fix_green" value="idHandEye==0"></action>
                        <action type="assignment" tag="Assign fix_blue 7" variable="fix_blue" value="(idShortLong!=0)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Set handFixR to 12" variable="handFixR" value="(idShortLong!=1)||(idHandEye!=0)"></action>
                        <action type="assignment" tag="Set handFixG to 11" variable="handFixG" value="idHandEye==1"></action>
                        <action type="assignment" tag="Set handFixB to 12" variable="handFixB" value="(idShortLong!=0)||(idHandEye!=0)"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min 4" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                        <action type="assignment" tag="Select interval_max 4" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign cursorAlpha 9" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="if" tag="(disabled) If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="0==1">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="(always true) If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="1==1">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action tag="Queue syncFlash 111115" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display 119" type="update_stimulus_display"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="reset syncFlash 111113" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 111116" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 111114" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 111117" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 111115" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 111118" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*!handFixOn, Transition to Production" condition="(idHandEye==1)*(!fixOn)+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Production"></transition>
                        <transition type="conditional" tag="If (idHandEye==0)*(!fixOn)+(idHandEye==1)*(!handFixOn), Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="(idHandEye==0)*handTimeDur+(idHandEye==1)*saccadeTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="(idHandEye==1)*on_targ+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2)" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="(idHandEye==0)*!fixOn+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="(not used but keep) If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Increment N_complete 2" variable="N_complete" value="N_complete +1"></action>
                        <action type="assignment" tag="Increment localCompleteTrials 2" variable="localCompleteTrials" value="localCompleteTrials +1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward delay" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="reward delay"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="reward delay" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start cursorMove" timer="cursorMove" timebase="" duration="dtProdRew" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to Reward" target="Reward" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 111116" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 111119" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="assignment" tag="Increment N_correctShortHandLeft 2" variable="N_correctShortHandLeft" value="N_correctShortHandLeft +(idShortLong==0)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortHandRight 3" variable="N_correctShortHandRight" value="N_correctShortHandRight +(idShortLong==0)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeLeft 4" variable="N_correctShortEyeLeft" value="N_correctShortEyeLeft +(idShortLong==0)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeRight 5" variable="N_correctShortEyeRight" value="N_correctShortEyeRight +(idShortLong==0)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandLeft 6" variable="N_correctLongHandLeft" value="N_correctLongHandLeft +(idShortLong==1)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandRight 7" variable="N_correctLongHandRight" value="N_correctLongHandRight +(idShortLong==1)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeLeft 8" variable="N_correctLongEyeLeft" value="N_correctLongEyeLeft +(idShortLong==1)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeRight 9" variable="N_correctLongEyeRight" value="N_correctLongEyeRight +(idShortLong==1)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue syncFlash 10" type="dequeue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localCompleteTrials == trialNumBlock, Transition to Exit State System" condition="localCompleteTrials >= trialNumBlockLong || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 111117" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 1111110" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
                <task_system tag="Trials longEye2" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="Long/Eye"></action>
                        <action type="assignment" tag="Assign idHandEye 3" variable="idHandEye" value="1"></action>
                        <action type="assignment" tag="Assign idShortLong" variable="idShortLong" value="1"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="-dFixY"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign localCompleteTrials 2" variable="localCompleteTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlockLong" variable="trialNumBlockLong" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="(idShortLong==0)*itiShort+(idShortLong==1)*itiLong"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red 7" variable="fix_red" value="(idShortLong!=1)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Assign fix_green 6" variable="fix_green" value="idHandEye==0"></action>
                        <action type="assignment" tag="Assign fix_blue 7" variable="fix_blue" value="(idShortLong!=0)||(idHandEye!=1)"></action>
                        <action type="assignment" tag="Set handFixR to 12" variable="handFixR" value="(idShortLong!=1)||(idHandEye!=0)"></action>
                        <action type="assignment" tag="Set handFixG to 11" variable="handFixG" value="idHandEye==1"></action>
                        <action type="assignment" tag="Set handFixB to 12" variable="handFixB" value="(idShortLong!=0)||(idHandEye!=0)"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min 4" variable="interval_min" value="(idShortLong==0)*interval_minShort+(idShortLong==1)*interval_minLong"></action>
                        <action type="assignment" tag="Select interval_max 4" variable="interval_max" value="(idShortLong==0)*interval_maxShort+(idShortLong==1)*interval_maxLong"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign cursorAlpha 9" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="if" tag="(disabled) If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="0==1">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="(always true) If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="1==1">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action tag="Queue syncFlash 1111111" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display 1110" type="update_stimulus_display"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="reset syncFlash 111118" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 1111112" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 111119" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 1111113" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="reset syncFlash 1111110" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 1111114" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If (idHandEye==1)*(!fixOn)+(idHandEye==0)*!handFixOn, Transition to Production" condition="(idHandEye==1)*(!fixOn)+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Production"></transition>
                        <transition type="conditional" tag="If (idHandEye==0)*(!fixOn)+(idHandEye==1)*(!handFixOn), Transition to Abort" condition="(idHandEye==0)*(!fixOn)+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="(idHandEye==0)*handTimeDur+(idHandEye==1)*saccadeTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="(idHandEye==1)*on_targ+(idHandEye==0)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2)" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="(idHandEye==0)*!fixOn+(idHandEye==1)*(abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2)" target="Abort"></transition>
                        <transition type="conditional" tag="(not used but keep) If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Increment N_complete 2" variable="N_complete" value="N_complete +1"></action>
                        <action type="assignment" tag="Increment localCompleteTrials 2" variable="localCompleteTrials" value="localCompleteTrials +1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward delay" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="reward delay"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="reward delay" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start cursorMove" timer="cursorMove" timebase="" duration="dtProdRew" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to Reward" target="Reward" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 1111111" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 1111115" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="assignment" tag="Increment N_correctShortHandLeft 2" variable="N_correctShortHandLeft" value="N_correctShortHandLeft +(idShortLong==0)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortHandRight 3" variable="N_correctShortHandRight" value="N_correctShortHandRight +(idShortLong==0)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeLeft 4" variable="N_correctShortEyeLeft" value="N_correctShortEyeLeft +(idShortLong==0)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctShortEyeRight 5" variable="N_correctShortEyeRight" value="N_correctShortEyeRight +(idShortLong==0)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandLeft 6" variable="N_correctLongHandLeft" value="N_correctLongHandLeft +(idShortLong==1)*(idHandEye==0)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongHandRight 7" variable="N_correctLongHandRight" value="N_correctLongHandRight +(idShortLong==1)*(idHandEye==0)*(theta&lt;90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeLeft 8" variable="N_correctLongEyeLeft" value="N_correctLongEyeLeft +(idShortLong==1)*(idHandEye==1)*(theta>90)"></action>
                        <action type="assignment" tag="Increment N_correctLongEyeRight 9" variable="N_correctLongEyeRight" value="N_correctLongEyeRight +(idShortLong==1)*(idHandEye==1)*(theta&lt;90)"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue syncFlash 11" type="dequeue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localCompleteTrials == trialNumBlock, Transition to Exit State System" condition="localCompleteTrials >= trialNumBlockLong || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="reset syncFlash 1111112" type="stop_dynamic_stimulus" stimulus="syncFlash"></action>
                        <action tag="Queue syncFlash 1111116" type="queue_stimulus" stimulus="syncFlash"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
        </protocol>
        <protocol tag="Fixation+Distractor" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start NIDaq Device" type="start_device_IO" device="NIDaq Device"></action>
            <action tag="Start Eyelink" type="start_device_IO" device="Eyelink 1000"></action>
            <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
            <action tag="Queue Stimulus 2" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 3" type="update_stimulus_display"></action>
            <task_system tag="Trials" interruptible="YES">
                <task_system_state tag="Initial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                    <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Go to Exit" type="direct" target="Trial Start"></transition>
                </task_system_state>
                <task_system_state tag="Fix On" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
                    <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
                    <action type="if_else" tag="If/Else">
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="if" tag="Else, Select theta randomly" condition="1">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                        </action>
                    </action>
                    <action type="assignment" tag="Assign distractor_x" variable="distractor_x" value="amp*cos(theta*pi()/180)"></action>
                    <action type="assignment" tag="Assign distractor_y" variable="distractor_y" value="amp*sin(theta*pi()/180)"></action>
                    <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                    <action type="if" tag="Conditionally Execute Actions" condition="DistractorSimultaneous">
                        <action tag="Live Queue Distractor" type="live_queue_stimulus" stimulus="Distractor"></action>
                    </action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn, Transition to Trial Start" condition="fixOn" target="Trial Start"></transition>
                    <transition type="timer_expired" tag="If fixWait Expired, Transition to Failure to fixate" target="Failure to fixate" timer="fixWait"></transition>
                </task_system_state>
                <task_system_state tag="Trial Start" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report fixation acquired" message="Fixation acquired."></action>
                    <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                    <action type="assignment" tag="Assign pursuitTheta" variable="pursuitTheta" value="pursuitTheta"></action>
                    <action type="assignment" tag="Assign distractorOnset_time" variable="distractorOnset_time" value="-distractorOnset_mu*logn(rand(0,1)) + distractorOnset_min"></action>
                    <action type="start_timer" tag="Start DistractorWait" timer="DistractorWait" timebase="" duration="distractorOnset_time" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn, Transition to Bad" condition="!fixOn" target="Bad"></transition>
                    <transition type="timer_expired" tag="If HoldFix Expired, Transition to DistractorOn" target="DistractorOn" timer="DistractorWait"></transition>
                </task_system_state>
                <task_system_state tag="DistractorOn" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Live Queue Distractor" type="live_queue_stimulus" stimulus="Distractor"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign distractorOn" variable="distractorOn" value="1"></action>
                    <action type="assignment" tag="Assign distractorTime" variable="distractorTime" value="-distractorTime_mu*logn(rand(0,1)) + distractorTime_min"></action>
                    <action type="start_timer" tag="Start DistractorTime" timer="DistractorTime" timebase="" duration="distractorTime" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn, Transition to Bad" condition="!fixOn" target="Bad"></transition>
                    <transition type="timer_expired" tag="If DistractorTime Expired, Transition to DistractorOff" target="DistractorOff" timer="DistractorTime"></transition>
                </task_system_state>
                <task_system_state tag="DistractorOff" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Distractor" type="dequeue_stimulus" stimulus="Distractor"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign timeRemaining" variable="timeRemaining" value="max(0,trialDuration-distractorOnset_time - distractorTime)"></action>
                    <action type="start_timer" tag="Start RemainingTime" timer="RemainingTime" timebase="" duration="timeRemaining" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn, Transition to Bad" condition="!fixOn" target="Bad"></transition>
                    <transition type="timer_expired" tag="If RemainingTime Expired, Transition to Reward" target="Reward" timer="RemainingTime"></transition>
                </task_system_state>
                <task_system_state tag="Reward" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report success" message="Success!"></action>
                    <action type="assignment" tag="Assign fix_red" variable="fix_red" value="0"></action>
                    <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="0"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                    <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (consecutiveCorrect-1)*dbonus)"></action>
                    <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="(rewardDur+bonusRewDur)*1000"></action>
                    <action type="assignment" tag="Increment fix_dis_correct" variable="fix_dis_correct" value="fix_dis_correct+1"></action>
                    <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="rewardDur+bonusRewDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                </task_system_state>
                <task_system_state tag="End Trial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report Ending Trial" message="Ending Trial."></action>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment fix_dis_trials" variable="fix_dis_trials" value="fix_dis_trials+1"></action>
                    <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                    <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If localTrials >= trialNum, Transition to Exit Fixation Distractor System" condition="localTrials >= trialNum" target="Exit Fixation Distractor System"></transition>
                    <transition type="conditional" tag="If pstop, Transition to Exit Fixation Distractor System" condition="pstop" target="Exit Fixation Distractor System"></transition>
                    <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                </task_system_state>
                <task_system_state tag="ITI" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report ITI" message="ITI."></action>
                    <action type="start_timer" tag="Start fix_dis_ITI" timer="fix_dis_ITI" timebase="" duration="fix_dis_ITI_Dur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If fix_pur_ITI Expired, Transition to Fix On" target="Fix On" timer="fix_dis_ITI"></transition>
                </task_system_state>
                <task_system_state tag="Bad" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report failure" message="Trial Failed."></action>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue Distractor" type="dequeue_stimulus" stimulus="Distractor"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                    <action type="start_timer" tag="Start fix_pur_timeout" timer="fix_pur_timeout" timebase="" duration="fix_pur_timeoutDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If fix_pur_timeout Expired, Transition to End Trial" target="End Trial" timer="fix_pur_timeout"></transition>
                </task_system_state>
                <task_system_state tag="Failure to fixate" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report Failure to fixate" message="Failure to fixate."></action>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue Distractor" type="dequeue_stimulus" stimulus="Distractor"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                </task_system_state>
                <task_system_state tag="Exit Fixation Distractor System" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Return to parent task system" type="yield"></transition>
                </task_system_state>
            </task_system>
        </protocol>
        <protocol tag="FixationDistractor+OverlapSaccade" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start NIDaq Device" type="start_device_IO" device="NIDaq Device"></action>
            <action tag="Start Eyelink" type="start_device_IO" device="Eyelink 1000"></action>
            <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
            <action type="assignment" tag="Assign pstop 2" variable="pstop" value="0"></action>
            <action type="assignment" tag="Assign fix_red 2" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green 2" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue 2" variable="fix_blue" value="1"></action>
            <action tag="Queue Stimulus 2" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 3" type="update_stimulus_display"></action>
            <task_system tag="New Task System" interruptible="YES">
                <task_system_state tag="Begin State System" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign idDistOverlap" variable="idDistOverlap" value="disc_rand(0,1)"></action>
                    <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If idDistOverlap==0 (dist), Transition to ..." condition="idDistOverlap==0" target="Fix On"></transition>
                    <transition type="conditional" tag="If idDistOverlap==1 (overlap), Transition to ... 2" condition="idDistOverlap==1" target="Initial2"></transition>
                </task_system_state>
                <task_system_state tag="Exit Fixation Distractor System" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Return to parent task system" type="yield"></transition>
                </task_system_state>
                <task_system_state tag="Initial2" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                    <action type="assignment" tag="Assign fix_dur_mean" variable="fix_dur_mean" value="distractorOnset_mu"></action>
                    <action type="assignment" tag="Assign target_dur_mean" variable="target_dur_mean" value="distractorTime_mu"></action>
                    <action type="assignment" tag="Assign target_dur_min" variable="target_dur_min" value="distractorTime_min"></action>
                    <action type="assignment" tag="Assign fix_dur_min" variable="fix_dur_min" value="distractorOnset_min"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Go to Fix On2" type="direct" target="Fix On2"></transition>
                </task_system_state>
                <task_system_state tag="Fix On2" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                    <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                    <action type="assignment" tag="Assign fix_red 4" variable="fix_red" value="1"></action>
                    <action type="assignment" tag="Assign fix_blue 4" variable="fix_blue" value="1"></action>
                    <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                    <action type="report" tag="Report fix on" message="Fixation on."></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn, Transition to Trial Start2" condition="fixOn" target="Trial Start2"></transition>
                    <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix2" target="No Fix2" timer="fixWait"></transition>
                </task_system_state>
                <task_system_state tag="Grace2" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn, Transition to No Fix2" condition="!fixOn" target="No Fix2"></transition>
                    <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start2" target="Trial Start2" timer="GraceTime"></transition>
                </task_system_state>
                <task_system_state tag="Trial Start2" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                    <action type="if" tag="If override, use theta_override" condition="override">
                        <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                    </action>
                    <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                    <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                    <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn, Transition to Bad2" condition="!fixOn" target="Bad2"></transition>
                    <transition type="direct" tag="Always Go to Fix Time2" target="Fix Time2"></transition>
                </task_system_state>
                <task_system_state tag="Fix Time2" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                    <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                    <action type="report" tag="Report fixating" message="Fixating."></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to Bad2" condition="!fixOn" target="Bad2"></transition>
                    <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On2" target="Target On2" timer="fix_time"></transition>
                </task_system_state>
                <task_system_state tag="Target On2" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                    <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to Bad2" condition="!fixOn" target="Bad2"></transition>
                    <transition type="timer_expired" tag="If targetTime Expired, Transition to Fix Off2" target="Fix Off2" timer="targetTime"></transition>
                </task_system_state>
                <task_system_state tag="Fix Off2" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="saccadeTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If on_targ, Transition to Reward2" condition="on_targ" target="Reward2"></transition>
                    <transition type="timer_expired" tag="If saccadeTime Expired, Transition to Bad2" target="Bad2" timer="saccadeTime"></transition>
                </task_system_state>
                <task_system_state tag="Reward2" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report success" message="Success!"></action>
                    <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                    <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                    <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                    <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (consecutiveCorrect-1)*dbonus)"></action>
                    <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="(rewardDur+bonusRewDur)*1000"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_correct" variable="OverlapSaccade_correct" value="OverlapSaccade_correct+1"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="rewardDur+bonusRewDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial2" target="End Trial2" timer="GreenTime"></transition>
                </task_system_state>
                <task_system_state tag="End Trial2" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_trials" variable="OverlapSaccade_trials" value="OverlapSaccade_trials+1"></action>
                    <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                    <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If localTrials == trialNum, Transition to Exit State System2" condition="localTrials >= trialNum || pstop" target="Exit State System2"></transition>
                    <transition type="direct" tag="Always Go to ITI2" target="ITI2"></transition>
                </task_system_state>
                <task_system_state tag="ITI2" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On2" target="Begin State System" timer="ITI"></transition>
                </task_system_state>
                <task_system_state tag="Bad2" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                    <action type="report" tag="Report failure" message="Failure."></action>
                    <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial2" target="End Trial2" timer="Timeout"></transition>
                </task_system_state>
                <task_system_state tag="No Fix2" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                    <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On2" target="Fix On2" timer="NoFixWait"></transition>
                </task_system_state>
                <task_system_state tag="Exit State System2" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Return to parent task system" type="yield"></transition>
                </task_system_state>
                <task_system_state tag="Fix On" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
                    <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
                    <action type="if_else" tag="If/Else">
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="if" tag="Else, Select theta randomly" condition="1">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                        </action>
                    </action>
                    <action type="assignment" tag="Assign distractor_x" variable="distractor_x" value="amp*cos(theta*pi()/180)"></action>
                    <action type="assignment" tag="Assign distractor_y" variable="distractor_y" value="amp*sin(theta*pi()/180)"></action>
                    <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                    <action type="if" tag="Conditionally Execute Actions" condition="DistractorSimultaneous">
                        <action tag="Live Queue Distractor" type="live_queue_stimulus" stimulus="Distractor"></action>
                    </action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn, Transition to Trial Start" condition="fixOn" target="Trial Start"></transition>
                    <transition type="timer_expired" tag="If fixWait Expired, Transition to Failure to fixate" target="Failure to fixate" timer="fixWait"></transition>
                </task_system_state>
                <task_system_state tag="Trial Start" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report fixation acquired" message="Fixation acquired."></action>
                    <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                    <action type="assignment" tag="Assign pursuitTheta" variable="pursuitTheta" value="pursuitTheta"></action>
                    <action type="assignment" tag="Assign distractorOnset_time" variable="distractorOnset_time" value="-distractorOnset_mu*logn(rand(0,1)) + distractorOnset_min"></action>
                    <action type="start_timer" tag="Start DistractorWait" timer="DistractorWait" timebase="" duration="distractorOnset_time" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn, Transition to Bad" condition="!fixOn" target="Bad"></transition>
                    <transition type="timer_expired" tag="If HoldFix Expired, Transition to DistractorOn" target="DistractorOn" timer="DistractorWait"></transition>
                </task_system_state>
                <task_system_state tag="DistractorOn" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Live Queue Distractor" type="live_queue_stimulus" stimulus="Distractor"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign distractorOn" variable="distractorOn" value="1"></action>
                    <action type="assignment" tag="Assign distractorTime" variable="distractorTime" value="-distractorTime_mu*logn(rand(0,1)) + distractorTime_min"></action>
                    <action type="start_timer" tag="Start DistractorTime" timer="DistractorTime" timebase="" duration="distractorTime" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn, Transition to Bad" condition="!fixOn" target="Bad"></transition>
                    <transition type="timer_expired" tag="If DistractorTime Expired, Transition to DistractorOff" target="DistractorOff" timer="DistractorTime"></transition>
                </task_system_state>
                <task_system_state tag="DistractorOff" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Distractor" type="dequeue_stimulus" stimulus="Distractor"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign timeRemaining" variable="timeRemaining" value="max(0,trialDuration-distractorOnset_time - distractorTime)"></action>
                    <action type="start_timer" tag="Start RemainingTime" timer="RemainingTime" timebase="" duration="timeRemaining" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn, Transition to Bad" condition="!fixOn" target="Bad"></transition>
                    <transition type="timer_expired" tag="If RemainingTime Expired, Transition to Reward" target="Reward" timer="RemainingTime"></transition>
                </task_system_state>
                <task_system_state tag="Reward" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report success" message="Success!"></action>
                    <action type="assignment" tag="Assign fix_red" variable="fix_red" value="0"></action>
                    <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="0"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                    <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (consecutiveCorrect-1)*dbonus)"></action>
                    <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="(rewardDur+bonusRewDur)*1000"></action>
                    <action type="assignment" tag="Increment fix_dis_correct" variable="fix_dis_correct" value="fix_dis_correct+1"></action>
                    <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="rewardDur+bonusRewDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                </task_system_state>
                <task_system_state tag="End Trial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report Ending Trial" message="Ending Trial."></action>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment fix_dis_trials" variable="fix_dis_trials" value="fix_dis_trials+1"></action>
                    <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                    <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If localTrials >= trialNum, Transition to Exit Fixation Distractor System" condition="localTrials >= trialNum" target="Exit Fixation Distractor System"></transition>
                    <transition type="conditional" tag="If pstop, Transition to Exit Fixation Distractor System" condition="pstop" target="Exit Fixation Distractor System"></transition>
                    <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                </task_system_state>
                <task_system_state tag="ITI" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report ITI" message="ITI."></action>
                    <action type="start_timer" tag="Start fix_dis_ITI" timer="fix_dis_ITI" timebase="" duration="fix_dis_ITI_Dur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If fix_pur_ITI Expired, Transition to Fix On" target="Begin State System" timer="fix_dis_ITI"></transition>
                </task_system_state>
                <task_system_state tag="Bad" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report failure" message="Trial Failed."></action>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue Distractor" type="dequeue_stimulus" stimulus="Distractor"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                    <action type="start_timer" tag="Start fix_pur_timeout" timer="fix_pur_timeout" timebase="" duration="fix_pur_timeoutDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If fix_pur_timeout Expired, Transition to End Trial" target="End Trial" timer="fix_pur_timeout"></transition>
                </task_system_state>
                <task_system_state tag="Failure to fixate" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report Failure to fixate" message="Failure to fixate."></action>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue Distractor" type="dequeue_stimulus" stimulus="Distractor"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                </task_system_state>
            </task_system>
        </protocol>
        <protocol tag="Fixation" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start NIDaq Device" type="start_device_IO" device="NIDaq Device"></action>
            <action tag="Start Eyelink" type="start_device_IO" device="Eyelink 1000"></action>
            <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
            <action tag="Queue Stimulus 2" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 3" type="update_stimulus_display"></action>
            <task_system tag="Trials" interruptible="YES">
                <task_system_state tag="Initial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                    <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Go to FIx On" type="direct" target="Fix On"></transition>
                </task_system_state>
                <task_system_state tag="Fix On" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
                    <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
                    <action type="if_else" tag="If/Else">
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="if" tag="Else, Select theta randomly" condition="1">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                        </action>
                    </action>
                    <action type="assignment" tag="Assign distractor_x" variable="distractor_x" value="amp*cos(theta*pi()/180)"></action>
                    <action type="assignment" tag="Assign distractor_y" variable="distractor_y" value="amp*sin(theta*pi()/180)"></action>
                    <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                    <action type="if" tag="Conditionally Execute Actions" condition="DistractorSimultaneous">
                        <action tag="Live Queue Distractor" type="live_queue_stimulus" stimulus="Distractor"></action>
                    </action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn, Transition to Fix Time" condition="fixOn" target="Fix Time"></transition>
                    <transition type="timer_expired" tag="If fixWait Expired, Transition to Failure to fixate" target="Failure to fixate" timer="fixWait"></transition>
                </task_system_state>
                <task_system_state tag="Fix Time" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                    <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                    <action type="report" tag="Report fixating" message="Fixating."></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to Failure to fixate" condition="!fixOn" target="Failure to fixate"></transition>
                    <transition type="timer_expired" tag="If fix_time Expired, Transition to Reward" target="Reward" timer="fix_time"></transition>
                </task_system_state>
                <task_system_state tag="Reward" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report success" message="Success!"></action>
                    <action type="assignment" tag="Assign fix_red" variable="fix_red" value="0"></action>
                    <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="0"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                    <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (consecutiveCorrect-1)*dbonus)"></action>
                    <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="(rewardDur+bonusRewDur)*1000"></action>
                    <action type="assignment" tag="Increment fix_dis_correct" variable="fix_dis_correct" value="fix_dis_correct+1"></action>
                    <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="rewardDur+bonusRewDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                </task_system_state>
                <task_system_state tag="End Trial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report Ending Trial" message="Ending Trial."></action>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment fix_dis_trials" variable="fix_dis_trials" value="fix_dis_trials+1"></action>
                    <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                    <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If localTrials >= trialNum, Transition to Exit Fixation Distractor System" condition="localTrials >= trialNum" target="Exit Fixation Distractor System"></transition>
                    <transition type="conditional" tag="If pstop, Transition to Exit Fixation Distractor System" condition="pstop" target="Exit Fixation Distractor System"></transition>
                    <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                </task_system_state>
                <task_system_state tag="ITI" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report ITI" message="ITI."></action>
                    <action type="start_timer" tag="Start fix_dis_ITI" timer="fix_dis_ITI" timebase="" duration="fix_dis_ITI_Dur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If fix_pur_ITI Expired, Transition to Fix On" target="Fix On" timer="fix_dis_ITI"></transition>
                </task_system_state>
                <task_system_state tag="Bad" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report failure" message="Trial Failed."></action>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue Distractor" type="dequeue_stimulus" stimulus="Distractor"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                    <action type="start_timer" tag="Start fix_pur_timeout" timer="fix_pur_timeout" timebase="" duration="fix_pur_timeoutDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If fix_pur_timeout Expired, Transition to End Trial" target="End Trial" timer="fix_pur_timeout"></transition>
                </task_system_state>
                <task_system_state tag="Failure to fixate" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report Failure to fixate" message="Failure to fixate."></action>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue Distractor" type="dequeue_stimulus" stimulus="Distractor"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                </task_system_state>
                <task_system_state tag="Exit Fixation Distractor System" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Return to parent task system" type="yield"></transition>
                </task_system_state>
            </task_system>
        </protocol>
        <protocol tag="OverlapSaccade" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start NIDaq Device" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
            <action type="assignment" tag="Assign pstop" variable="pstop" value="0"></action>
            <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
            <action tag="Queue Stimulus 3" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 4" type="update_stimulus_display"></action>
            <task_system tag="Trials" interruptible="YES">
                <task_system_state tag="Initial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                    <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                </task_system_state>
                <task_system_state tag="Fix On" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                    <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                    <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                    <action type="report" tag="Report fix on" message="Fixation on."></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn, Transition to Trial Start" condition="fixOn" target="Trial Start"></transition>
                    <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                </task_system_state>
                <task_system_state tag="Grace" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn, Transition to No Fix" condition="!fixOn" target="No Fix"></transition>
                    <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                </task_system_state>
                <task_system_state tag="Trial Start" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                    <action type="if" tag="If override, use theta_override" condition="override">
                        <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                    </action>
                    <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                    <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                    <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn, Transition to Bad" condition="!fixOn" target="Bad"></transition>
                    <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                </task_system_state>
                <task_system_state tag="Fix Time" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                    <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                    <action type="report" tag="Report fixating" message="Fixating."></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to Bad" condition="!fixOn" target="Bad"></transition>
                    <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                </task_system_state>
                <task_system_state tag="Target On" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                    <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to Bad" condition="!fixOn" target="Bad"></transition>
                    <transition type="timer_expired" tag="If targetTime Expired, Transition to Fix Off" target="Fix Off" timer="targetTime"></transition>
                </task_system_state>
                <task_system_state tag="Fix Off" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="saccadeTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If on_targ, Transition to Reward" condition="on_targ" target="Reward"></transition>
                    <transition type="timer_expired" tag="If saccadeTime Expired, Transition to Bad" target="Bad" timer="saccadeTime"></transition>
                </task_system_state>
                <task_system_state tag="Reward" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report success" message="Success!"></action>
                    <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                    <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                    <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                    <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (consecutiveCorrect-1)*dbonus)"></action>
                    <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="(rewardDur+bonusRewDur)*1000"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_correct" variable="OverlapSaccade_correct" value="OverlapSaccade_correct+1"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="rewardDur+bonusRewDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                </task_system_state>
                <task_system_state tag="End Trial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_trials" variable="OverlapSaccade_trials" value="OverlapSaccade_trials+1"></action>
                    <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                    <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If localTrials == trialNum, Transition to Exit State System" condition="localTrials >= trialNum || pstop" target="Exit State System"></transition>
                    <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                </task_system_state>
                <task_system_state tag="ITI" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                </task_system_state>
                <task_system_state tag="Bad" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                    <action type="report" tag="Report failure" message="Failure."></action>
                    <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                </task_system_state>
                <task_system_state tag="No Fix" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                    <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                </task_system_state>
                <task_system_state tag="Exit State System" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Return to parent task system" type="yield"></transition>
                </task_system_state>
            </task_system>
        </protocol>
        <protocol tag="OverlapHand" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start NIDaq Device" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="-1"></action>
            <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
            <action tag="Queue Stimulus 3" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 4" type="update_stimulus_display"></action>
            <task_system tag="Trials" interruptible="YES">
                <task_system_state tag="Initial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                    <action type="assignment" tag="Assign fix_win" variable="fix_win" value="8"></action>
                    <action type="assignment" tag="Assign ao0" variable="ao0" value="10"></action>
                    <action type="assignment" tag="Assign theta_min" variable="theta_min" value="0"></action>
                    <action type="assignment" tag="Assign theta_max" variable="theta_max" value="180"></action>
                    <action type="assignment" tag="Assign theta_N" variable="theta_N" value="2"></action>
                    <action type="assignment" tag="Assign trialNum 2" variable="trialNum" value="5000"></action>
                    <action type="assignment" tag="Assign fix_dur_mean" variable="fix_dur_mean" value="250"></action>
                    <action type="assignment" tag="Assign fix_dur_min" variable="fix_dur_min" value="500"></action>
                    <action type="assignment" tag="Assign centerV" variable="centerV" value="(leftV+rightV)/2"></action>
                    <action tag="Live Queue Stimulus" type="live_queue_stimulus" stimulus="cursor"></action>
                    <action tag="Update Stimulus Display 7" type="update_stimulus_display"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                </task_system_state>
                <task_system_state tag="Fix On" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign sync 2" variable="sync" value="1"></action>
                    <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                    <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                    <action type="assignment" tag="Assign leverFixWin" variable="leverFixWin" value="leverFixWinInit"></action>
                    <action type="assignment" tag="Assign leverTarWin" variable="leverTarWin" value="leverTarWinInit"></action>
                    <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                    <action tag="Live Queue Fix 12" type="live_queue_stimulus" stimulus="handFix"></action>
                    <action type="assignment" tag="Assign handFixY: fixY-(fix_sz+handFixSz)*3" variable="handFixY" value="handFixY"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                    <action type="report" tag="Report fix on" message="Fixation on."></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWin/2" target="Trial Start"></transition>
                    <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                </task_system_state>
                <task_system_state tag="Trial Start" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !handFixOn, Transition to NoHandFixDuringFix" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="NoHandFixDuringFix"></transition>
                    <transition type="conditional" tag="If !!fixOn, Transition to NoEyeFixDuringFix" condition="!fixOn" target="NoEyeFixDuringFix"></transition>
                    <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                </task_system_state>
                <task_system_state tag="Fix Time" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                    <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                    <action type="report" tag="Report fixating" message="Fixating."></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !handFixOn, Transition to NoHandFixDuringFix 2" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="NoHandFixDuringFix"></transition>
                    <transition type="conditional" tag="If !!fixOn, Transition to NoEyeFixDuringFix 2" condition="!fixOn" target="NoEyeFixDuringFix"></transition>
                    <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                </task_system_state>
                <task_system_state tag="Target On" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Set fix_red to 1" variable="fix_red" value="1"></action>
                    <action type="if" tag="If override, use theta_override 2" condition="override">
                        <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                    </action>
                    <action type="assignment" tag="Select theta -(theta-180) (mouseX>0)*181" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                    <action type="assignment" tag="Set handFixR to 2" variable="handFixR" value="1"></action>
                    <action type="assignment" tag="Set target_y 2" variable="target_y" value="amp*sin(theta*pi()/180)+handFixY"></action>
                    <action type="assignment" tag="Set target_x 2" variable="target_x" value="amp*cos(theta*pi()/180)+handFixX"></action>
                    <action type="report" tag="Annonce target direction 2" message="target direction = $theta"></action>
                    <action type="assignment" tag="Set fix_blue to 2" variable="fix_blue" value="1"></action>
                    <action type="assignment" tag="Set handFixB to 1" variable="handFixB" value="1"></action>
                    <action tag="Live Queue target" type="live_queue_stimulus" stimulus="handTarget"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Store set cue onset time 2" variable="set1_cue_onset_time_us" value="now()"></action>
                    <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                    <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !handFixOn, Transition to NoHandFixDuringOverlap" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="NoHandFixDuringOverlap"></transition>
                    <transition type="conditional" tag="If !!fixOn, Transition to NoEyeFixDuringOverlap" condition="!fixOn" target="NoEyeFixDuringOverlap"></transition>
                    <transition type="timer_expired" tag="If saccadeTime Expired, Transition to Bad 2" target="Fix Off" timer="saccadeTime"></transition>
                </task_system_state>
                <task_system_state tag="Fix Off" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue handFix" type="dequeue_stimulus" stimulus="handFix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Store set2 cue onset time 2" variable="set2_cue_onset_time_us" value="now()"></action>
                    <action type="start_timer" tag="Start saccadeTime 2" timer="saccadeTime" timebase="" duration="handTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If on_targ, Transition to cursorToTarget" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-target_x)&lt;leverTarWin/2" target="cursorToTarget"></transition>
                    <transition type="conditional" tag="If !!fixOn, Transition to NoEyeFixDuringRT" condition="!fixOn" target="NoEyeFixDuringRT"></transition>
                    <transition type="conditional" tag="If go to the other target, Transition to Hand2OtherTarget" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x))&lt;leverTarWin/2" target="Hand2OtherTarget"></transition>
                    <transition type="timer_expired" tag="If saccadeTime Expired, Transition to LateRT" target="LateRT" timer="saccadeTime"></transition>
                </task_system_state>
                <task_system_state tag="cursorToTarget" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign acquisitionTime 2" variable="acquisitionTime" value="now()"></action>
                    <action type="assignment" tag="Assign cursor2x0" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                    <action tag="Dequeue cursor" type="dequeue_stimulus" stimulus="cursor"></action>
                    <action tag="Live Queue cursor2" type="live_queue_stimulus" stimulus="cursor 2"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign productionInterval 2" variable="productionInterval" value="(acquisitionTime-set2_cue_onset_time_us)/1000"></action>
                    <action type="assignment" tag="Assign RTfromTargetOn" variable="RTfromTargetOn" value="(acquisitionTime-set1_cue_onset_time_us)/1000"></action>
                    <action type="start_timer" tag="Start cursorMove" timer="cursorMove" timebase="" duration="durCursorMove-5/refreshRate()" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If cursorMove Expired, Transition to Rewarde" target="Reward" timer="cursorMove"></transition>
                </task_system_state>
                <task_system_state tag="Reward" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report success" message="Success!"></action>
                    <action type="assignment" tag="Assign cursor2Alpha" variable="cursor2Alpha" value="0"></action>
                    <action tag="Dequeue cursor 2" type="dequeue_stimulus" stimulus="cursor 2"></action>
                    <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                    <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign cursor2Alpha 2" variable="cursor2Alpha" value="1"></action>
                    <action type="if" tag="If hand &amp;&amp; RT>minHandRT, reward" condition="!idHandEyeOverlap &amp;&amp; productionInterval>minHandRT">
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="dbonus*(handTimeDur-productionInterval)/handTimeDur"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="(rewardDur+bonusRewDur)*1000"></action>
                    </action>
                    <action type="if" tag="If consecutiveCorrect>0, use new theta 2" condition="consecutiveCorrect>0">
                        <action type="assignment" tag="Select theta -(theta-180) (mouseX>0)*180" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                    </action>
                    <action type="assignment" tag="Assign cursorX" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                    <action type="assignment" tag="Assign handTargetOn" variable="handTargetOn" value="0"></action>
                    <action type="if" tag="If theta>90, increment OverlapSaccade_correctLeft 2" condition="theta>90">
                        <action type="assignment" tag="increment OverlapSaccade_correctLeft" variable="OverlapSaccade_correctLeft" value="OverlapSaccade_correctLeft+1"></action>
                    </action>
                    <action type="if" tag="If theta&lt;=90, increment OverlapSaccade_correctRight 2" condition="theta&lt;=90">
                        <action type="assignment" tag="increment OverlapSaccade_correctLeft" variable="OverlapSaccade_correctRight" value="OverlapSaccade_correctRight+1"></action>
                    </action>
                    <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="rewardDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If GreenTime Expired, Transition to Fix On 2" target="Fix On 2" timer="GreenTime"></transition>
                </task_system_state>
                <task_system_state tag="Fix On 2" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Live Queue Stimulus 14" type="live_queue_stimulus" stimulus="cursor"></action>
                    <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                    <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                    <action tag="Dequeue target 3" type="dequeue_stimulus" stimulus="handTarget"></action>
                    <action tag="Live Queue handFix" type="live_queue_stimulus" stimulus="handFix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign leverFixWin 2" variable="leverFixWin" value="leverFixWinBackCenter"></action>
                    <action type="assignment" tag="Assign leverTarWin 2" variable="leverTarWin" value="leverTarWinBackCenter"></action>
                    <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                    <action type="report" tag="Report fix on" message="Fixation on."></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="IfhandFixOn, Transition to RewardFix 2/handFixTime" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWin/2" target="RewardFix 2"></transition>
                    <transition type="timer_expired" tag="If fix_wait Expired, Transition to End Trial" target="End Trial" timer="fixWait"></transition>
                </task_system_state>
                <task_system_state tag="handFixTime" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Determine time to target on 2" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                    <action type="start_timer" tag="Start fix_time 2" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="report" tag="Report fix on" message="Fixation on."></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !handFixOn, Transition to Bad" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="Bad"></transition>
                    <transition type="timer_expired" tag="If fix_time Expired, Transition to End Trial" target="RewardFix 2" timer="fix_time"></transition>
                </task_system_state>
                <task_system_state tag="RewardFix 2" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Increment OverlapSaccade_correct" variable="OverlapSaccade_correct" value="OverlapSaccade_correct+1"></action>
                    <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to ITI 2" target="End Trial"></transition>
                </task_system_state>
                <task_system_state tag="End Trial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Set handFixR to 1" variable="handFixR" value="1"></action>
                    <action type="assignment" tag="Set handFixR to 6" variable="handFixG" value="1"></action>
                    <action type="assignment" tag="Set handFixB to 4" variable="handFixB" value="1"></action>
                    <action type="assignment" tag="Set fix_red to 5" variable="fix_green" value="1"></action>
                    <action type="assignment" tag="Set fix_red to 6" variable="fix_blue" value="1"></action>
                    <action type="assignment" tag="Set fix_red to 7" variable="fix_red" value="1"></action>
                    <action type="assignment" tag="Set targ_green to 2" variable="targ_green" value="1"></action>
                    <action type="assignment" tag="Set targ_blue to 3" variable="targ_blue" value="1"></action>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="handTarget"></action>
                    <action tag="Dequeue Fix 16" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue Fix 15" type="dequeue_stimulus" stimulus="handFix"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_trials" variable="OverlapSaccade_trials" value="OverlapSaccade_trials+1"></action>
                    <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                    <action type="assignment" tag="Assign sync 3" variable="sync" value="0"></action>
                    <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If localTrials == trialNum, Transition to Exit State System" condition="localTrials >= trialNum || pstop" target="Exit State System"></transition>
                    <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                </task_system_state>
                <task_system_state tag="ITI" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                </task_system_state>
                <task_system_state tag="Bad" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="wait" tag="Wait" duration="FeedbackTimeDur" duration_units="ms"></action>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue Fix 8" type="dequeue_stimulus" stimulus="handFix"></action>
                    <action tag="Dequeue target 2" type="dequeue_stimulus" stimulus="handTarget"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                    <action type="assignment" tag="Assign handFixX 2" variable="handFixX" value="0"></action>
                    <action type="report" tag="Report failure" message="Failure."></action>
                    <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                </task_system_state>
                <task_system_state tag="NoEyeFixDuringFix" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Set fix_red to 9" variable="fix_green" value="0"></action>
                    <action type="assignment" tag="Set fix_red to 8" variable="fix_blue" value="0"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_NoEyeFixDuringFix" variable="OverlapSaccade_NoEyeFixDuringFix" value="OverlapSaccade_NoEyeFixDuringFix+1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                </task_system_state>
                <task_system_state tag="NoHandFixDuringFix" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Set handFixR to 7" variable="handFixB" value="0"></action>
                    <action type="assignment" tag="Set handFixB to 9" variable="handFixG" value="0"></action>
                    <action tag="Update Stimulus Display 13" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_NoHandFixDuringFix" variable="OverlapSaccade_NoHandFixDuringFix" value="OverlapSaccade_NoHandFixDuringFix+1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to Bad 2" target="Bad"></transition>
                </task_system_state>
                <task_system_state tag="NoEyeFixDuringOverlap" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Set fix_red to 11" variable="fix_green" value="0"></action>
                    <action type="assignment" tag="Set fix_red to 10" variable="fix_blue" value="0"></action>
                    <action tag="Update Stimulus Display 11" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_NoEyeFixDuringOverlap" variable="OverlapSaccade_NoEyeFixDuringOverlap" value="OverlapSaccade_NoEyeFixDuringOverlap+1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to Bad 3" target="Bad"></transition>
                </task_system_state>
                <task_system_state tag="NoHandFixDuringOverlap" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Set handFixR to 8" variable="handFixB" value="0"></action>
                    <action type="assignment" tag="Set handFixB to 10" variable="handFixG" value="0"></action>
                    <action tag="Update Stimulus Display 14" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_NoHandFixDuringOverlap" variable="OverlapSaccade_NoHandFixDuringOverlap" value="OverlapSaccade_NoHandFixDuringOverlap+1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to Bad 4" target="Bad"></transition>
                </task_system_state>
                <task_system_state tag="Hand2OtherTarget" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Set targ_green to 4" variable="targ_green" value="0"></action>
                    <action type="assignment" tag="Set targ_blue to 5" variable="targ_blue" value="0"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_Hand2OtherTarget" variable="OverlapSaccade_Hand2OtherTarget" value="OverlapSaccade_Hand2OtherTarget+1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to Bad 5" target="Bad"></transition>
                </task_system_state>
                <task_system_state tag="NoEyeFixDuringRT" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Set fix_red to 13" variable="fix_green" value="0"></action>
                    <action type="assignment" tag="Set fix_red to 12" variable="fix_blue" value="0"></action>
                    <action tag="Update Stimulus Display 12" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_NoEyeFixDuringRT" variable="OverlapSaccade_NoEyeFixDuringRT" value="OverlapSaccade_NoEyeFixDuringRT+1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to Bad 6" target="Bad"></transition>
                </task_system_state>
                <task_system_state tag="LateRT" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Set targ_green to 5" variable="targ_green" value="0"></action>
                    <action type="assignment" tag="Set targ_blue to 6" variable="targ_blue" value="0"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment OverlapSaccade_LateRT" variable="OverlapSaccade_LateRT" value="OverlapSaccade_LateRT+1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to Bad 7" target="Bad"></transition>
                </task_system_state>
                <task_system_state tag="No Fix" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Increment OverlapSaccade_NoFix" variable="OverlapSaccade_NoFix" value="OverlapSaccade_NoFix+1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to Bad 8" target="Bad"></transition>
                </task_system_state>
                <task_system_state tag="Exit State System" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Return to parent task system" type="yield"></transition>
                </task_system_state>
            </task_system>
        </protocol>
        <protocol tag="MemorySaccade" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start NIDaq Device" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
            <action type="assignment" tag="Assign pstop" variable="pstop" value="0"></action>
            <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
            <action tag="Queue Stimulus 2" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 3" type="update_stimulus_display"></action>
            <task_system tag="Trials" interruptible="YES">
                <task_system_state tag="Initial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                    <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                </task_system_state>
                <task_system_state tag="Fix On" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                    <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                    <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                    <action type="report" tag="Report fix on" message="Fixation on."></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn, Transition to Trial Start" condition="fixOn" target="Trial Start"></transition>
                    <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                </task_system_state>
                <task_system_state tag="Grace" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn, Transition to No Fix" condition="!fixOn" target="No Fix"></transition>
                    <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                </task_system_state>
                <task_system_state tag="Trial Start" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                    <action type="if" tag="If override, use theta_override" condition="override">
                        <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                    </action>
                    <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                    <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                    <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn, Transition to Bad" condition="!fixOn" target="Bad"></transition>
                    <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                </task_system_state>
                <task_system_state tag="Fix Time" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                    <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                    <action type="report" tag="Report fixating" message="Fixating."></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to Bad" condition="!fixOn" target="Bad"></transition>
                    <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                </task_system_state>
                <task_system_state tag="Target On" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                    <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to Bad" condition="!fixOn" target="Bad"></transition>
                    <transition type="timer_expired" tag="If targetTime Expired, Transition to Memory Time" target="Memory Time" timer="targetTime"></transition>
                </task_system_state>
                <task_system_state tag="Memory Time" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Deterimine time to until fix off" variable="memoryTimeDur" value="-memory_dur_mean*logn(rand(0,1)) + memory_dur_min"></action>
                    <action type="start_timer" tag="Start memoryTime" timer="memoryTime" timebase="" duration="memoryTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to Bad" condition="!fixOn" target="Bad"></transition>
                    <transition type="timer_expired" tag="If memoryTime Expired, Transition to Fix Off" target="Fix Off" timer="memoryTime"></transition>
                </task_system_state>
                <task_system_state tag="Fix Off" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="saccadeTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If on_targ, Transition to Reward" condition="on_targ" target="Reward"></transition>
                    <transition type="timer_expired" tag="If saccadeTime Expired, Transition to Bad" target="Bad" timer="saccadeTime"></transition>
                </task_system_state>
                <task_system_state tag="Reward" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report success" message="Success!"></action>
                    <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                    <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                    <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                    <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                    <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (consecutiveCorrect-1)*dbonus)"></action>
                    <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="(rewardDur+bonusRewDur)*1000"></action>
                    <action type="assignment" tag="Increment MemorySaccade_correct" variable="MemorySaccade_correct" value="MemorySaccade_correct+1"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="rewardDur+bonusRewDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                </task_system_state>
                <task_system_state tag="End Trial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                    <action type="assignment" tag="Increment MemorySaccade_trials" variable="MemorySaccade_trials" value="MemorySaccade_trials+1"></action>
                    <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                    <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If localTrials == trialNum, Transition to Exit State System" condition="localTrials >= trialNum || pstop" target="Exit State System"></transition>
                    <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                </task_system_state>
                <task_system_state tag="ITI" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                </task_system_state>
                <task_system_state tag="Bad" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                    <action type="report" tag="Report failure" message="Failure."></action>
                    <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                </task_system_state>
                <task_system_state tag="No Fix" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                    <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                </task_system_state>
                <task_system_state tag="Exit State System" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Return to parent task system" type="yield"></transition>
                </task_system_state>
            </task_system>
        </protocol>
        <protocol tag="_MovingBall_long" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start NIDaq Device" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="-1"></action>
            <action tag="Queue Stimulus" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 2" type="update_stimulus_display"></action>
            <task_system tag="Trials" interruptible="YES">
                <task_system_state tag="Initial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                    <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                    <action type="assignment" tag="Assign theta_min" variable="theta_min" value="170"></action>
                    <action type="assignment" tag="Assign theta_max" variable="theta_max" value="190"></action>
                    <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                    <action type="assignment" tag="Assign fixY" variable="fixY" value="-2"></action>
                    <action type="assignment" tag="Assign iti 2" variable="iti" value="600"></action>
                    <action type="assignment" tag="Assign fix_red" variable="fix_red" value="0"></action>
                    <action type="assignment" tag="Assign fix_green" variable="fix_green" value="0"></action>
                    <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                </task_system_state>
                <task_system_state tag="Fix On" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                    <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                    <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                    <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                    <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                    <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                    <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                    <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                    <action type="report" tag="Report fix on" message="Fixation on."></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn, Transition to Trial Start" condition="fixOn" target="Trial Start"></transition>
                    <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                </task_system_state>
                <task_system_state tag="Grace" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn, Transition to No Fix" condition="!fixOn" target="No Fix"></transition>
                    <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                </task_system_state>
                <task_system_state tag="Trial Start" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                    <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                    <action type="assignment" tag="Assign radius 7" variable="radius" value="10"></action>
                    <action type="assignment" tag="Assign fixY 3" variable="fixY" value="-2"></action>
                    <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                    <action type="if" tag="If override, use theta_override" condition="override">
                        <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                    </action>
                    <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                    <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                    <action type="assignment" tag="Assign ballRed" variable="ballRed" value="0"></action>
                    <action type="assignment" tag="Assign ballGreen" variable="ballGreen" value="0"></action>
                    <action type="assignment" tag="Assign ballBlue" variable="ballBlue" value="1"></action>
                    <action type="assignment" tag="Select interval_min" variable="interval_min" value="800"></action>
                    <action type="assignment" tag="Select interval_max" variable="interval_max" value="1200"></action>
                    <action type="if" tag="If consecutiveCorrect==0, repeat theta &amp; interval" condition="consecutiveCorrect==0">
                        <action type="if_else" tag="If/Else 4">
                            <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                            </action>
                            <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                            </action>
                        </action>
                    </action>
                    <action type="if" tag="If consecutiveCorrect!=0, sample theta &amp; interval" condition="consecutiveCorrect!=0">
                        <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                        <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                    </action>
                    <action type="assignment" tag="set idFlashAlpha" variable="idFlashAlpha" value="rand(0,1)"></action>
                    <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                    <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="(Nsets+1)*interval"></action>
                    <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                    <action type="assignment" tag="Assign Nsets" variable="Nsets" value="Nsets"></action>
                    <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                    <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                </task_system_state>
                <task_system_state tag="Fix Time" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                    <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                    <action type="report" tag="Report fixating" message="Fixating."></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                    <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                </task_system_state>
                <task_system_state tag="Target On" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                    <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                    <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                </task_system_state>
                <task_system_state tag="Ready" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                    <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                    <action tag="Live Queue ball" type="live_queue_stimulus" stimulus="ball"></action>
                    <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                    <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to After Ready" condition="!fixOn" target="After Ready"></transition>
                    <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set 2" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set 2"></transition>
                    <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 2, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 2" target="Set"></transition>
                </task_system_state>
                <task_system_state tag="Set" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Queue Interval2" type="queue_stimulus" stimulus="Interval2"></action>
                    <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                    <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                    <action tag="Queue set cue" type="queue_stimulus" stimulus="set_cue"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                    <transition type="conditional" tag="When set cue presentation completes, go to Set 2" condition="Interval2_ending" target="Set 2"></transition>
                </task_system_state>
                <task_system_state tag="Set 2" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                    <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                    <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                    <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                    <action type="if" tag="If idRandSet," condition="idRandSet">
                        <action type="if" tag="if thSetFlashAlpha&lt;idFlashAlpha" condition="thSetFlashAlpha&lt;idFlashAlpha">
                            <action type="assignment" tag="execute setFlashAlpha=0" variable="setFlashAlpha" value="0"></action>
                        </action>
                        <action type="if" tag="if thSetFlashAlpha>=idFlashAlpha" condition="thSetFlashAlpha>=idFlashAlpha">
                            <action type="assignment" tag="execute setFlashAlpha=1" variable="setFlashAlpha" value="1"></action>
                        </action>
                    </action>
                    <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="if" tag="If Nsets == 1, set cue onset time" condition="Nsets == 1">
                        <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                    </action>
                    <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                    <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                </task_system_state>
                <task_system_state tag="Production Interval" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                    <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                    <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn Transition to Production" condition="!fixOn" target="Production"></transition>
                    <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                </task_system_state>
                <task_system_state tag="Production" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="saccadeTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="on_targ" target="TargetAcquired"></transition>
                    <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                </task_system_state>
                <task_system_state tag="TargetAcquired" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                    <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If correct, Transition to Reward" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="Reward"></transition>
                    <transition type="direct" tag="Always Go to Early or Late" target="Early or Late"></transition>
                </task_system_state>
                <task_system_state tag="Reward" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report success" message="Success!"></action>
                    <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                    <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                    <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                    <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                    <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                    <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                    <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                    <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                    <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                    <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                    <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                    <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                </task_system_state>
                <task_system_state tag="End Trial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                    <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                    <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                    <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                    <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                    <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                    <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                    <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                    <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                    <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                    <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                    <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                    <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                    <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                    <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                    <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                    <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                    <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                    <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                    <action type="assignment" tag="Assign radius 4" variable="radius" value="radius"></action>
                    <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                    <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If localTrials == trialNum, Transition to Exit State System" condition="localTrials >= trialNum || pstop" target="Exit State System"></transition>
                    <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                </task_system_state>
                <task_system_state tag="ITI" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                </task_system_state>
                <task_system_state tag="Early or Late" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                    <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                </task_system_state>
                <task_system_state tag="Abort" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                    <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                    <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                    <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                    <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                </task_system_state>
                <task_system_state tag="After Ready" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - ready_cue_onset_time_us -interval*2000) / 1000.0"></action>
                    <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                    <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                    <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                    <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                </task_system_state>
                <task_system_state tag="After Set1" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                    <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                    <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                    <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                    <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                </task_system_state>
                <task_system_state tag="No Saccade" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                    <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                    <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                    <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                </task_system_state>
                <task_system_state tag="Bad" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                    <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="if_else" tag="If/Else 2">
                        <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                            <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="ballAlpha+dballAlphaIncorrect"></action>
                            <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="ballAlphaProd+dballAlphaIncorrect"></action>
                            <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                        </action>
                        <action type="if" tag="Else" condition="1">
                            <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                            <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                        </action>
                    </action>
                    <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                    <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                    <action type="report" tag="Report failure" message="Failure."></action>
                    <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                </task_system_state>
                <task_system_state tag="No Fix" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                    <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                </task_system_state>
                <task_system_state tag="Exit State System" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Return to parent task system" type="yield"></transition>
                </task_system_state>
            </task_system>
        </protocol>
        <protocol tag="_MovingBall_short" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start NIDaq Device" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="-1"></action>
            <action tag="Queue Stimulus" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 2" type="update_stimulus_display"></action>
            <task_system tag="Trials" interruptible="YES">
                <task_system_state tag="Initial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                    <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                    <action type="assignment" tag="Assign theta_min 2" variable="theta_min" value="170"></action>
                    <action type="assignment" tag="Assign theta_max 2" variable="theta_max" value="190"></action>
                    <action type="assignment" tag="Assign theta 2" variable="theta" value="180"></action>
                    <action type="assignment" tag="Assign fixY 2" variable="fixY" value="2"></action>
                    <action type="assignment" tag="Assign iti" variable="iti" value="900"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                </task_system_state>
                <task_system_state tag="Fix On" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                    <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                    <action type="assignment" tag="Assign fix_red 3" variable="fix_red" value="1"></action>
                    <action type="assignment" tag="Assign fix_green 3" variable="fix_green" value="0"></action>
                    <action type="assignment" tag="Assign fix_blue 3" variable="fix_blue" value="0"></action>
                    <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                    <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                    <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                    <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                    <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                    <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                    <action type="report" tag="Report fix on" message="Fixation on."></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn, Transition to Trial Start" condition="fixOn" target="Trial Start"></transition>
                    <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                </task_system_state>
                <task_system_state tag="Grace" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn, Transition to No Fix" condition="!fixOn" target="No Fix"></transition>
                    <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                </task_system_state>
                <task_system_state tag="Trial Start" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                    <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                    <action type="assignment" tag="Assign radius 5" variable="radius" value="10"></action>
                    <action type="assignment" tag="Assign fixY 4" variable="fixY" value="2"></action>
                    <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                    <action type="if" tag="If override, use theta_override" condition="override">
                        <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                    </action>
                    <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                    <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                    <action type="assignment" tag="Assign ballRed 2" variable="ballRed" value="1"></action>
                    <action type="assignment" tag="Assign ballGreen 2" variable="ballGreen" value="0"></action>
                    <action type="assignment" tag="Assign ballBlue 2" variable="ballBlue" value="0"></action>
                    <action type="assignment" tag="Select interval_min 2" variable="interval_min" value="480"></action>
                    <action type="assignment" tag="Select interval_max 2" variable="interval_max" value="800"></action>
                    <action type="if" tag="If consecutiveCorrect==0, repeat theta &amp; interval" condition="consecutiveCorrect==0">
                        <action type="if_else" tag="If/Else 4">
                            <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                            </action>
                            <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                            </action>
                        </action>
                    </action>
                    <action type="if" tag="If consecutiveCorrect!=0, sample theta &amp; interval" condition="consecutiveCorrect!=0">
                        <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                        <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                    </action>
                    <action type="assignment" tag="set idFlashAlpha" variable="idFlashAlpha" value="rand(0,1)"></action>
                    <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                    <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="(Nsets+1)*interval"></action>
                    <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                    <action type="assignment" tag="Assign Nsets" variable="Nsets" value="Nsets"></action>
                    <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                    <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                </task_system_state>
                <task_system_state tag="Fix Time" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                    <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                    <action type="report" tag="Report fixating" message="Fixating."></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                    <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                </task_system_state>
                <task_system_state tag="Target On" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                    <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                    <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                </task_system_state>
                <task_system_state tag="Ready" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                    <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                    <action tag="Live Queue ball" type="live_queue_stimulus" stimulus="ball"></action>
                    <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                    <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to After Ready" condition="!fixOn" target="After Ready"></transition>
                    <transition type="conditional" tag="When Interval1_ending, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set 2"></transition>
                    <transition type="conditional" tag="When Interval1_ending, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 2" target="Set"></transition>
                </task_system_state>
                <task_system_state tag="Set" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Queue Interval2" type="queue_stimulus" stimulus="Interval2"></action>
                    <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                    <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                    <action tag="Queue set cue" type="queue_stimulus" stimulus="set_cue"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                    <transition type="conditional" tag="When set cue presentation completes, go to Set 2" condition="Interval2_ending" target="Set 2"></transition>
                </task_system_state>
                <task_system_state tag="Set 2" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                    <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                    <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                    <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                    <action type="if" tag="If idRandSet, 2" condition="idRandSet">
                        <action type="if" tag="if thSetFlashAlpha&lt;idFlashAlpha 2" condition="thSetFlashAlpha&lt;idFlashAlpha">
                            <action type="assignment" tag="execute setFlashAlpha=0" variable="setFlashAlpha" value="0"></action>
                        </action>
                        <action type="if" tag="if thSetFlashAlpha>=idFlashAlpha 2" condition="thSetFlashAlpha>=idFlashAlpha">
                            <action type="assignment" tag="execute setFlashAlpha=1" variable="setFlashAlpha" value="1"></action>
                        </action>
                    </action>
                    <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="if" tag="If Nsets == 1, set cue onset time" condition="Nsets == 1">
                        <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                    </action>
                    <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                    <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                </task_system_state>
                <task_system_state tag="Production Interval" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                    <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                    <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If !fixOn Transition to Production" condition="!fixOn" target="Production"></transition>
                    <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                </task_system_state>
                <task_system_state tag="Production" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="saccadeTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="on_targ" target="TargetAcquired"></transition>
                    <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                </task_system_state>
                <task_system_state tag="TargetAcquired" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                    <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If correct, Transition to Reward" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="Reward"></transition>
                    <transition type="direct" tag="Always Go to Early or Late" target="Early or Late"></transition>
                </task_system_state>
                <task_system_state tag="Reward" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report success" message="Success!"></action>
                    <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                    <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                    <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                    <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                    <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                    <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                    <action type="assignment" tag="Assign ballAlphaProd 2" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                    <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                    <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                    <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                    <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                </task_system_state>
                <task_system_state tag="End Trial" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                    <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                    <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                    <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                    <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                    <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                    <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                    <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                    <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                    <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                    <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                    <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                    <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                    <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                    <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                    <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                    <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                    <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                    <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                    <action type="assignment" tag="Assign radius" variable="radius" value="radius"></action>
                    <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                    <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="conditional" tag="If localTrials == trialNum, Transition to Exit State System" condition="localTrials >= trialNum || pstop" target="Exit State System"></transition>
                    <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                </task_system_state>
                <task_system_state tag="ITI" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                </task_system_state>
                <task_system_state tag="Early or Late" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                    <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                </task_system_state>
                <task_system_state tag="Abort" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                    <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                    <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                    <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                    <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                </task_system_state>
                <task_system_state tag="After Ready" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - ready_cue_onset_time_us -interval*2000) / 1000.0"></action>
                    <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                    <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                    <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                    <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                </task_system_state>
                <task_system_state tag="After Set1" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                    <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                    <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                    <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                    <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                </task_system_state>
                <task_system_state tag="No Saccade" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                    <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                    <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                    <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                </task_system_state>
                <task_system_state tag="Bad" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                    <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="if_else" tag="If/Else 2">
                        <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                            <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="ballAlpha+dballAlphaIncorrect"></action>
                            <action type="assignment" tag="Assign ballAlphaProd 4" variable="ballAlphaProd" value="ballAlphaProd+dballAlphaIncorrect"></action>
                            <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                        </action>
                        <action type="if" tag="Else" condition="1">
                            <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                            <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                        </action>
                    </action>
                    <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                    <action type="assignment" tag="Increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                    <action type="report" tag="Report failure" message="Failure."></action>
                    <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                </task_system_state>
                <task_system_state tag="No Fix" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                    <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                    <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                    <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                </task_system_state>
                <task_system_state tag="Exit State System" interruptible="YES">
                    <action_marker _unmoveable="1" tag="Actions"></action_marker>
                    <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                    <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                    <transition tag="Return to parent task system" type="yield"></transition>
                </task_system_state>
            </task_system>
        </protocol>
        <protocol tag="_blockedTwoPrior" nsamples="3000" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink 2" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start Mouse Input Device 2" type="start_device_IO" device="Mouse Input Device"></action>
            <action tag="Start NIDaq Device 2" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur 2" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect 2" variable="consecutiveCorrect" value="-1"></action>
            <action type="assignment" tag="Assign trialNum" variable="trialNum" value="trialNumBlockLong"></action>
            <action tag="Queue Stimulus 4" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 5" type="update_stimulus_display"></action>
            <block tag="long" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="Trials 2" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlockLong:min(round(-(maxTrialNumBlock-minTrialNumBlock)/2*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)" variable="trialNumBlockLong" value="-meanTrialNumBlock*logn(rand(0,1)) + minTrialNumBlock"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="radius+radiusStep*numRadiusStepBoost"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="-0.1"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="600"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="0"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="0"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 11" variable="handFixB" value="1"></action>
                        <action type="assignment" tag="Set handFixG to 10" variable="handFixG" value="1"></action>
                        <action type="assignment" tag="Set handFixR to 11" variable="handFixR" value="1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 16" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn, Transition to Trial Start" condition="fixOn" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn, Transition to No Fix" condition="!fixOn" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 6" variable="fixY" value="-0.1"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="assignment" tag="Assign ballRed" variable="ballRed" value="0"></action>
                        <action type="assignment" tag="Assign ballGreen" variable="ballGreen" value="0"></action>
                        <action type="assignment" tag="Assign ballBlue" variable="ballBlue" value="1"></action>
                        <action type="assignment" tag="Select interval_min" variable="interval_min" value="800"></action>
                        <action type="assignment" tag="Select interval_max" variable="interval_max" value="1200"></action>
                        <action type="if" tag="If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="consecutiveCorrect==0&amp;&amp;localTrials>0">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="consecutiveCorrect!=0||localTrials==0">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="set idFlashAlpha" variable="idFlashAlpha" value="rand(0,1)"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="(Nsets+1)*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="assignment" tag="Assign Nsets" variable="Nsets" value="Nsets"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Live Queue ball" type="live_queue_stimulus" stimulus="ball"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 18" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to After Ready" condition="!fixOn" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set 2" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set 2"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 2, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 2" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Queue Interval2" type="queue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action tag="Queue set cue" type="queue_stimulus" stimulus="set_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                        <transition type="conditional" tag="When set cue presentation completes, go to Set 2" condition="Interval2_ending" target="Set 2"></transition>
                    </task_system_state>
                    <task_system_state tag="Set 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue occluder_cue 4" type="dequeue_stimulus" stimulus="occluder_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action type="if" tag="If idRandSet," condition="idRandSet">
                            <action type="if" tag="if thSetFlashAlpha&lt;idFlashAlpha" condition="thSetFlashAlpha&lt;idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=0" variable="setFlashAlpha" value="0"></action>
                            </action>
                            <action type="if" tag="if thSetFlashAlpha>=idFlashAlpha" condition="thSetFlashAlpha>=idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=1" variable="setFlashAlpha" value="1"></action>
                            </action>
                        </action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 19" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if" tag="If Nsets == 1, set cue onset time" condition="Nsets == 1">
                            <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        </action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn Transition to Production" condition="!fixOn" target="Production"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 6" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue occluder_cue 5" type="dequeue_stimulus" stimulus="occluder_cue"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="saccadeTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="on_targ" target="TargetAcquired"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="Reward"></transition>
                        <transition type="direct" tag="Always Go to Early or Late" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 111" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Dequeue occluder_cue 6" type="dequeue_stimulus" stimulus="occluder_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localTrials == trialNumBlock, Transition to Exit State System" condition="localTrials >= trialNumBlockLong || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 112" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue occluder_cue" type="dequeue_stimulus" stimulus="occluder_cue"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - ready_cue_onset_time_us -interval*2000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue occluder_cue 2" type="dequeue_stimulus" stimulus="occluder_cue"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="ballAlpha+dballAlphaIncorrect"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="ballAlphaProd+dballAlphaIncorrect"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="1">
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
            <block tag="short" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="Trials 3" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlockShort" variable="trialNumBlockShort" value="-meanTrialNumBlock*logn(rand(0,1)) + minTrialNumBlock"></action>
                        <action type="assignment" tag="Assign theta 2" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign fixY 2" variable="fixY" value="0.1"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 3" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 4" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign iti" variable="iti" value="900"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign fix_red 3" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green 3" variable="fix_green" value="0"></action>
                        <action type="assignment" tag="Assign fix_blue 3" variable="fix_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 9" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 17" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn, Transition to Trial Start" condition="fixOn" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn, Transition to No Fix" condition="!fixOn" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="assignment" tag="Assign fixY 5" variable="fixY" value="0.1"></action>
                        <action type="assignment" tag="Assign ballRed 2" variable="ballRed" value="1"></action>
                        <action type="assignment" tag="Assign ballGreen 2" variable="ballGreen" value="0"></action>
                        <action type="assignment" tag="Assign ballBlue 2" variable="ballBlue" value="0"></action>
                        <action type="assignment" tag="Select interval_min 2" variable="interval_min" value="480"></action>
                        <action type="assignment" tag="Select interval_max 2" variable="interval_max" value="800"></action>
                        <action type="if" tag="If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="consecutiveCorrect==0&amp;&amp;localTrials>0">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="consecutiveCorrect!=0||localTrials==0">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="set idFlashAlpha" variable="idFlashAlpha" value="rand(0,1)"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="(Nsets+1)*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="assignment" tag="Assign Nsets" variable="Nsets" value="Nsets"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Live Queue ball" type="live_queue_stimulus" stimulus="ball"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 8" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 5" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 110" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to After Ready" condition="!fixOn" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending, go to Set 2" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set 2"></transition>
                        <transition type="conditional" tag="When Interval1_ending, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 2" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Queue Interval2" type="queue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action tag="Queue set cue" type="queue_stimulus" stimulus="set_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                        <transition type="conditional" tag="When set cue presentation completes, go to Set 2" condition="Interval2_ending" target="Set 2"></transition>
                    </task_system_state>
                    <task_system_state tag="Set 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue occluder_cue 7" type="dequeue_stimulus" stimulus="occluder_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action type="if" tag="If idRandSet, 2" condition="idRandSet">
                            <action type="if" tag="if thSetFlashAlpha&lt;idFlashAlpha 2" condition="thSetFlashAlpha&lt;idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=0" variable="setFlashAlpha" value="0"></action>
                            </action>
                            <action type="if" tag="if thSetFlashAlpha>=idFlashAlpha 2" condition="thSetFlashAlpha>=idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=1" variable="setFlashAlpha" value="1"></action>
                            </action>
                        </action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 7" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 6" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 111" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if" tag="If Nsets == 1, set cue onset time" condition="Nsets == 1">
                            <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        </action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn Transition to Production" condition="!fixOn" target="Production"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue occluder_cue 8" type="dequeue_stimulus" stimulus="occluder_cue"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="saccadeTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="on_targ" target="TargetAcquired"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="Reward"></transition>
                        <transition type="direct" tag="Always Go to Early or Late" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 3" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd 2" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius 3" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur 2" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 110" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Dequeue occluder_cue 9" type="dequeue_stimulus" stimulus="occluder_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localTrials == trialNumBlock, Transition to Exit State System" condition="localTrials >= trialNumBlockShort || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue occluder_cue 10" type="dequeue_stimulus" stimulus="occluder_cue"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - ready_cue_onset_time_us -interval*2000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 2" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue occluder_cue 3" type="dequeue_stimulus" stimulus="occluder_cue"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display 6" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="ballAlpha+dballAlphaIncorrect"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 4" variable="ballAlphaProd" value="ballAlphaProd+dballAlphaIncorrect"></action>
                                <action type="assignment" tag="Assign radius 2" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="1">
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
        </protocol>
        <protocol tag="_blockedLongPrior hand with fixOff after SET" nsamples="3000" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink 2" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start Mouse Input Device 2" type="start_device_IO" device="Mouse Input Device"></action>
            <action tag="Start NIDaq Device 2" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur 2" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect 2" variable="consecutiveCorrect" value="-1"></action>
            <action type="assignment" tag="Assign pstop 3" variable="pstop" value="0"></action>
            <action type="assignment" tag="Assign fix_red 5" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green 4" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue 5" variable="fix_blue" value="1"></action>
            <action type="assignment" tag="Assign trialNum" variable="trialNum" value="trialNumBlockLong"></action>
            <action tag="Queue Stimulus 4" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 5" type="update_stimulus_display"></action>
            <block tag="long" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="Trials 2" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlockLong:min(round(-(maxTrialNumBlock-minTrialNumBlock)/2*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)" variable="trialNumBlockLong" value="5000"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign fix_win 2" variable="fix_win" value="7"></action>
                        <action type="assignment" tag="Assign amp 2" variable="amp" value="10"></action>
                        <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="-0.1"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="600"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="1"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 7" variable="handFixB" value="1"></action>
                        <action type="assignment" tag="Set handFixG to 8" variable="handFixG" value="0"></action>
                        <action type="assignment" tag="Set handFixR to 9" variable="handFixR" value="0"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min" variable="interval_min" value="800"></action>
                        <action type="assignment" tag="Select interval_max" variable="interval_max" value="1200"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_red 6" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green 5" variable="fix_green" value="1"></action>
                        <action type="assignment" tag="Assign fix_blue 6" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 8" variable="handFixB" value="1"></action>
                        <action type="assignment" tag="Set handFixG to 9" variable="handFixG" value="0"></action>
                        <action type="assignment" tag="Set handFixR to 10" variable="handFixR" value="0"></action>
                        <action type="assignment" tag="Set handFixAlpha to 1" variable="handFixAlpha" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 6" variable="fixY" value="-0.1"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="assignment" tag="Assign ballRed" variable="ballRed" value="0"></action>
                        <action type="assignment" tag="Assign ballGreen" variable="ballGreen" value="0"></action>
                        <action type="assignment" tag="Assign ballBlue" variable="ballBlue" value="1"></action>
                        <action type="if" tag="If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="consecutiveCorrect==0&amp;&amp;localTrials>0">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="consecutiveCorrect!=0||localTrials==0">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="set idFlashAlpha" variable="idFlashAlpha" value="rand(0,1)"></action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="assignment" tag="Assign Nsets" variable="Nsets" value="Nsets"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Live Queue ball 2" type="live_queue_stimulus" stimulus="ball"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 4" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set 2" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set 2"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 2, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 2" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Queue Interval2" type="queue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action tag="Queue set cue" type="queue_stimulus" stimulus="set_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                        <transition type="conditional" tag="When set cue presentation completes, go to Set 2" condition="Interval2_ending" target="Set 2"></transition>
                    </task_system_state>
                    <task_system_state tag="Set 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action type="if" tag="If idRandSet," condition="idRandSet">
                            <action type="if" tag="if thSetFlashAlpha&lt;idFlashAlpha" condition="thSetFlashAlpha&lt;idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=0" variable="setFlashAlpha" value="0"></action>
                            </action>
                            <action type="if" tag="if thSetFlashAlpha>=idFlashAlpha" condition="thSetFlashAlpha>=idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=1" variable="setFlashAlpha" value="1"></action>
                            </action>
                        </action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 5" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if" tag="If Nsets == 1, set cue onset time" condition="Nsets == 1">
                            <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        </action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action type="if" tag="If dtSetHandTarget>0, fixation off aftert dtSetHandTarget" condition="dtSetHandTarget>0">
                            <action type="wait" tag="Wait 3" duration="interval-dtSetHandTarget" duration_units="ms"></action>
                            <action type="assignment" tag="Assign handFixAlpha: Dequeue handFix" variable="handFixAlpha" value="handFixAlpha2"></action>
                        </action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !handFixOn, Transition to Production" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Production"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="handTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action tag="Dequeue cursor" type="dequeue_stimulus" stimulus="cursor"></action>
                        <action tag="Dequeue ball 2" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Live Queue cursor2" type="live_queue_stimulus" stimulus="cursor 2"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start cursorMove:-5/refreshRate()" timer="cursorMove" timebase="" duration="durCursorMove" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to TargetAcquired 2" target="TargetAcquired 2" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign cursor2Alpha 4" variable="cursor2Alpha" value="0"></action>
                        <action tag="Dequeue cursor 3" type="dequeue_stimulus" stimulus="cursor 2"></action>
                        <action tag="Dequeue target 4" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Live Queue Stimulus 14" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Live Queue handFix" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign handFixAlpha: Dequeue handFix 2" variable="handFixAlpha" value="1"></action>
                        <action tag="Update Stimulus Display 15" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign cursor2Alpha 3" variable="cursor2Alpha" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha 5" variable="cursorAlpha" value="1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="Reward"></transition>
                        <transition type="direct" tag="Always Go to Early or Late" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Dequeue ball 3" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 8 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localTrials == trialNumBlock, Transition to Exit State System" condition="localTrials >= trialNumBlockLong || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Live Queue Stimulus 9 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Live Queue Stimulus 10" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - ready_cue_onset_time_us -interval*2000) / 1000.0"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue ball 4" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
        </protocol>
        <protocol tag="_blockedTwoPrior hand with fixOff after SET removeCursor" nsamples="3000" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink 2" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start Mouse Input Device 2" type="start_device_IO" device="Mouse Input Device"></action>
            <action tag="Start NIDaq Device 2" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur 2" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect 2" variable="consecutiveCorrect" value="-1"></action>
            <action type="assignment" tag="Assign pstop 3" variable="pstop" value="0"></action>
            <action type="assignment" tag="Assign fix_red 5" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green 4" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue 5" variable="fix_blue" value="1"></action>
            <action type="assignment" tag="Assign trialNum" variable="trialNum" value="trialNumBlockLong"></action>
            <action tag="Queue Stimulus 4" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 5" type="update_stimulus_display"></action>
            <block tag="long" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="Trials 2" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlockLong" variable="trialNumBlockLong" value="min(round(-(maxTrialNumBlock-minTrialNumBlock)/2*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign fix_win 2" variable="fix_win" value="7"></action>
                        <action type="assignment" tag="Assign amp 2" variable="amp" value="10"></action>
                        <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="-0.1"></action>
                        <action type="assignment" tag="Assign handFixY 4" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="600"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="1"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 7" variable="handFixB" value="1"></action>
                        <action type="assignment" tag="Set handFixG to 8" variable="handFixG" value="0"></action>
                        <action type="assignment" tag="Set handFixR to 9" variable="handFixR" value="0"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min" variable="interval_min" value="800"></action>
                        <action type="assignment" tag="Select interval_max" variable="interval_max" value="1200"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_red 6" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green 5" variable="fix_green" value="1"></action>
                        <action type="assignment" tag="Assign fix_blue 6" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 8" variable="handFixB" value="1"></action>
                        <action type="assignment" tag="Set handFixG to 9" variable="handFixG" value="0"></action>
                        <action type="assignment" tag="Set handFixR to 10" variable="handFixR" value="0"></action>
                        <action type="assignment" tag="Set handFixAlpha to 1" variable="handFixAlpha" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign cursorAlpha 9" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 7" variable="fixY" value="-0.1"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="assignment" tag="Assign ballRed" variable="ballRed" value="0"></action>
                        <action type="assignment" tag="Assign ballGreen" variable="ballGreen" value="0"></action>
                        <action type="assignment" tag="Assign ballBlue" variable="ballBlue" value="1"></action>
                        <action type="if" tag="If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="consecutiveCorrect==0&amp;&amp;localTrials>0">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="consecutiveCorrect!=0||localTrials==0">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="set idFlashAlpha" variable="idFlashAlpha" value="rand(0,1)"></action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="assignment" tag="Assign Nsets" variable="Nsets" value="Nsets"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Live Queue ball 2" type="live_queue_stimulus" stimulus="ball"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 4" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set 2" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set 2"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 2, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 2" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Queue Interval2" type="queue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action tag="Queue set cue" type="queue_stimulus" stimulus="set_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                        <transition type="conditional" tag="When set cue presentation completes, go to Set 2" condition="Interval2_ending" target="Set 2"></transition>
                    </task_system_state>
                    <task_system_state tag="Set 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action type="if" tag="If idRandSet," condition="idRandSet">
                            <action type="if" tag="if thSetFlashAlpha&lt;idFlashAlpha" condition="thSetFlashAlpha&lt;idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=0" variable="setFlashAlpha" value="0"></action>
                            </action>
                            <action type="if" tag="if thSetFlashAlpha>=idFlashAlpha" condition="thSetFlashAlpha>=idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=1" variable="setFlashAlpha" value="1"></action>
                            </action>
                        </action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 5" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if" tag="If Nsets == 1, set cue onset time" condition="Nsets == 1">
                            <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        </action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action type="if" tag="If dtSetHandTarget>0, fixation off aftert dtSetHandTarget" condition="dtSetHandTarget>0">
                            <action type="wait" tag="Wait 3" duration="interval-dtSetHandTarget" duration_units="ms"></action>
                            <action type="assignment" tag="Assign handFixAlpha: Dequeue handFix" variable="handFixAlpha" value="handFixAlpha2"></action>
                        </action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !handFixOn, Transition to Production" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Production"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="handTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action tag="Dequeue cursor" type="dequeue_stimulus" stimulus="cursor"></action>
                        <action tag="Dequeue ball 2" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Live Queue cursor2" type="live_queue_stimulus" stimulus="cursor 2"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start cursorMove:-5/refreshRate()" timer="cursorMove" timebase="" duration="durCursorMove" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to TargetAcquired 2" target="TargetAcquired 2" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue cursor 3" type="dequeue_stimulus" stimulus="cursor 2"></action>
                        <action tag="Dequeue target 4" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Live Queue Stimulus 14" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Live Queue handFix" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign handFixAlpha: Dequeue handFix 2" variable="handFixAlpha" value="1"></action>
                        <action tag="Update Stimulus Display 15" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign cursorAlpha 5" variable="cursorAlpha" value="1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="Reward"></transition>
                        <transition type="direct" tag="Always Go to Early or Late" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Dequeue ball 3" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 8 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha 8" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localTrials == trialNumBlock, Transition to Exit State System" condition="localTrials >= trialNumBlockLong || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Live Queue Stimulus 9 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Live Queue Stimulus 10" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - ready_cue_onset_time_us -interval*2000) / 1000.0"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue ball 4" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
            <block tag="short" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="Trials S2" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlocksShort" variable="trialNumBlockShort" value="min(round(-(maxTrialNumBlock-minTrialNumBlock)/2*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign fix_win 2" variable="fix_win" value="7"></action>
                        <action type="assignment" tag="Assign amp 2" variable="amp" value="10"></action>
                        <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="0.1"></action>
                        <action type="assignment" tag="Assign handFixY 5" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="900"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="1"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 7" variable="handFixB" value="0"></action>
                        <action type="assignment" tag="Set handFixG to 8" variable="handFixG" value="0"></action>
                        <action type="assignment" tag="Set handFixR to 9" variable="handFixR" value="1"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min" variable="interval_min" value="480"></action>
                        <action type="assignment" tag="Select interval_max" variable="interval_max" value="800"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_red 6" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green 5" variable="fix_green" value="1"></action>
                        <action type="assignment" tag="Assign fix_blue 6" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 8" variable="handFixB" value="0"></action>
                        <action type="assignment" tag="Set handFixG to 9" variable="handFixG" value="0"></action>
                        <action type="assignment" tag="Set handFixR to 10" variable="handFixR" value="1"></action>
                        <action type="assignment" tag="Set handFixAlpha to 1" variable="handFixAlpha" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign cursorAlpha 7" variable="cursorAlpha" value="1"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 8" variable="fixY" value="0.1"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="assignment" tag="Assign ballRed" variable="ballRed" value="1"></action>
                        <action type="assignment" tag="Assign ballGreen" variable="ballGreen" value="0"></action>
                        <action type="assignment" tag="Assign ballBlue" variable="ballBlue" value="0"></action>
                        <action type="if" tag="If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="consecutiveCorrect==0&amp;&amp;localTrials>0">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="consecutiveCorrect!=0||localTrials==0">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="set idFlashAlpha" variable="idFlashAlpha" value="rand(0,1)"></action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="assignment" tag="Assign Nsets" variable="Nsets" value="Nsets"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Live Queue ball 2" type="live_queue_stimulus" stimulus="ball"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 4" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set 2" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set 2"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 2, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 2" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Queue Interval2" type="queue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action tag="Queue set cue" type="queue_stimulus" stimulus="set_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                        <transition type="conditional" tag="When set cue presentation completes, go to Set 2" condition="Interval2_ending" target="Set 2"></transition>
                    </task_system_state>
                    <task_system_state tag="Set 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action type="if" tag="If idRandSet," condition="idRandSet">
                            <action type="if" tag="if thSetFlashAlpha&lt;idFlashAlpha" condition="thSetFlashAlpha&lt;idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=0" variable="setFlashAlpha" value="0"></action>
                            </action>
                            <action type="if" tag="if thSetFlashAlpha>=idFlashAlpha" condition="thSetFlashAlpha>=idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=1" variable="setFlashAlpha" value="1"></action>
                            </action>
                        </action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 5" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if" tag="If Nsets == 1, set cue onset time" condition="Nsets == 1">
                            <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        </action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action type="if" tag="If dtSetHandTarget>0, fixation off aftert dtSetHandTarget" condition="dtSetHandTarget>0">
                            <action type="wait" tag="Wait 3" duration="interval-dtSetHandTarget" duration_units="ms"></action>
                            <action type="assignment" tag="Assign handFixAlpha: Dequeue handFix" variable="handFixAlpha" value="handFixAlpha2"></action>
                        </action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !handFixOn, Transition to Production" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Production"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="handTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action tag="Dequeue cursor" type="dequeue_stimulus" stimulus="cursor"></action>
                        <action tag="Dequeue ball 2" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Live Queue cursor2" type="live_queue_stimulus" stimulus="cursor 2"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start cursorMove:-5/refreshRate()" timer="cursorMove" timebase="" duration="durCursorMove" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to TargetAcquired 2" target="TargetAcquired 2" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue cursor 3" type="dequeue_stimulus" stimulus="cursor 2"></action>
                        <action tag="Dequeue target 4" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Live Queue Stimulus 14" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Live Queue handFix" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign handFixAlpha: Dequeue handFix 2" variable="handFixAlpha" value="1"></action>
                        <action tag="Update Stimulus Display 15" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign cursorAlpha 5" variable="cursorAlpha" value="1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="Reward"></transition>
                        <transition type="direct" tag="Always Go to Early or Late" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Dequeue ball 3" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 8 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha 6" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localTrials == trialNumBlock, Transition to Exit State System" condition="localTrials >= trialNumBlockShort || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Live Queue Stimulus 9 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action type="if" tag="If abs(productionInterval - interval)/interval &lt;= 2" condition="abs(productionInterval - interval)/interval &lt;= 2">
                            <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        </action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Live Queue Stimulus 10" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - ready_cue_onset_time_us -interval*2000) / 1000.0"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue ball 4" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ball" type="dequeue_stimulus" stimulus="ball"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
        </protocol>
        <protocol tag="_blockedTwoPrior hand with fixOff after SET removeCursor removeBall" nsamples="3000" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink 2" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start Mouse Input Device 2" type="start_device_IO" device="Mouse Input Device"></action>
            <action tag="Start NIDaq Device 2" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur 2" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect 2" variable="consecutiveCorrect" value="-1"></action>
            <action type="assignment" tag="Assign pstop 3" variable="pstop" value="0"></action>
            <action type="assignment" tag="Assign fix_red 5" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green 4" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue 5" variable="fix_blue" value="1"></action>
            <action type="assignment" tag="Assign trialNum" variable="trialNum" value="trialNumBlockLong"></action>
            <action type="assignment" tag="Assign idHandEye 2" variable="idHandEye" value="0"></action>
            <action tag="Queue Stimulus 4" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 5" type="update_stimulus_display"></action>
            <block tag="long" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="Trials 3333" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlockLong" variable="trialNumBlockLong" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign fix_win 2" variable="fix_win" value="7"></action>
                        <action type="assignment" tag="Assign amp 2" variable="amp" value="10"></action>
                        <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="-dFixY"></action>
                        <action type="assignment" tag="Assign handFixY" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="600"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="1"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 7" variable="handFixB" value="1"></action>
                        <action type="assignment" tag="Set handFixG to 8" variable="handFixG" value="0"></action>
                        <action type="assignment" tag="Set handFixR to 9" variable="handFixR" value="0"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min" variable="interval_min" value="800"></action>
                        <action type="assignment" tag="Select interval_max" variable="interval_max" value="1200"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_red 6" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green 5" variable="fix_green" value="1"></action>
                        <action type="assignment" tag="Assign fix_blue 6" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 8" variable="handFixB" value="1"></action>
                        <action type="assignment" tag="Set handFixG to 9" variable="handFixG" value="0"></action>
                        <action type="assignment" tag="Set handFixR to 10" variable="handFixR" value="0"></action>
                        <action type="assignment" tag="Set handFixAlpha to 1" variable="handFixAlpha" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign cursorAlpha 9" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 7" variable="fixY" value="-dFixY"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="assignment" tag="Assign ballRed" variable="ballRed" value="0"></action>
                        <action type="assignment" tag="Assign ballGreen" variable="ballGreen" value="0"></action>
                        <action type="assignment" tag="Assign ballBlue" variable="ballBlue" value="1"></action>
                        <action type="if" tag="If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="consecutiveCorrect==0&amp;&amp;localTrials>0">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="consecutiveCorrect!=0||localTrials==0">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="set idFlashAlpha" variable="idFlashAlpha" value="rand(0,1)"></action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="assignment" tag="Assign Nsets" variable="Nsets" value="Nsets"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 4" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set 2" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set 2"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 2, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 2" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Queue Interval2" type="queue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action tag="Queue set cue" type="queue_stimulus" stimulus="set_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                        <transition type="conditional" tag="When set cue presentation completes, go to Set 2" condition="Interval2_ending" target="Set 2"></transition>
                    </task_system_state>
                    <task_system_state tag="Set 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action type="if" tag="If idRandSet," condition="idRandSet">
                            <action type="if" tag="if thSetFlashAlpha&lt;idFlashAlpha" condition="thSetFlashAlpha&lt;idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=0" variable="setFlashAlpha" value="0"></action>
                            </action>
                            <action type="if" tag="if thSetFlashAlpha>=idFlashAlpha" condition="thSetFlashAlpha>=idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=1" variable="setFlashAlpha" value="1"></action>
                            </action>
                        </action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 5" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if" tag="If Nsets == 1, set cue onset time" condition="Nsets == 1">
                            <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        </action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action type="if" tag="If dtSetHandTarget>0, fixation off aftert dtSetHandTarget" condition="dtSetHandTarget>0">
                            <action type="wait" tag="Wait 3" duration="interval-dtSetHandTarget" duration_units="ms"></action>
                            <action type="assignment" tag="Assign handFixAlpha: Dequeue handFix" variable="handFixAlpha" value="handFixAlpha2"></action>
                        </action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !handFixOn, Transition to Production" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Production"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="handTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action tag="Dequeue cursor" type="dequeue_stimulus" stimulus="cursor"></action>
                        <action tag="Live Queue cursor2" type="live_queue_stimulus" stimulus="cursor 2"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start cursorMove:-5/refreshRate()" timer="cursorMove" timebase="" duration="durCursorMove" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to TargetAcquired 2" target="TargetAcquired 2" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue cursor 3" type="dequeue_stimulus" stimulus="cursor 2"></action>
                        <action tag="Dequeue target 4" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Live Queue Stimulus 14" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Live Queue handFix" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign handFixAlpha: Dequeue handFix 2" variable="handFixAlpha" value="1"></action>
                        <action tag="Update Stimulus Display 15" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign cursorAlpha 5" variable="cursorAlpha" value="1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="Reward"></transition>
                        <transition type="direct" tag="Always Go to Early or Late" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 8 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha 8" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localTrials == trialNumBlock, Transition to Exit State System" condition="localTrials >= trialNumBlockLong || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 9 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Live Queue Stimulus 10" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - ready_cue_onset_time_us -interval*2000) / 1000.0"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
            <block tag="short" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="Trials S3333" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlocksShort" variable="trialNumBlockShort" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign fix_win 2" variable="fix_win" value="7"></action>
                        <action type="assignment" tag="Assign amp 2" variable="amp" value="10"></action>
                        <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="dFixY"></action>
                        <action type="assignment" tag="Assign handFixY 6" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="900"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="1"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 7" variable="handFixB" value="0"></action>
                        <action type="assignment" tag="Set handFixG to 8" variable="handFixG" value="0"></action>
                        <action type="assignment" tag="Set handFixR to 9" variable="handFixR" value="1"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min" variable="interval_min" value="480"></action>
                        <action type="assignment" tag="Select interval_max" variable="interval_max" value="800"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_red 6" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green 5" variable="fix_green" value="1"></action>
                        <action type="assignment" tag="Assign fix_blue 6" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 8" variable="handFixB" value="0"></action>
                        <action type="assignment" tag="Set handFixG to 9" variable="handFixG" value="0"></action>
                        <action type="assignment" tag="Set handFixR to 10" variable="handFixR" value="1"></action>
                        <action type="assignment" tag="Set handFixAlpha to 1" variable="handFixAlpha" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign cursorAlpha 7" variable="cursorAlpha" value="1"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 8" variable="fixY" value="dFixY"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="assignment" tag="Assign ballRed" variable="ballRed" value="1"></action>
                        <action type="assignment" tag="Assign ballGreen" variable="ballGreen" value="0"></action>
                        <action type="assignment" tag="Assign ballBlue" variable="ballBlue" value="0"></action>
                        <action type="if" tag="If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="consecutiveCorrect==0&amp;&amp;localTrials>0">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="consecutiveCorrect!=0||localTrials==0">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="set idFlashAlpha" variable="idFlashAlpha" value="rand(0,1)"></action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="assignment" tag="Assign Nsets" variable="Nsets" value="Nsets"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 4" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set 2" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set 2"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 2, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 2" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Queue Interval2" type="queue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action tag="Queue set cue" type="queue_stimulus" stimulus="set_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                        <transition type="conditional" tag="When set cue presentation completes, go to Set 2" condition="Interval2_ending" target="Set 2"></transition>
                    </task_system_state>
                    <task_system_state tag="Set 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action type="if" tag="If idRandSet," condition="idRandSet">
                            <action type="if" tag="if thSetFlashAlpha&lt;idFlashAlpha" condition="thSetFlashAlpha&lt;idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=0" variable="setFlashAlpha" value="0"></action>
                            </action>
                            <action type="if" tag="if thSetFlashAlpha>=idFlashAlpha" condition="thSetFlashAlpha>=idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=1" variable="setFlashAlpha" value="1"></action>
                            </action>
                        </action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 5" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if" tag="If Nsets == 1, set cue onset time" condition="Nsets == 1">
                            <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        </action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action type="if" tag="If dtSetHandTarget>0, fixation off aftert dtSetHandTarget" condition="dtSetHandTarget>0">
                            <action type="wait" tag="Wait 3" duration="interval-dtSetHandTarget" duration_units="ms"></action>
                            <action type="assignment" tag="Assign handFixAlpha: Dequeue handFix" variable="handFixAlpha" value="handFixAlpha2"></action>
                        </action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !handFixOn, Transition to Production" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Production"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="handTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action tag="Dequeue cursor" type="dequeue_stimulus" stimulus="cursor"></action>
                        <action tag="Live Queue cursor2" type="live_queue_stimulus" stimulus="cursor 2"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start cursorMove:-5/refreshRate()" timer="cursorMove" timebase="" duration="durCursorMove" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If cursorMove Expired, Transition to TargetAcquired 2" target="TargetAcquired 2" timer="cursorMove"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue cursor 3" type="dequeue_stimulus" stimulus="cursor 2"></action>
                        <action tag="Dequeue target 4" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Live Queue Stimulus 14" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Live Queue handFix" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign handFixAlpha: Dequeue handFix 2" variable="handFixAlpha" value="1"></action>
                        <action tag="Update Stimulus Display 15" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign cursorAlpha 5" variable="cursorAlpha" value="1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="Reward"></transition>
                        <transition type="direct" tag="Always Go to Early or Late" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 8 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha 6" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localTrials == trialNumBlock, Transition to Exit State System" condition="localTrials >= trialNumBlockShort || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 9 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action type="if" tag="If abs(productionInterval - interval)/interval &lt;= 2" condition="abs(productionInterval - interval)/interval &lt;= 2">
                            <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        </action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Live Queue Stimulus 10" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - ready_cue_onset_time_us -interval*2000) / 1000.0"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
        </protocol>
        <protocol tag="_blockedTwoPrior eye with fixOff after SET removeCursor removeBall" nsamples="3000" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink 2" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start Mouse Input Device 2" type="start_device_IO" device="Mouse Input Device"></action>
            <action tag="Start NIDaq Device 2" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur 2" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect 2" variable="consecutiveCorrect" value="-1"></action>
            <action type="assignment" tag="Assign pstop 3" variable="pstop" value="0"></action>
            <action type="assignment" tag="Assign fix_red 5" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green 4" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue 5" variable="fix_blue" value="1"></action>
            <action type="assignment" tag="Assign trialNum" variable="trialNum" value="trialNumBlockLong"></action>
            <action type="assignment" tag="Assign idHandEye" variable="idHandEye" value="1"></action>
            <action tag="Queue Stimulus 4" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 5" type="update_stimulus_display"></action>
            <block tag="longEye" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="Trials 33335" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlockLong" variable="trialNumBlockLong" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign fix_win 2" variable="fix_win" value="7"></action>
                        <action type="assignment" tag="Assign amp 2" variable="amp" value="10"></action>
                        <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="-dFixY"></action>
                        <action type="assignment" tag="Assign handFixY 7" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="600"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="0"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="0"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 7" variable="handFixB" value="1"></action>
                        <action type="assignment" tag="Set handFixG to 8" variable="handFixG" value="1"></action>
                        <action type="assignment" tag="Set handFixR to 9" variable="handFixR" value="1"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min" variable="interval_min" value="800"></action>
                        <action type="assignment" tag="Select interval_max" variable="interval_max" value="1200"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_red 6" variable="fix_red" value="0"></action>
                        <action type="assignment" tag="Assign fix_green 5" variable="fix_green" value="0"></action>
                        <action type="assignment" tag="Assign fix_blue 6" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 8" variable="handFixB" value="1"></action>
                        <action type="assignment" tag="Set handFixG to 9" variable="handFixG" value="1"></action>
                        <action type="assignment" tag="Set handFixR to 10" variable="handFixR" value="1"></action>
                        <action type="assignment" tag="Set handFixAlpha to 1" variable="handFixAlpha" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign cursorAlpha 9" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 7" variable="fixY" value="-dFixY"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="assignment" tag="Assign ballRed" variable="ballRed" value="0"></action>
                        <action type="assignment" tag="Assign ballGreen" variable="ballGreen" value="0"></action>
                        <action type="assignment" tag="Assign ballBlue" variable="ballBlue" value="1"></action>
                        <action type="if" tag="If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="consecutiveCorrect==0&amp;&amp;localTrials>0">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="consecutiveCorrect!=0||localTrials==0">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="set idFlashAlpha" variable="idFlashAlpha" value="rand(0,1)"></action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="assignment" tag="Assign Nsets" variable="Nsets" value="Nsets"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 4" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set 2" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set 2"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 2, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 2" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Queue Interval2" type="queue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action tag="Queue set cue" type="queue_stimulus" stimulus="set_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                        <transition type="conditional" tag="When set cue presentation completes, go to Set 2" condition="Interval2_ending" target="Set 2"></transition>
                    </task_system_state>
                    <task_system_state tag="Set 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action type="if" tag="If idRandSet," condition="idRandSet">
                            <action type="if" tag="if thSetFlashAlpha&lt;idFlashAlpha" condition="thSetFlashAlpha&lt;idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=0" variable="setFlashAlpha" value="0"></action>
                            </action>
                            <action type="if" tag="if thSetFlashAlpha>=idFlashAlpha" condition="thSetFlashAlpha>=idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=1" variable="setFlashAlpha" value="1"></action>
                            </action>
                        </action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 5" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if" tag="If Nsets == 1, set cue onset time" condition="Nsets == 1">
                            <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        </action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action type="if" tag="If dtSetHandTarget>0, fixation off aftert dtSetHandTarget" condition="dtSetHandTarget>0">
                            <action type="wait" tag="Wait 3" duration="interval-dtSetHandTarget" duration_units="ms"></action>
                            <action type="assignment" tag="Assign handFixAlpha: Dequeue handFix" variable="handFixAlpha" value="handFixAlpha2"></action>
                        </action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn, Transition to Production" condition="!fixOn" target="Production"></transition>
                        <transition type="conditional" tag="If !handFixOn, Transition to Abort 3" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="handTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="on_targ" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !handFixOn, Transition to Abort 4" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursorAlpha 5" variable="cursorAlpha" value="1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward 2" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="Reward"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 8 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha 8" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localTrials == trialNumBlock, Transition to Exit State System" condition="localTrials >= trialNumBlockLong || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 9 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Live Queue Stimulus 10" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - ready_cue_onset_time_us -interval*2000) / 1000.0"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
            <block tag="shortEye" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
                <task_system tag="Trials S33335" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlocksShort" variable="trialNumBlockShort" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign fix_win 2" variable="fix_win" value="7"></action>
                        <action type="assignment" tag="Assign amp 2" variable="amp" value="10"></action>
                        <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="dFixY"></action>
                        <action type="assignment" tag="Assign handFixY 8" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="900"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="0"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="0"></action>
                        <action type="assignment" tag="Set handFixB to 7" variable="handFixB" value="1"></action>
                        <action type="assignment" tag="Set handFixG to 8" variable="handFixG" value="1"></action>
                        <action type="assignment" tag="Set handFixR to 9" variable="handFixR" value="1"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min" variable="interval_min" value="480"></action>
                        <action type="assignment" tag="Select interval_max" variable="interval_max" value="800"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_red 6" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green 5" variable="fix_green" value="0"></action>
                        <action type="assignment" tag="Assign fix_blue 6" variable="fix_blue" value="0"></action>
                        <action type="assignment" tag="Set handFixB to 8" variable="handFixB" value="1"></action>
                        <action type="assignment" tag="Set handFixG to 9" variable="handFixG" value="1"></action>
                        <action type="assignment" tag="Set handFixR to 10" variable="handFixR" value="1"></action>
                        <action type="assignment" tag="Set handFixAlpha to 1" variable="handFixAlpha" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign cursorAlpha 7" variable="cursorAlpha" value="1"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 8" variable="fixY" value="dFixY"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="assignment" tag="Assign ballRed" variable="ballRed" value="1"></action>
                        <action type="assignment" tag="Assign ballGreen" variable="ballGreen" value="0"></action>
                        <action type="assignment" tag="Assign ballBlue" variable="ballBlue" value="0"></action>
                        <action type="if" tag="If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="consecutiveCorrect==0&amp;&amp;localTrials>0">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="consecutiveCorrect!=0||localTrials==0">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="set idFlashAlpha" variable="idFlashAlpha" value="rand(0,1)"></action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="assignment" tag="Assign Nsets" variable="Nsets" value="Nsets"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 4" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set 2" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set 2"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 2, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 2" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Queue Interval2" type="queue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action tag="Queue set cue" type="queue_stimulus" stimulus="set_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                        <transition type="conditional" tag="When set cue presentation completes, go to Set 2" condition="Interval2_ending" target="Set 2"></transition>
                    </task_system_state>
                    <task_system_state tag="Set 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action type="if" tag="If idRandSet," condition="idRandSet">
                            <action type="if" tag="if thSetFlashAlpha&lt;idFlashAlpha" condition="thSetFlashAlpha&lt;idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=0" variable="setFlashAlpha" value="0"></action>
                            </action>
                            <action type="if" tag="if thSetFlashAlpha>=idFlashAlpha" condition="thSetFlashAlpha>=idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=1" variable="setFlashAlpha" value="1"></action>
                            </action>
                        </action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 5" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if" tag="If Nsets == 1, set cue onset time" condition="Nsets == 1">
                            <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        </action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action type="if" tag="If dtSetHandTarget>0, fixation off aftert dtSetHandTarget" condition="dtSetHandTarget>0">
                            <action type="wait" tag="Wait 3" duration="interval-dtSetHandTarget" duration_units="ms"></action>
                            <action type="assignment" tag="Assign handFixAlpha: Dequeue handFix" variable="handFixAlpha" value="handFixAlpha2"></action>
                        </action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn, Transition to Production" condition="!fixOn" target="Production"></transition>
                        <transition type="conditional" tag="If !handFixOn, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="handTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="on_targ" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !handFixOn, Transition to Abort 2" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursorAlpha 5" variable="cursorAlpha" value="1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward 2" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="Reward"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 8 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha 6" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localTrials == trialNumBlock, Transition to Exit State System" condition="localTrials >= trialNumBlockShort || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 9 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action type="if" tag="If abs(productionInterval - interval)/interval &lt;= 2" condition="abs(productionInterval - interval)/interval &lt;= 2">
                            <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        </action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Live Queue Stimulus 10" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - ready_cue_onset_time_us -interval*2000) / 1000.0"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
        </protocol>
        <protocol tag="_blockedTwoPrior handEye randWithReplace with fixOff after SET removeCursor removeBall" nsamples="1" sampling_method="cycles" selection="sequential" interruptible="YES">
            <action tag="Start Eyelink 2" type="start_device_IO" device="Eyelink 1000"></action>
            <action tag="Start Mouse Input Device 2" type="start_device_IO" device="Mouse Input Device"></action>
            <action tag="Start NIDaq Device 2" type="start_device_IO" device="NIDaq Device"></action>
            <action type="assignment" tag="Assign bonusRewDur 2" variable="bonusRewDur" value="0"></action>
            <action type="assignment" tag="Assign consecutiveCorrect 2" variable="consecutiveCorrect" value="-1"></action>
            <action type="assignment" tag="Assign pstop 3" variable="pstop" value="0"></action>
            <action type="assignment" tag="Assign fix_red 5" variable="fix_red" value="1"></action>
            <action type="assignment" tag="Assign fix_green 4" variable="fix_green" value="1"></action>
            <action type="assignment" tag="Assign fix_blue 5" variable="fix_blue" value="1"></action>
            <action type="assignment" tag="Assign trialNum" variable="trialNum" value="trialNumBlockLong"></action>
            <action tag="Queue Stimulus 4" type="queue_stimulus" stimulus="New Blank Screen"></action>
            <action tag="Update Stimulus Display 5" type="update_stimulus_display"></action>
            <block tag="New Block" nsamples="10000" sampling_method="cycles" selection="random_without_replacement" interruptible="YES">
                <task_system tag="longHandTrials 333329" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                        <action type="assignment" tag="Assign idHandEye 3" variable="idHandEye" value="0"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlockLong" variable="trialNumBlockLong" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign fix_win 2" variable="fix_win" value="7"></action>
                        <action type="assignment" tag="Assign amp 2" variable="amp" value="10"></action>
                        <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="-dFixY"></action>
                        <action type="assignment" tag="Assign handFixY 9" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="600"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="1"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 7" variable="handFixB" value="1"></action>
                        <action type="assignment" tag="Set handFixG to 8" variable="handFixG" value="0"></action>
                        <action type="assignment" tag="Set handFixR to 9" variable="handFixR" value="0"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min" variable="interval_min" value="800"></action>
                        <action type="assignment" tag="Select interval_max" variable="interval_max" value="1200"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_red 6" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green 5" variable="fix_green" value="1"></action>
                        <action type="assignment" tag="Assign fix_blue 6" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 8" variable="handFixB" value="1"></action>
                        <action type="assignment" tag="Set handFixG to 9" variable="handFixG" value="0"></action>
                        <action type="assignment" tag="Set handFixR to 10" variable="handFixR" value="0"></action>
                        <action type="assignment" tag="Set handFixAlpha to 1" variable="handFixAlpha" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign cursorAlpha 9" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 7" variable="fixY" value="-dFixY"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="assignment" tag="Assign ballRed" variable="ballRed" value="0"></action>
                        <action type="assignment" tag="Assign ballGreen" variable="ballGreen" value="0"></action>
                        <action type="assignment" tag="Assign ballBlue" variable="ballBlue" value="1"></action>
                        <action type="if" tag="If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="consecutiveCorrect==0&amp;&amp;localTrials>0">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="consecutiveCorrect!=0||localTrials==0">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="set idFlashAlpha" variable="idFlashAlpha" value="rand(0,1)"></action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="assignment" tag="Assign Nsets" variable="Nsets" value="Nsets"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 4" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set 2" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set 2"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 2, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 2" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Queue Interval2" type="queue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action tag="Queue set cue" type="queue_stimulus" stimulus="set_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                        <transition type="conditional" tag="When set cue presentation completes, go to Set 2" condition="Interval2_ending" target="Set 2"></transition>
                    </task_system_state>
                    <task_system_state tag="Set 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action type="if" tag="If idRandSet," condition="idRandSet">
                            <action type="if" tag="if thSetFlashAlpha&lt;idFlashAlpha" condition="thSetFlashAlpha&lt;idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=0" variable="setFlashAlpha" value="0"></action>
                            </action>
                            <action type="if" tag="if thSetFlashAlpha>=idFlashAlpha" condition="thSetFlashAlpha>=idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=1" variable="setFlashAlpha" value="1"></action>
                            </action>
                        </action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 5" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if" tag="If Nsets == 1, set cue onset time" condition="Nsets == 1">
                            <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        </action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action type="if" tag="If dtSetHandTarget>0, fixation off aftert dtSetHandTarget" condition="dtSetHandTarget>0">
                            <action type="wait" tag="Wait 3" duration="interval-dtSetHandTarget" duration_units="ms"></action>
                            <action type="assignment" tag="Assign handFixAlpha: Dequeue handFix" variable="handFixAlpha" value="handFixAlpha2"></action>
                        </action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !handFixOn, Transition to Production" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Production"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="handTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursorAlpha 5" variable="cursorAlpha" value="1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward 2" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="Reward"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 8 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha 8" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localTrials == trialNumBlock, Transition to Exit State System" condition="localTrials >= trialNumBlockLong || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 9 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Live Queue Stimulus 10" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - ready_cue_onset_time_us -interval*2000) / 1000.0"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
                <task_system tag="shortHandTrials S333329" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                        <action type="assignment" tag="Assign idHandEye 4" variable="idHandEye" value="0"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlocksShort" variable="trialNumBlockShort" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign fix_win 2" variable="fix_win" value="7"></action>
                        <action type="assignment" tag="Assign amp 2" variable="amp" value="10"></action>
                        <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="dFixY"></action>
                        <action type="assignment" tag="Assign handFixY 10" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="900"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="1"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 7" variable="handFixB" value="0"></action>
                        <action type="assignment" tag="Set handFixG to 8" variable="handFixG" value="0"></action>
                        <action type="assignment" tag="Set handFixR to 9" variable="handFixR" value="1"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min" variable="interval_min" value="480"></action>
                        <action type="assignment" tag="Select interval_max" variable="interval_max" value="800"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_red 6" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green 5" variable="fix_green" value="1"></action>
                        <action type="assignment" tag="Assign fix_blue 6" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 8" variable="handFixB" value="0"></action>
                        <action type="assignment" tag="Set handFixG to 9" variable="handFixG" value="0"></action>
                        <action type="assignment" tag="Set handFixR to 10" variable="handFixR" value="1"></action>
                        <action type="assignment" tag="Set handFixAlpha to 1" variable="handFixAlpha" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign cursorAlpha 7" variable="cursorAlpha" value="1"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 8" variable="fixY" value="dFixY"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="assignment" tag="Assign ballRed" variable="ballRed" value="1"></action>
                        <action type="assignment" tag="Assign ballGreen" variable="ballGreen" value="0"></action>
                        <action type="assignment" tag="Assign ballBlue" variable="ballBlue" value="0"></action>
                        <action type="if" tag="If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="consecutiveCorrect==0&amp;&amp;localTrials>0">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="consecutiveCorrect!=0||localTrials==0">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="set idFlashAlpha" variable="idFlashAlpha" value="rand(0,1)"></action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="assignment" tag="Assign Nsets" variable="Nsets" value="Nsets"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 4" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set 2" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set 2"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 2, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 2" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Queue Interval2" type="queue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action tag="Queue set cue" type="queue_stimulus" stimulus="set_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                        <transition type="conditional" tag="When set cue presentation completes, go to Set 2" condition="Interval2_ending" target="Set 2"></transition>
                    </task_system_state>
                    <task_system_state tag="Set 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action type="if" tag="If idRandSet," condition="idRandSet">
                            <action type="if" tag="if thSetFlashAlpha&lt;idFlashAlpha" condition="thSetFlashAlpha&lt;idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=0" variable="setFlashAlpha" value="0"></action>
                            </action>
                            <action type="if" tag="if thSetFlashAlpha>=idFlashAlpha" condition="thSetFlashAlpha>=idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=1" variable="setFlashAlpha" value="1"></action>
                            </action>
                        </action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 5" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if" tag="If Nsets == 1, set cue onset time" condition="Nsets == 1">
                            <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        </action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action type="if" tag="If dtSetHandTarget>0, fixation off aftert dtSetHandTarget" condition="dtSetHandTarget>0">
                            <action type="wait" tag="Wait 3" duration="interval-dtSetHandTarget" duration_units="ms"></action>
                            <action type="assignment" tag="Assign handFixAlpha: Dequeue handFix" variable="handFixAlpha" value="handFixAlpha2"></action>
                        </action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !handFixOn, Transition to Production" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Production"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="handTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(target_x+handFixX2))&lt;leverTarWinInit/2" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If go to the other target, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-(-target_x+handFixX2))&lt;leverTarWinInit/2" target="Abort"></transition>
                        <transition type="conditional" tag="If !fixOn, Transition to Abort 2" condition="!fixOn" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursorAlpha 5" variable="cursorAlpha" value="1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward 2" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="Reward"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 8 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha 6" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localTrials == trialNumBlock, Transition to Exit State System" condition="localTrials >= trialNumBlockShort || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 9 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action type="if" tag="If abs(productionInterval - interval)/interval &lt;= 2" condition="abs(productionInterval - interval)/interval &lt;= 2">
                            <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        </action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Live Queue Stimulus 10" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - ready_cue_onset_time_us -interval*2000) / 1000.0"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
                <task_system tag="shortEyeTrials S333349" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                        <action type="assignment" tag="Assign idHandEye 5" variable="idHandEye" value="1"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlocksShort" variable="trialNumBlockShort" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign fix_win 2" variable="fix_win" value="7"></action>
                        <action type="assignment" tag="Assign amp 2" variable="amp" value="10"></action>
                        <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="dFixY"></action>
                        <action type="assignment" tag="Assign handFixY 11" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="900"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="0"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="0"></action>
                        <action type="assignment" tag="Set handFixB to 7" variable="handFixB" value="1"></action>
                        <action type="assignment" tag="Set handFixG to 8" variable="handFixG" value="1"></action>
                        <action type="assignment" tag="Set handFixR to 9" variable="handFixR" value="1"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min" variable="interval_min" value="480"></action>
                        <action type="assignment" tag="Select interval_max" variable="interval_max" value="800"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_red 6" variable="fix_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_green 5" variable="fix_green" value="0"></action>
                        <action type="assignment" tag="Assign fix_blue 6" variable="fix_blue" value="0"></action>
                        <action type="assignment" tag="Set handFixB to 8" variable="handFixB" value="1"></action>
                        <action type="assignment" tag="Set handFixG to 9" variable="handFixG" value="1"></action>
                        <action type="assignment" tag="Set handFixR to 10" variable="handFixR" value="1"></action>
                        <action type="assignment" tag="Set handFixAlpha to 1" variable="handFixAlpha" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action type="assignment" tag="Assign cursorAlpha 7" variable="cursorAlpha" value="1"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 8" variable="fixY" value="dFixY"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="assignment" tag="Assign ballRed" variable="ballRed" value="1"></action>
                        <action type="assignment" tag="Assign ballGreen" variable="ballGreen" value="0"></action>
                        <action type="assignment" tag="Assign ballBlue" variable="ballBlue" value="0"></action>
                        <action type="if" tag="If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="consecutiveCorrect==0&amp;&amp;localTrials>0">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="consecutiveCorrect!=0||localTrials==0">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="set idFlashAlpha" variable="idFlashAlpha" value="rand(0,1)"></action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="assignment" tag="Assign Nsets" variable="Nsets" value="Nsets"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 4" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set 2" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set 2"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 2, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 2" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Queue Interval2" type="queue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action tag="Queue set cue" type="queue_stimulus" stimulus="set_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                        <transition type="conditional" tag="When set cue presentation completes, go to Set 2" condition="Interval2_ending" target="Set 2"></transition>
                    </task_system_state>
                    <task_system_state tag="Set 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action type="if" tag="If idRandSet," condition="idRandSet">
                            <action type="if" tag="if thSetFlashAlpha&lt;idFlashAlpha" condition="thSetFlashAlpha&lt;idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=0" variable="setFlashAlpha" value="0"></action>
                            </action>
                            <action type="if" tag="if thSetFlashAlpha>=idFlashAlpha" condition="thSetFlashAlpha>=idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=1" variable="setFlashAlpha" value="1"></action>
                            </action>
                        </action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 5" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if" tag="If Nsets == 1, set cue onset time" condition="Nsets == 1">
                            <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        </action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action type="if" tag="If dtSetHandTarget>0, fixation off aftert dtSetHandTarget" condition="dtSetHandTarget>0">
                            <action type="wait" tag="Wait 3" duration="interval-dtSetHandTarget" duration_units="ms"></action>
                            <action type="assignment" tag="Assign handFixAlpha: Dequeue handFix" variable="handFixAlpha" value="handFixAlpha2"></action>
                        </action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn, Transition to Production" condition="!fixOn" target="Production"></transition>
                        <transition type="conditional" tag="If !handFixOn, Transition to Abort" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="handTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="on_targ" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !handFixOn, Transition to Abort 2" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursorAlpha 5" variable="cursorAlpha" value="1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward 2" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="Reward"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 8 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha 6" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localTrials == trialNumBlock, Transition to Exit State System" condition="localTrials >= trialNumBlockShort || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 9 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action type="if" tag="If abs(productionInterval - interval)/interval &lt;= 2" condition="abs(productionInterval - interval)/interval &lt;= 2">
                            <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        </action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Live Queue Stimulus 10" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - ready_cue_onset_time_us -interval*2000) / 1000.0"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
                <task_system tag="longEyeTrials 3333499" interruptible="YES">
                    <task_system_state tag="Initial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Begin State System" message="State system beginning"></action>
                        <action type="assignment" tag="Assign idHandEye 6" variable="idHandEye" value="1"></action>
                        <action type="assignment" tag="Assign localTrials" variable="localTrials" value="0"></action>
                        <action type="assignment" tag="Assign trialNumBlockLong" variable="trialNumBlockLong" value="min(round(-meanTrialNumBlock*logn(rand(0,1))) + minTrialNumBlock, maxTrialNumBlock)"></action>
                        <action type="assignment" tag="Assign theta" variable="theta" value="180"></action>
                        <action type="assignment" tag="Assign fix_win 2" variable="fix_win" value="7"></action>
                        <action type="assignment" tag="Assign amp 2" variable="amp" value="10"></action>
                        <action type="assignment" tag="Assign ao1" variable="ao0" value="10"></action>
                        <action type="assignment" tag="Assign consecutiveCorrect 4" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign consecutiveIncorrect 5" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign fixY" variable="fixY" value="-dFixY"></action>
                        <action type="assignment" tag="Assign handFixY 12" variable="handFixY" value="fixY-(fix_sz+handFixSz)/2"></action>
                        <action type="assignment" tag="Assign iti 2" variable="iti" value="600"></action>
                        <action type="assignment" tag="Assign centerV 2" variable="centerV" value="(leftV+rightV)/2"></action>
                        <action type="assignment" tag="Assign fix_red" variable="fix_red" value="0"></action>
                        <action type="assignment" tag="Assign fix_green" variable="fix_green" value="0"></action>
                        <action type="assignment" tag="Assign fix_blue" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 7" variable="handFixB" value="1"></action>
                        <action type="assignment" tag="Set handFixG to 8" variable="handFixG" value="1"></action>
                        <action type="assignment" tag="Set handFixR to 9" variable="handFixR" value="1"></action>
                        <action tag="Live Queue Stimulus 2" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display 8" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Select interval_min" variable="interval_min" value="800"></action>
                        <action type="assignment" tag="Select interval_max" variable="interval_max" value="1200"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Go to Fix On" type="direct" target="Fix On"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign targ_red" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Assign fix_red 6" variable="fix_red" value="0"></action>
                        <action type="assignment" tag="Assign fix_green 5" variable="fix_green" value="0"></action>
                        <action type="assignment" tag="Assign fix_blue 6" variable="fix_blue" value="1"></action>
                        <action type="assignment" tag="Set handFixB to 8" variable="handFixB" value="1"></action>
                        <action type="assignment" tag="Set handFixG to 9" variable="handFixG" value="1"></action>
                        <action type="assignment" tag="Set handFixR to 10" variable="handFixR" value="1"></action>
                        <action type="assignment" tag="Set handFixAlpha to 1" variable="handFixAlpha" value="1"></action>
                        <action type="assignment" tag="Assign targ_blue" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green" variable="ballFeedback_blue" value="1"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="0"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="0"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="0"></action>
                        <action tag="Live Queue Fix 11" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 13" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 3" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign cursorAlpha 9" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start fixWait" timer="fixWait" timebase="" duration="fixWaitDur" duration_units="ms"></action>
                        <action type="report" tag="Report fix on" message="Fixation on."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn &amp; handFixOn, Transition to Trial Start" condition="fixOn &amp;&amp; abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)&lt;leverFixWinBackCenter/2" target="Trial Start"></transition>
                        <transition type="timer_expired" tag="If fix_wait Expired, Transition to No Fix" target="No Fix" timer="fixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Grace" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start GraceTime" timer="GraceTime" timebase="" duration="GraceTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to No Fix 2" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX)>leverFixWin/2" target="No Fix"></transition>
                        <transition type="timer_expired" tag="If GraceTime Expired, Transition to Trial Start" target="Trial Start" timer="GraceTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Trial Start" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign startTrial" variable="startTrial" value="1"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="1"></action>
                        <action type="assignment" tag="Assign fixY 7" variable="fixY" value="-dFixY"></action>
                        <action type="assignment" tag="Assign cursorAlpha" variable="cursorAlpha" value="cursorAlpha2"></action>
                        <action type="assignment" tag="Reset stimEnding" variable="stimEnding" value="0"></action>
                        <action type="if" tag="If override, use theta_override" condition="override">
                            <action type="assignment" tag="Set theta" variable="theta" value="theta_override"></action>
                        </action>
                        <action type="assignment" tag="Assign ballRed" variable="ballRed" value="0"></action>
                        <action type="assignment" tag="Assign ballGreen" variable="ballGreen" value="0"></action>
                        <action type="assignment" tag="Assign ballBlue" variable="ballBlue" value="1"></action>
                        <action type="if" tag="If consecutiveCorrect==0&amp;&amp;localTrials>0, repeat theta &amp; interval" condition="consecutiveCorrect==0&amp;&amp;localTrials>0">
                            <action type="if_else" tag="If/Else 4">
                                <action type="if" tag="If consecutiveIncorrect==4, sample theta &amp; interval" condition="consecutiveIncorrect ==4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                                    <action type="assignment" tag="assign consecutiveIncorrect 2" variable="consecutiveIncorrect" value="0"></action>
                                </action>
                                <action type="if" tag="Else, Select repeat" condition="consecutiveIncorrect !=4">
                                    <action type="assignment" tag="Select theta" variable="theta" value="theta"></action>
                                    <action type="assignment" tag="Select interval" variable="interval" value="interval"></action>
                                </action>
                            </action>
                        </action>
                        <action type="if" tag="If consecutiveCorrect!=0||localTrials==0, sample theta &amp; interval" condition="consecutiveCorrect!=0||localTrials==0">
                            <action type="assignment" tag="Select theta" variable="theta" value="theta_min + disc_rand(0,theta_N-1)*(theta_max-theta_min)/(theta_N-1)"></action>
                            <action type="assignment" tag="Select interval" variable="interval" value="interval_min + disc_rand(0,interval_N-1)*(interval_max-interval_min)/(interval_N-1)"></action>
                        </action>
                        <action type="assignment" tag="set idFlashAlpha" variable="idFlashAlpha" value="rand(0,1)"></action>
                        <action type="assignment" tag="Assign handFixX2" variable="handFixX2" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign intervalFrames" variable="intervalFrames" value="round(refreshRate()*interval/1000)"></action>
                        <action type="assignment" tag="Assign saccade_wait_dur" variable="saccade_wait_dur" value="3*interval"></action>
                        <action type="assignment" tag="Set target_x" variable="target_x" value="amp*cos(theta*pi()/180)"></action>
                        <action type="assignment" tag="Set target_y" variable="target_y" value="amp*sin(theta*pi()/180)"></action>
                        <action type="assignment" tag="Assign StartTheta" variable="StartTheta" value="theta-ballArcLength"></action>
                        <action type="assignment" tag="Assign Nsets" variable="Nsets" value="Nsets"></action>
                        <action type="report" tag="Annonce target direction" message="target direction = $theta"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !!fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="direct" tag="Always Go to Fix Time" target="Fix Time"></transition>
                    </task_system_state>
                    <task_system_state tag="Fix Time" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Determine time to target on" variable="fix_time_dur" value="-fix_dur_mean*logn(rand(0,1)) + fix_dur_min"></action>
                        <action type="start_timer" tag="Start fix_time" timer="fix_time" timebase="" duration="fix_time_dur" duration_units="ms"></action>
                        <action type="report" tag="Report fixating" message="Fixating."></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)> leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If fix_time Expired, Transition to Target On" target="Target On" timer="fix_time"></transition>
                    </task_system_state>
                    <task_system_state tag="Target On" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Live Queue target" type="live_queue_stimulus" stimulus="target"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Deterimine time to until fix off" variable="targetTimeDur" value="-target_dur_mean*logn(rand(0,1)) + target_dur_min"></action>
                        <action type="start_timer" tag="Start targetTime" timer="targetTime" timebase="" duration="targetTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0 | !handFixOn, Transition to Abort" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If targetTime Expired, Transition to Ready" target="Ready" timer="targetTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign tStart" variable="tStart" value="nextFrameTime()"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action tag="Queue ready cue" type="queue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Queue Interval1" type="queue_stimulus" stimulus="Interval1"></action>
                        <action tag="Live Queue Fix 3" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 2" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 14" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 4" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store ready cue onset time" variable="ready_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Ready" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Ready"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 1, go to Set 2" condition="Interval1_ending &amp;&amp; Nsets == 1" target="Set 2"></transition>
                        <transition type="conditional" tag="When Interval1_ending &amp;&amp; Nsets == 2, go to Set" condition="Interval1_ending &amp;&amp; Nsets == 2" target="Set"></transition>
                    </task_system_state>
                    <task_system_state tag="Set" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Queue Interval2" type="queue_stimulus" stimulus="Interval2"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action tag="Queue set cue" type="queue_stimulus" stimulus="set_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If fixOn == 0, Transition to After Set1" condition="!fixOn" target="After Set1"></transition>
                        <transition type="conditional" tag="When set cue presentation completes, go to Set 2" condition="Interval2_ending" target="Set 2"></transition>
                    </task_system_state>
                    <task_system_state tag="Set 2" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set2_ended" value="0"></action>
                        <action type="if" tag="If idRandSet," condition="idRandSet">
                            <action type="if" tag="if thSetFlashAlpha&lt;idFlashAlpha" condition="thSetFlashAlpha&lt;idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=0" variable="setFlashAlpha" value="0"></action>
                            </action>
                            <action type="if" tag="if thSetFlashAlpha>=idFlashAlpha" condition="thSetFlashAlpha>=idFlashAlpha">
                                <action type="assignment" tag="execute setFlashAlpha=1" variable="setFlashAlpha" value="1"></action>
                            </action>
                        </action>
                        <action tag="Queue set2 cue" type="queue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Fix 10" type="live_queue_stimulus" stimulus="Fix2"></action>
                        <action tag="Live Queue Fix 4" type="live_queue_stimulus" stimulus="Fix"></action>
                        <action tag="Live Queue Fix 15" type="live_queue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 5" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if" tag="If Nsets == 1, set cue onset time" condition="Nsets == 1">
                            <action type="assignment" tag="Store set cue onset time" variable="set1_cue_onset_time_us" value="now()"></action>
                        </action>
                        <action type="assignment" tag="Store set2 cue onset time" variable="set2_cue_onset_time_us" value="now()"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn | !handFixOn, Transition to After Set1" condition="!fixOn || abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="After Set1"></transition>
                        <transition type="conditional" tag="When set2 cue presentation completes, go to Production Interval" condition="set2_ended" target="Production Interval"></transition>
                    </task_system_state>
                    <task_system_state tag="Production Interval" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="1"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action type="if" tag="If dtSetHandTarget>0, fixation off aftert dtSetHandTarget" condition="dtSetHandTarget>0">
                            <action type="wait" tag="Wait 3" duration="interval-dtSetHandTarget" duration_units="ms"></action>
                            <action type="assignment" tag="Assign handFixAlpha: Dequeue handFix" variable="handFixAlpha" value="handFixAlpha2"></action>
                        </action>
                        <action tag="Update Stimulus Display 9" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign afterSet2" variable="afterSet2" value="1"></action>
                        <action type="start_timer" tag="Start saccade_wait" timer="saccade_wait" timebase="" duration="saccade_wait_dur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If !fixOn, Transition to Production" condition="!fixOn" target="Production"></transition>
                        <transition type="conditional" tag="If !handFixOn, Transition to Abort 3" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccade_wait Expired, Transition to Production" target="Production" timer="saccade_wait"></transition>
                    </task_system_state>
                    <task_system_state tag="Production" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start saccadeTime" timer="saccadeTime" timebase="" duration="handTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If on_targ, Transition to TargetAcquired" condition="on_targ" target="TargetAcquired"></transition>
                        <transition type="conditional" tag="If !handFixOn, Transition to Abort 4" condition="abs((ai0-centerV)/(rightV-centerV)*amp*gainV-handFixX2)>leverFixWinInit/2" target="Abort"></transition>
                        <transition type="timer_expired" tag="If saccadeTime Expired, Transition to No Saccade" target="No Saccade" timer="saccadeTime"></transition>
                    </task_system_state>
                    <task_system_state tag="TargetAcquired" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Assign productionInterval" variable="productionInterval" value="(now()-set2_cue_onset_time_us)/1000"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign cursorX 2" variable="cursorX" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursor2x1" variable="cursor2x0" value="(ai0-centerV)/(rightV-centerV)*amp*gainV"></action>
                        <action type="assignment" tag="Assign cursorAlpha 5" variable="cursorAlpha" value="1"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If correct, Transition to Reward 2" condition="abs(productionInterval - interval)/interval &lt;= win_fraction" target="Reward"></transition>
                        <transition type="direct" tag="Always Go to Early or Late 2" target="Early or Late"></transition>
                    </task_system_state>
                    <task_system_state tag="Reward" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report success" message="Success!"></action>
                        <action type="assignment" tag="Set targ_red to 0" variable="targ_red" value="0"></action>
                        <action type="assignment" tag="Set targ_blue to 0" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 1" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set ballFeedback_red to 0" variable="ballFeedback_red" value="0"></action>
                        <action type="assignment" tag="Set ballFeedback_blue to 0" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 3" variable="ballFeedback_green" value="1"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 8 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Increment consecutiveCorrect" variable="consecutiveCorrect" value="consecutiveCorrect + 1"></action>
                        <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="max(ballAlpha-dAlpha,0)"></action>
                        <action type="assignment" tag="Assign ballAlphaProd" variable="ballAlphaProd" value="max(ballAlphaProd-dballAlphaProd,0)"></action>
                        <action type="assignment" tag="Assign radius" variable="radius" value="max(radius-radiusStep,0)"></action>
                        <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate-dflashRate"></action>
                        <action type="assignment" tag="assign consecutiveIncorrect" variable="consecutiveIncorrect" value="0"></action>
                        <action type="assignment" tag="Assign bonusRewDur" variable="bonusRewDur" value="min(200, (min(4,consecutiveCorrect)-1)*dbonus)"></action>
                        <action type="assignment" tag="Assign win_fraction 2" variable="win_fraction" value="win_fraction-dwin"></action>
                        <action type="pulse" tag="Pulse rewardOut" variable="rewardOut" duration="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Assign totalRewDur" variable="totalRewDur" value="bonusRewDur*1000+rewardDur*1000*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )"></action>
                        <action type="assignment" tag="Increment MovingBall_correct" variable="MovingBall_correct" value="MovingBall_correct+1"></action>
                        <action type="if" tag="If theta>90, increment MovingBall_correctLeft 2" condition="theta>90">
                            <action type="assignment" tag="increment MovingBall_correctLeft" variable="MovingBall_correctLeft" value="MovingBall_correctLeft +1"></action>
                        </action>
                        <action type="if" tag="If theta&lt;=90, increment MovingBall_correctRight 2" condition="theta&lt;=90">
                            <action type="assignment" tag="increment MovingBall_correctRight" variable="MovingBall_correctRight" value="MovingBall_correctRight +1"></action>
                        </action>
                        <action type="assignment" tag="Assign thetaFeedback 4" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start GreenTime" timer="GreenTime" timebase="" duration="bonusRewDur+rewardDur*max(0.00001,1-abs(productionInterval - interval)/interval/win_fraction )" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If GreenTime Expired, Transition to End Trial" target="End Trial" timer="GreenTime"></transition>
                    </task_system_state>
                    <task_system_state tag="End Trial" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 11" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue Fix 5" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Dequeue Interval1" type="dequeue_stimulus" stimulus="Interval1"></action>
                        <action tag="Dequeue Interval2" type="dequeue_stimulus" stimulus="Interval2"></action>
                        <action tag="Stop ready cue" type="stop_dynamic_stimulus" stimulus="ready_cue"></action>
                        <action tag="Stop set cue" type="stop_dynamic_stimulus" stimulus="set_cue"></action>
                        <action tag="Stop set2 cue" type="stop_dynamic_stimulus" stimulus="set2_cue"></action>
                        <action tag="Stop Interval1" type="stop_dynamic_stimulus" stimulus="Interval1"></action>
                        <action tag="Stop Interval2" type="stop_dynamic_stimulus" stimulus="Interval2"></action>
                        <action type="assignment" tag="Increment MovingBall_trials" variable="MovingBall_trials" value="MovingBall_trials+1"></action>
                        <action type="assignment" tag="Increment localTrials" variable="localTrials" value="localTrials+1"></action>
                        <action type="assignment" tag="Reset Interval1_ending" variable="Interval1_ending" value="0"></action>
                        <action type="assignment" tag="Reset Interval2_ending" variable="Interval2_ending" value="0"></action>
                        <action type="assignment" tag="Reset ready_ended" variable="ready_ended" value="0"></action>
                        <action type="assignment" tag="Reset set_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Reset set2_ended" variable="set_ended" value="0"></action>
                        <action type="assignment" tag="Assign Nback" variable="Nback" value="Nback"></action>
                        <action type="assignment" tag="Set targ_green to 3" variable="targ_green" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 4" variable="targ_blue" value="1"></action>
                        <action type="assignment" tag="Set targ_red to 5" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Store set2Off" variable="set2Off" value="0"></action>
                        <action type="assignment" tag="Assign sync" variable="sync" value="0"></action>
                        <action type="assignment" tag="Assign endTrial" variable="endTrial" value="1"></action>
                        <action type="assignment" tag="Assign cursorAlpha 8" variable="cursorAlpha" value="1"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="conditional" tag="If localTrials == trialNumBlock, Transition to Exit State System" condition="localTrials >= trialNumBlockLong || pstop" target="Exit State System"></transition>
                        <transition type="direct" tag="Always Go to ITI" target="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="ITI" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="start_timer" tag="Start ITI" timer="ITI" timebase="" duration="iti" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If ITI Expired, Transition to Fix On" target="Fix On" timer="ITI"></transition>
                    </task_system_state>
                    <task_system_state tag="Early or Late" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 4" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 12" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 9 cursor" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 2" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 2" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 1" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 1" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 6" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="assignment" tag="Assign thetaFeedback 2" variable="thetaFeedback" value="StartTheta+ballArcLength*(acquisitionTime - tStart)/(1e3*(Nsets+1)*interval)"></action>
                        <action type="start_timer" tag="Start FeedbackTime" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="Abort" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Report trial aborted" message="Trial aborted!"></action>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Live Queue Stimulus 10" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="After Ready" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="if" tag="If hand fixation breaks, tp measurement" condition="fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - ready_cue_onset_time_us -interval*2000) / 1000.0"></action>
                        </action>
                        <action type="if" tag="If eye fixation breaks, no tp measurement" condition="!fixOn">
                            <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="-2*interval"></action>
                        </action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterReady" variable="afterReady" value="1"></action>
                        <action tag="Dequeue ready cue" type="dequeue_stimulus" stimulus="ready_cue"></action>
                        <action tag="Dequeue Fix 19" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 18" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 17" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Live Queue Stimulus 11" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action type="assignment" tag="Assign ballFeedback_blue 3" variable="ballFeedback_blue" value="0"></action>
                        <action type="assignment" tag="Assign ballFeedback_red 2" variable="ballFeedback_red" value="1"></action>
                        <action type="assignment" tag="Assign ballFeedback_green 4" variable="ballFeedback_green" value="0"></action>
                        <action type="assignment" tag="Set targ_red to 2" variable="targ_red" value="1"></action>
                        <action type="assignment" tag="Set targ_blue to 7" variable="targ_blue" value="0"></action>
                        <action type="assignment" tag="Set targ_green to 7" variable="targ_green" value="0"></action>
                        <action tag="Live Queue ballFeedback 2" type="live_queue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="start_timer" tag="Start FeedbackTime 2" timer="FeedbackTime" timebase="" duration="FeedbackTimeDur*2" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If FeedbackTime Expired, Transition to Bad 2" target="Bad" timer="FeedbackTime"></transition>
                    </task_system_state>
                    <task_system_state tag="After Set1" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set1_cue_onset_time_us -interval*1000) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action type="assignment" tag="Assign afterSet1" variable="afterSet1" value="1"></action>
                        <action tag="Dequeue set cue" type="dequeue_stimulus" stimulus="set_cue"></action>
                        <action tag="Dequeue set2 cue 3" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Live Queue Stimulus 12" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="No Saccade" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="assignment" tag="Compute Production Time" variable="productionInterval" value="(now() - set2_cue_onset_time_us) / 1000.0"></action>
                        <action type="assignment" tag="Assign acquisitionTime" variable="acquisitionTime" value="now()"></action>
                        <action tag="Dequeue set2 cue" type="dequeue_stimulus" stimulus="set2_cue"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="direct" tag="Always Go to Bad" target="Bad"></transition>
                    </task_system_state>
                    <task_system_state tag="Bad" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 3" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 13" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Dequeue target" type="dequeue_stimulus" stimulus="target"></action>
                        <action tag="Dequeue ballFeedback" type="dequeue_stimulus" stimulus="ballFeedback"></action>
                        <action tag="Live Queue Stimulus 13" type="live_queue_stimulus" stimulus="cursor"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="if_else" tag="If/Else 2">
                            <action type="if" tag="If afterSet2, update win_fraction and flashRate" condition="afterSet2">
                                <action type="assignment" tag="Assign ballAlpha" variable="ballAlpha" value="min(ballAlpha+dballAlphaIncorrect, maxBallAlpha)"></action>
                                <action type="assignment" tag="Assign radius" variable="radius" value="radius + radiusStep"></action>
                                <action type="assignment" tag="Assign win_fraction 3" variable="win_fraction" value="win_fraction+dwin"></action>
                                <action type="assignment" tag="Assign ballAlphaProd 3" variable="ballAlphaProd" value="min(ballAlphaProd+dballAlphaIncorrect, maxBallAlphaProd)"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate+dflashRate"></action>
                            </action>
                            <action type="if" tag="Else" condition="!afterSet2">
                                <action type="assignment" tag="Assign ballAlpha 2" variable="ballAlpha" value="ballAlpha"></action>
                                <action type="assignment" tag="Assign radius 6" variable="radius" value="radius "></action>
                                <action type="assignment" tag="Assign win_fraction" variable="win_fraction" value="win_fraction"></action>
                                <action type="assignment" tag="Assign flashRate" variable="flashRate" value="flashRate"></action>
                            </action>
                        </action>
                        <action type="assignment" tag="Assign consecutiveCorrect" variable="consecutiveCorrect" value="0"></action>
                        <action type="assignment" tag="Assign totalRewDur 3" variable="totalRewDur" value="0"></action>
                        <action type="assignment" tag="increment consecutiveIncorrect" variable="consecutiveIncorrect" value="consecutiveIncorrect+1"></action>
                        <action type="report" tag="Report failure" message="Failure."></action>
                        <action type="start_timer" tag="Start Timeout" timer="Timeout" timebase="" duration="timeout" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If Timeout Expired, Transition to End Trial" target="End Trial" timer="Timeout"></transition>
                    </task_system_state>
                    <task_system_state tag="No Fix" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action tag="Dequeue Fix" type="dequeue_stimulus" stimulus="Fix"></action>
                        <action tag="Dequeue Fix 2" type="dequeue_stimulus" stimulus="Fix2"></action>
                        <action tag="Dequeue Fix 14" type="dequeue_stimulus" stimulus="handFix"></action>
                        <action tag="Update Stimulus Display" type="update_stimulus_display"></action>
                        <action type="report" tag="Report no fixation" message="Failed to fixate."></action>
                        <action type="start_timer" tag="Start NoFixWait" timer="NoFixWait" timebase="" duration="NoFixWaitDur" duration_units="ms"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition type="timer_expired" tag="If NoFixWait Expired, Transition to Fix On" target="Fix On" timer="NoFixWait"></transition>
                    </task_system_state>
                    <task_system_state tag="Exit State System" interruptible="YES">
                        <action_marker _unmoveable="1" tag="Actions"></action_marker>
                        <action type="report" tag="Announce Exit State System" message="Leaving state system"></action>
                        <transition_marker _unmoveable="1" tag="Transitions"></transition_marker>
                        <transition tag="Return to parent task system" type="yield"></transition>
                    </task_system_state>
                </task_system>
            </block>
        </protocol>
    </experiment>
</monkeyml>